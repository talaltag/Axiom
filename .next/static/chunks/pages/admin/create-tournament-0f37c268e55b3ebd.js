(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1013],{41634:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/create-tournament",function(){return n(53899)}])},36698:function(e,t,n){"use strict";n.d(t,{Z:function(){return W}});var i=n(85893),a=n(67294),l=n(79862),s=n(84082),r=n(35510),o=n(16987),d=n(46631),c=n(79519),h=n(25062),u=n(58589),m=n(98842),x=n(4683),p=n(38824),j=n(11163),g=n(45007),Z=n(44109),f=n(25675),v=n.n(f),b=n(25471),y=n(38571),C=n(39646),P=n(83220),S=n(81912),w=n(77662),N=n(48903),k=n(78268),z=n(90408),T=n(77424),D=n(27434),I=n(33299),R=n(41664),M=n.n(R);function W(e){var t,n,f,R,W,E;let{children:F}=e,L=(0,j.useRouter)(),O=(0,g.I0)(),_=(0,I.useSession)(),[A,B]=(0,a.useState)(!0),G=[{text:"Dashboard",icon:(0,i.jsx)(b.Z,{size:20}),path:"/admin/dashboard"},{text:"Tournaments",icon:(0,i.jsx)(y.Z,{size:20}),path:"/admin/tournaments"},{text:"User Management",icon:(0,i.jsx)(C.Z,{size:20}),path:"/admin/users"},{text:"Pay Outs",icon:(0,i.jsx)(P.Z,{size:20}),path:"/admin/payouts"},{text:"Chat",icon:(0,i.jsx)(S.Z,{size:20}),path:"/admin-chat"},{text:"Settings",icon:(0,i.jsx)(w.Z,{size:20}),path:"/admin/settings"}];return(0,i.jsxs)("div",{className:"d-flex",children:[(0,i.jsxs)(l.Z,{vertical:!0,className:"bg-white border-end sidebar ".concat(A?"open":""),style:{width:A?"240px":"64px",height:"100vh",position:"fixed",left:0,top:0,zIndex:1030,transition:"all 0.3s ease-in-out"},children:[(0,i.jsxs)("div",{className:"p-3 d-flex align-items-center mb-2",children:[(0,i.jsxs)("div",{className:"d-flex w-100 align-items-center justify-content-between",children:[A&&(0,i.jsx)(v(),{src:"/axiom-logo.png",alt:"Axiom",width:70,height:45}),(0,i.jsx)(s.Z,{className:"p-0",color:"initial",onClick:()=>B(!A),children:(0,i.jsx)(N.Z,{size:24,style:{transform:A?"rotate(0deg)":"rotate(180deg)",transition:"transform 0.3s ease-in-out"}})})]}),(0,i.jsx)(s.Z,{color:"link",className:"d-lg-none ms-auto p-0",onClick:()=>B(!1),children:(0,i.jsx)(k.Z,{size:24})})]}),G.map(e=>(0,i.jsx)(r.Z,{children:(0,i.jsxs)(M(),{href:e.path,className:"d-flex align-items-center text-decoration-none mb-2 px-3 py-2 ".concat(L.pathname===e.path?"bg-warning text-dark":"text-muted"),style:{justifyContent:A?"flex-start":"center",whiteSpace:"nowrap"},children:[(0,i.jsx)("span",{className:A?"me-2":"",children:e.icon}),A&&e.text]})},e.text))]}),(0,i.jsxs)("div",{className:"flex-grow-1",style:{marginLeft:A?"240px":"64px",transition:"margin 0.3s ease-in-out"},children:[(0,i.jsxs)(o.Z,{color:"white",light:!0,className:"border-bottom  py-2 position-sticky top-0",style:{zIndex:1020},children:[(0,i.jsx)(s.Z,{color:"link",className:"d-lg-none p-0 me-3",onClick:()=>B(!0),children:(0,i.jsx)(z.Z,{size:24})}),(0,i.jsxs)(d.Z,{listClassName:"mb-0",listTag:"div",children:[(0,i.jsx)(c.Z,{href:"#",children:"Dashboard"}),(0,i.jsx)(c.Z,{href:"#",children:"Tournament Name"})]}),(0,i.jsx)(l.Z,{className:"ms-auto d-flex align-items-center",navbar:!0,children:(0,i.jsxs)("div",{className:"d-flex align-items-center me-3",children:[(0,i.jsx)(r.Z,{className:"me-3",children:(0,i.jsxs)(s.Z,{color:"link",className:"position-relative p-0",children:[(0,i.jsx)(T.Z,{size:20,className:"text-muted"}),(0,i.jsx)(h.Z,{color:"danger",pill:!0,className:"position-absolute top-0 end-0 d-flex align-items-center justify-content-center",style:{width:"16px",height:"16px"},children:"2"})]})}),(0,i.jsx)(r.Z,{className:"me-3",children:(0,i.jsxs)(s.Z,{color:"link",className:"position-relative p-0",children:[(0,i.jsx)(S.Z,{size:20,className:"text-muted"}),(0,i.jsx)(h.Z,{color:"danger",pill:!0,className:"position-absolute top-0 end-0 d-flex align-items-center justify-content-center",style:{width:"16px",height:"16px"},children:"4"})]})}),(0,i.jsxs)(u.Z,{dropup:!0,nav:!0,inNavbar:!0,children:[(0,i.jsxs)(m.Z,{nav:!0,children:[(0,i.jsx)(v(),{src:null!==(E=null===(t=_.data)||void 0===t?void 0:t.user.profileImage)&&void 0!==E?E:"/profile-avatar.png",alt:null===(f=_.data)||void 0===f?void 0:null===(n=f.user)||void 0===n?void 0:n.name,width:40,height:40,className:"me-2"}),null===(W=_.data)||void 0===W?void 0:null===(R=W.user)||void 0===R?void 0:R.name," ",(0,i.jsx)(D.Z,{size:16})]}),(0,i.jsxs)(x.Z,{className:"position-absolute",right:!0,children:[(0,i.jsx)(p.Z,{children:"Profile"}),(0,i.jsx)(p.Z,{children:"Settings"}),(0,i.jsx)(p.Z,{divider:!0}),(0,i.jsx)(p.Z,{onClick:()=>{O((0,Z.kS)()),(0,I.signOut)({redirect:!1}).then(()=>L.push("/auth/login"))},children:"Logout"})]})]})]})})]}),(0,i.jsx)("main",{className:"bg-light min-vh-100",children:F})]})]})}},53899:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return I}});var i=n(85893),a=n(67294),l=n(36698),s=n(9729),r=n(21485),o=n(68573),d=n(26541),c=n(6897),h=n(94143),u=n(45083),m=n(65408),x=n(85533),p=n(25281),j=n(65806),g=n(12467),Z=n(84677),f=n(60762),v=n(52857),b=n(95611),y=n(46631),C=n(79519),P=n(11163),S=n(5152),w=n.n(S);n(86834),n(28097),n(47828);var N=n(21773),k=n(89090),z=n(22078);let T=w()(()=>Promise.all([n.e(2937),n.e(8446),n.e(156)]).then(n.t.bind(n,71167,23)),{loadableGenerated:{webpack:()=>[71167]},ssr:!1,loading:()=>(0,i.jsx)("p",{children:"Loading editor..."})}),D=w()(()=>n.e(5555).then(n.bind(n,65555)),{loadableGenerated:{webpack:()=>[null]},ssr:!1,loading:()=>(0,i.jsx)("p",{children:"Loading time picker..."})});function I(){let e=(0,P.useRouter)(),[t,n]=(0,a.useState)({name:"Call of Duty Tournament 2024",type:"Kill Race",game:"COD",platform:"PC",gameMode:"Battle Royale",teamSize:"Squad",date:new Date().toISOString().split("T")[0],time:["10:00","11:00"],entryFee:"50",category:"Cash",restrictions:"Platform-Specific",hasLimit:"yes",limit:"100",description:"<p>Join our exciting Call of Duty tournament with amazing prizes!</p>",attributes:"Featured",totalPrizePool:"1000",winnerCount:3,prizeSplit:[],paymentMethod:"stripe",images:[],status:"Registration Open"}),[S,w]=(0,a.useState)([]),I=async e=>{let i=Array.from(e.target.files).filter(e=>["image/svg+xml","image/png","image/jpeg","image/gif"].includes(e.type)).slice(0,5);n({...t,images:[...t.images,...i]})},R=e=>{let i=t.images.filter((t,n)=>n!==e);n({...t,images:i})},M=async n=>{n.preventDefault();try{let n=new FormData;Object.entries(t).forEach(e=>{let[t,i]=e;"images"===t||"prizeSplit"===t?i.forEach(e=>{n.append(t,e)}):"time"===t?(n.append("time",i[0]),n.append("end",i[1])):n.append(t,i)});let i=await fetch("/api/tournaments",{method:"POST",body:n}),a=await i.json();if(!i.ok)throw Error(a.message||"Failed to create tournament");if(a.success)e.push("/admin/tournaments");else throw Error(a.message||"Failed to create tournament")}catch(e){console.error("Submission error:",e),alert("Error creating tournament: Network or server error")}};return(0,i.jsx)(l.Z,{children:(0,i.jsxs)(s.Z,{sx:{p:3,bgcolor:"#fff",borderRadius:2},children:[(0,i.jsxs)(y.Z,{listClassName:"mb-3",children:[(0,i.jsx)(C.Z,{href:"/admin/tournaments",children:"Tournament Management"}),(0,i.jsx)(C.Z,{active:!0,children:"Create New Tournament"})]}),(0,i.jsx)(r.Z,{variant:"h5",sx:{mb:1,fontWeight:500},children:"Create New Tournament"}),(0,i.jsx)(r.Z,{variant:"subtitle1",sx:{mb:4,color:"text.secondary"},children:"Create your new tournament here."}),(0,i.jsx)("form",{onSubmit:M,children:(0,i.jsxs)(o.ZP,{container:!0,spacing:3,children:[(0,i.jsx)(o.ZP,{item:!0,xs:12,md:6,children:(0,i.jsx)(d.Z,{fullWidth:!0,label:"Tournament Name",value:t.name,onChange:e=>n({...t,name:e.target.value})})}),(0,i.jsx)(o.ZP,{item:!0,xs:12,md:6,children:(0,i.jsxs)(c.Z,{fullWidth:!0,children:[(0,i.jsx)(h.Z,{children:"Tournament Type"}),(0,i.jsxs)(u.Z,{value:t.type,label:"Tournament Type",onChange:e=>n({...t,type:e.target.value}),children:[(0,i.jsx)(m.Z,{value:"Kill Race",children:"Kill Race"}),(0,i.jsx)(m.Z,{value:"Battle Royale",children:"Battle Royale"})]})]})}),(0,i.jsx)(o.ZP,{item:!0,xs:12,md:6,children:(0,i.jsxs)(c.Z,{fullWidth:!0,children:[(0,i.jsx)(h.Z,{children:"Select Game"}),(0,i.jsxs)(u.Z,{value:t.game,label:"Select Game",onChange:e=>n({...t,game:e.target.value}),children:[(0,i.jsx)(m.Z,{value:"COD",children:"Call of Duty"}),(0,i.jsx)(m.Z,{value:"Fortnite",children:"Fortnite"}),(0,i.jsx)(m.Z,{value:"CS",children:"Counter-Strike"})]})]})}),(0,i.jsx)(o.ZP,{item:!0,xs:12,md:6,children:(0,i.jsxs)(c.Z,{fullWidth:!0,children:[(0,i.jsx)(h.Z,{children:"Game Mode"}),(0,i.jsxs)(u.Z,{value:t.gameMode,label:"Game Mode",onChange:e=>n({...t,gameMode:e.target.value}),children:[(0,i.jsx)(m.Z,{value:"Battle Royale",children:"Battle Royale"}),(0,i.jsx)(m.Z,{value:"Team Deathmatch",children:"Team Deathmatch"})]})]})}),(0,i.jsx)(o.ZP,{item:!0,xs:12,md:6,children:(0,i.jsxs)(c.Z,{fullWidth:!0,children:[(0,i.jsx)(h.Z,{children:"Team Size"}),(0,i.jsxs)(u.Z,{value:t.teamSize,label:"Team Size",onChange:e=>n({...t,teamSize:e.target.value}),children:[(0,i.jsx)(m.Z,{value:"Solo",children:"Solo"}),(0,i.jsx)(m.Z,{value:"Duo",children:"Duo"}),(0,i.jsx)(m.Z,{value:"Squad",children:"Squad"}),(0,i.jsx)(m.Z,{value:"Trio",children:"Trio"})]})]})}),(0,i.jsx)(o.ZP,{item:!0,xs:12,md:6,children:(0,i.jsx)(d.Z,{fullWidth:!0,label:"Date",type:"date",value:t.date,InputProps:{inputProps:{min:new Date().toISOString().split("T")[0]}},onChange:e=>n({...t,date:e.target.value}),InputLabelProps:{shrink:!0}})}),(0,i.jsx)(o.ZP,{item:!0,xs:12,md:6,children:(0,i.jsx)(D,{onChange:e=>n({...t,time:e}),value:t.time})}),(0,i.jsx)(o.ZP,{item:!0,xs:12,md:6,children:(0,i.jsxs)(c.Z,{fullWidth:!0,children:[(0,i.jsx)(h.Z,{children:"Platform"}),(0,i.jsxs)(u.Z,{value:t.platform,label:"Platform",onChange:e=>n({...t,platform:e.target.value}),children:[(0,i.jsx)(m.Z,{value:"Xbox",children:"Xbox"}),(0,i.jsx)(m.Z,{value:"PC",children:"PC"}),(0,i.jsx)(m.Z,{value:"PlayStation",children:"PlayStation"})]})]})}),(0,i.jsx)(o.ZP,{item:!0,xs:12,md:6,children:(0,i.jsxs)(c.Z,{fullWidth:!0,children:[(0,i.jsx)(h.Z,{children:"Category"}),(0,i.jsxs)(u.Z,{value:t.category,label:"Category",onChange:e=>n({...t,category:e.target.value}),children:[(0,i.jsx)(m.Z,{value:"Cash",children:"Cash"}),(0,i.jsx)(m.Z,{value:"Free",children:"Free"})]})]})}),(0,i.jsx)(o.ZP,{item:!0,xs:12,md:6,children:(0,i.jsxs)(c.Z,{fullWidth:!0,children:[(0,i.jsx)(h.Z,{children:"Restrictions"}),(0,i.jsxs)(u.Z,{value:t.restrictions,label:"Restrictions",onChange:e=>n({...t,restrictions:e.target.value}),children:[(0,i.jsx)(m.Z,{value:"All",children:"All"}),(0,i.jsx)(m.Z,{value:"Platform-Specific",children:"Platform-Specific"})]})]})}),(0,i.jsx)(o.ZP,{item:!0,xs:12,children:(0,i.jsxs)(c.Z,{children:[(0,i.jsx)(x.Z,{children:"Tournament Limit"}),(0,i.jsxs)(p.Z,{row:!0,value:t.hasLimit,onChange:e=>n({...t,hasLimit:e.target.value}),children:[(0,i.jsx)(j.Z,{value:"yes",control:(0,i.jsx)(g.Z,{}),label:"Yes"}),(0,i.jsx)(j.Z,{value:"no",control:(0,i.jsx)(g.Z,{}),label:"No"})]})]})}),"yes"===t.hasLimit&&(0,i.jsx)(o.ZP,{item:!0,xs:12,md:6,children:(0,i.jsx)(d.Z,{fullWidth:!0,label:"Limit",type:"number",value:t.limit,onChange:e=>n({...t,limit:e.target.value})})}),(0,i.jsx)(o.ZP,{item:!0,xs:12,children:(0,i.jsxs)(c.Z,{children:[(0,i.jsx)(x.Z,{children:"Payment Method"}),(0,i.jsxs)(p.Z,{row:!0,value:t.paymentMethod,onChange:e=>n({...t,paymentMethod:e.target.value}),children:[(0,i.jsx)(j.Z,{value:"stripe",control:(0,i.jsx)(g.Z,{}),label:"Stripe"}),(0,i.jsx)(j.Z,{value:"axiom",control:(0,i.jsx)(g.Z,{}),label:"Axiom Wallet (Balance: $100)"})]})]})}),(0,i.jsx)(o.ZP,{item:!0,xs:12,children:(0,i.jsxs)(s.Z,{sx:{border:"2px dashed #ccc",p:3,borderRadius:2,textAlign:"center"},children:[(0,i.jsx)("input",{type:"file",id:"image-upload",multiple:!0,accept:".svg,.png,.jpg,.gif",onChange:I,style:{display:"none"}}),(0,i.jsx)("label",{htmlFor:"image-upload",children:(0,i.jsx)(Z.Z,{component:"span",startIcon:(0,i.jsx)(N.Z,{}),variant:"contained",children:"Upload Images"})}),(0,i.jsx)(r.Z,{variant:"caption",display:"block",sx:{mt:1},children:"Supported formats: SVG, PNG, JPG, GIF (max: 800x400px)"})]})}),t.images.length>0&&(0,i.jsx)(o.ZP,{item:!0,xs:12,children:(0,i.jsx)(s.Z,{sx:{display:"flex",gap:2,flexWrap:"wrap"},children:t.images.map((e,t)=>(0,i.jsxs)(f.Z,{sx:{position:"relative",width:200},children:[(0,i.jsx)("img",{src:(0,z.Sk)(e),alt:"",style:{width:"100%",height:"auto"}}),(0,i.jsx)(v.Z,{size:"small",onClick:()=>R(t),sx:{position:"absolute",top:8,right:8,bgcolor:"white"},children:(0,i.jsx)(k.Z,{})})]},t))})}),(0,i.jsx)(o.ZP,{item:!0,xs:12,md:6,children:(0,i.jsx)(d.Z,{fullWidth:!0,label:"Total Prize Pool",type:"number",InputProps:{startAdornment:(0,i.jsx)(b.Z,{position:"start",children:"$"})},value:t.totalPrizePool,onChange:e=>n({...t,totalPrizePool:e.target.value})})}),(0,i.jsx)(o.ZP,{item:!0,xs:12,md:6,children:(0,i.jsx)(d.Z,{fullWidth:!0,label:"Number of Winners",type:"number",value:t.winnerCount,onChange:e=>n({...t,winnerCount:parseInt(e.target.value)})})}),(0,i.jsx)(o.ZP,{item:!0,xs:12,children:(0,i.jsx)(Z.Z,{variant:"contained",onClick:()=>{let e=parseFloat(t.totalPrizePool);if(!e||t.winnerCount<1)return;let i=[];for(let n=0;n<t.winnerCount;n++){let t=0===n?100:1===n?30:20;i[n]=e*t/100}n({...t,prizeSplit:i})},children:"Calculate Prize Distribution"})}),t.prizeSplit.map((e,t)=>(0,i.jsx)(o.ZP,{item:!0,xs:12,md:4,children:(0,i.jsx)(d.Z,{fullWidth:!0,label:"".concat(t+1).concat(0===t?"st":1===t?"nd":"rd"," Prize"),value:e.toFixed(2),InputProps:{startAdornment:(0,i.jsx)(b.Z,{position:"start",children:"$"}),readOnly:!0}})},t)),(0,i.jsx)(o.ZP,{item:!0,xs:12,children:(0,i.jsxs)(c.Z,{fullWidth:!0,children:[(0,i.jsx)(h.Z,{children:"Tournament Attributes"}),(0,i.jsxs)(u.Z,{value:t.attributes,label:"Tournament Attributes",onChange:e=>n({...t,attributes:e.target.value}),children:[(0,i.jsx)(m.Z,{value:"Featured",children:"Featured"}),(0,i.jsx)(m.Z,{value:"Regular",children:"Regular"})]})]})}),(0,i.jsx)(o.ZP,{item:!0,xs:12,children:(0,i.jsx)(T,{theme:"snow",value:t.description,onChange:e=>n({...t,description:e}),style:{height:"200px",marginBottom:"50px"}})}),(0,i.jsx)(o.ZP,{item:!0,xs:12,sx:{mt:2},children:(0,i.jsxs)(s.Z,{sx:{display:"flex",gap:2,justifyContent:"flex-end"},children:[(0,i.jsx)(Z.Z,{variant:"outlined",onClick:()=>e.push("/admin/tournaments"),children:"Back"}),(0,i.jsx)(Z.Z,{type:"submit",variant:"contained",sx:{bgcolor:"#F8B602",color:"#000","&:hover":{bgcolor:"#e6a800"}},children:"Publish Tournament"})]})})]})})]})})}},22078:function(e,t,n){"use strict";n.d(t,{Gm:function(){return o},I9:function(){return d},Sk:function(){return s},W2:function(){return l},bJ:function(){return r},iO:function(){return c}});var i=n(30381),a=n.n(i);let l=async()=>{try{let e=await navigator.permissions.query({name:"microphone"});if("denied"===e.state){alert("Please allow microphone access in your browser settings to use this feature.");return}let t=(await navigator.mediaDevices.enumerateDevices()).filter(e=>"audioinput"===e.kind),n=document.createElement("dialog");n.style.padding="20px",n.style.borderRadius="8px",n.style.boxShadow="0 2px 10px rgba(0,0,0,0.1)";let i=document.createElement("button");i.innerHTML="âœ•",i.style.position="absolute",i.style.right="10px",i.style.top="10px",i.style.border="none",i.style.background="none",i.style.fontSize="20px",i.style.cursor="pointer",i.onclick=()=>n.close(),n.appendChild(i);let a=document.createElement("h3");a.textContent="Select Audio Device",n.appendChild(a);let l=document.createElement("select");l.style.width="100%",l.style.padding="8px",l.style.marginBottom="10px",t.forEach(e=>{let t=document.createElement("option");t.value=e.deviceId,t.text=e.label||"Microphone ".concat(e.deviceId.slice(0,5)),l.appendChild(t)});let s=document.createElement("button");s.textContent="Save Selection",s.style.padding="8px 16px",s.onclick=()=>{localStorage.setItem("preferredMicrophoneId",l.value),n.close()},n.appendChild(l),n.appendChild(s),document.body.appendChild(n),n.showModal()}catch(e){console.error("Error accessing media devices:",e),alert("Unable to access microphone. Please check your browser settings.")}},s=e=>{let t=new Blob([e],{type:e.type});return URL.createObjectURL(t)},r=(e,t)=>e.reduce((e,n)=>e+parseInt(n[t]),0),o=e=>{let t="00",n="00",i="00";if(e){let a=Math.floor(e.asSeconds());t=Math.floor(a/3600).toString().padStart(2,"0"),n=Math.floor(a%3600/60).toString().padStart(2,"0"),i=Math.floor(a%60).toString().padStart(2,"0")}return"".concat(t,":").concat(n,":").concat(i)},d=(e,t)=>{let[n,i]=t.split(":"),l=a()(e).add(Number(n),"hours").add(Number(i),"minutes"),s=a()(),r=a().duration(l.diff(s));return 0>r.asSeconds()&&(r=a().duration(0)),console.log("Current time:",l.format()),r},c=e=>1===e?"1st":2===e?"2nd":3===e?"3rd":"".concat(e,"th")}},function(e){e.O(0,[4885,9594,1664,5714,8662,7770,7614,1509,3943,2888,9774,179],function(){return e(e.s=41634)}),_N_E=e.O()}]);