(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9635],{7061:function(e,s,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/users",function(){return n(41401)}])},36698:function(e,s,n){"use strict";n.d(s,{Z:function(){return O}});var i=n(85893),a=n(67294),t=n(79862),l=n(84082),r=n(35510),c=n(16987),d=n(46631),o=n(79519),h=n(25062),x=n(58589),u=n(98842),m=n(4683),j=n(38824),p=n(11163),Z=n(45007),g=n(44109),f=n(25675),v=n.n(f),w=n(25471),y=n(38571),N=n(39646),C=n(83220),S=n(81912),b=n(77662),k=n(48903),E=n(78268),_=n(90408),z=n(77424),T=n(27434),U=n(33299),A=n(41664),D=n.n(A);function O(e){var s,n,f,A,O,P;let{children:I}=e,L=(0,p.useRouter)(),M=(0,Z.I0)(),R=(0,U.useSession)(),[B,F]=(0,a.useState)(!0),X=[{text:"Dashboard",icon:(0,i.jsx)(w.Z,{size:20}),path:"/admin/dashboard"},{text:"Tournaments",icon:(0,i.jsx)(y.Z,{size:20}),path:"/admin/tournaments"},{text:"User Management",icon:(0,i.jsx)(N.Z,{size:20}),path:"/admin/users"},{text:"Pay Outs",icon:(0,i.jsx)(C.Z,{size:20}),path:"/admin/payouts"},{text:"Chat",icon:(0,i.jsx)(S.Z,{size:20}),path:"/admin-chat"},{text:"Settings",icon:(0,i.jsx)(b.Z,{size:20}),path:"/admin/settings"}];return(0,i.jsxs)("div",{className:"d-flex",children:[(0,i.jsxs)(t.Z,{vertical:!0,className:"bg-white border-end sidebar ".concat(B?"open":""),style:{width:B?"240px":"64px",height:"100vh",position:"fixed",left:0,top:0,zIndex:1030,transition:"all 0.3s ease-in-out"},children:[(0,i.jsxs)("div",{className:"p-3 d-flex align-items-center mb-2",children:[(0,i.jsxs)("div",{className:"d-flex w-100 align-items-center justify-content-between",children:[B&&(0,i.jsx)(v(),{src:"/axiom-logo.png",alt:"Axiom",width:70,height:45}),(0,i.jsx)(l.Z,{className:"p-0",color:"initial",onClick:()=>F(!B),children:(0,i.jsx)(k.Z,{size:24,style:{transform:B?"rotate(0deg)":"rotate(180deg)",transition:"transform 0.3s ease-in-out"}})})]}),(0,i.jsx)(l.Z,{color:"link",className:"d-lg-none ms-auto p-0",onClick:()=>F(!1),children:(0,i.jsx)(E.Z,{size:24})})]}),X.map(e=>(0,i.jsx)(r.Z,{children:(0,i.jsxs)(D(),{href:e.path,className:"d-flex align-items-center text-decoration-none mb-2 px-3 py-2 ".concat(L.pathname===e.path?"bg-warning text-dark":"text-muted"),style:{justifyContent:B?"flex-start":"center",whiteSpace:"nowrap"},children:[(0,i.jsx)("span",{className:B?"me-2":"",children:e.icon}),B&&e.text]})},e.text))]}),(0,i.jsxs)("div",{className:"flex-grow-1",style:{marginLeft:B?"240px":"64px",transition:"margin 0.3s ease-in-out"},children:[(0,i.jsxs)(c.Z,{color:"white",light:!0,className:"border-bottom  py-2 position-sticky top-0",style:{zIndex:1020},children:[(0,i.jsx)(l.Z,{color:"link",className:"d-lg-none p-0 me-3",onClick:()=>F(!0),children:(0,i.jsx)(_.Z,{size:24})}),(0,i.jsxs)(d.Z,{listClassName:"mb-0",listTag:"div",children:[(0,i.jsx)(o.Z,{href:"#",children:"Dashboard"}),(0,i.jsx)(o.Z,{href:"#",children:"Tournament Name"})]}),(0,i.jsx)(t.Z,{className:"ms-auto d-flex align-items-center",navbar:!0,children:(0,i.jsxs)("div",{className:"d-flex align-items-center me-3",children:[(0,i.jsx)(r.Z,{className:"me-3",children:(0,i.jsxs)(l.Z,{color:"link",className:"position-relative p-0",children:[(0,i.jsx)(z.Z,{size:20,className:"text-muted"}),(0,i.jsx)(h.Z,{color:"danger",pill:!0,className:"position-absolute top-0 end-0 d-flex align-items-center justify-content-center",style:{width:"16px",height:"16px"},children:"2"})]})}),(0,i.jsx)(r.Z,{className:"me-3",children:(0,i.jsxs)(l.Z,{color:"link",className:"position-relative p-0",children:[(0,i.jsx)(S.Z,{size:20,className:"text-muted"}),(0,i.jsx)(h.Z,{color:"danger",pill:!0,className:"position-absolute top-0 end-0 d-flex align-items-center justify-content-center",style:{width:"16px",height:"16px"},children:"4"})]})}),(0,i.jsxs)(x.Z,{dropup:!0,nav:!0,inNavbar:!0,children:[(0,i.jsxs)(u.Z,{nav:!0,children:[(0,i.jsx)(v(),{src:null!==(P=null===(s=R.data)||void 0===s?void 0:s.user.profileImage)&&void 0!==P?P:"/profile-avatar.png",alt:null===(f=R.data)||void 0===f?void 0:null===(n=f.user)||void 0===n?void 0:n.name,width:40,height:40,className:"me-2"}),null===(O=R.data)||void 0===O?void 0:null===(A=O.user)||void 0===A?void 0:A.name," ",(0,i.jsx)(T.Z,{size:16})]}),(0,i.jsxs)(m.Z,{className:"position-absolute",right:!0,children:[(0,i.jsx)(j.Z,{children:"Profile"}),(0,i.jsx)(j.Z,{children:"Settings"}),(0,i.jsx)(j.Z,{divider:!0}),(0,i.jsx)(j.Z,{onClick:()=>{M((0,g.kS)()),(0,U.signOut)({redirect:!1}).then(()=>L.push("/auth/login"))},children:"Logout"})]})]})]})})]}),(0,i.jsx)("main",{className:"bg-light min-vh-100",children:I})]})]})}},41401:function(e,s,n){"use strict";n.r(s),n.d(s,{default:function(){return B}});var i=n(85893),a=n(67294),t=n(95719),l=n(83024),r=n(21442),c=n(60766),d=n(23138),o=n(89163),h=n(3126),x=n(87261),u=n(23149),m=n(84082);function j(e){let{isOpen:s,toggle:n,editUser:j,onSuccess:p}=e,[Z,g]=(0,a.useState)({name:(null==j?void 0:j.name)||"",email:(null==j?void 0:j.email)||"",password:"",cName:(null==j?void 0:j.cName)||"",role:"User"}),[f,v]=(0,a.useState)(""),[w,y]=(0,a.useState)(!1),N=e=>{g({...Z,[e.target.name]:e.target.value})},C=()=>Z.name&&Z.email&&(j||Z.password)?Z.email.match(/^[^\s@]+@[^\s@]+\.[^\s@]+$/)?!!j||!(Z.password.length<6)||(v("Password must be at least 6 characters long"),!1):(v("Please enter a valid email address"),!1):(v("Please fill in all required fields"),!1),S=async e=>{if(e.preventDefault(),C()){y(!0),v("");try{let e=j?"/api/users/".concat(j._id):"/api/users",s=await fetch(e,{method:j?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Z)}),i=await s.json();if(!i.success)throw Error(i.message);n(),p()}catch(e){v(e.message||"Something went wrong")}finally{y(!1)}}};return(0,i.jsxs)(t.Z,{isOpen:s,toggle:n,children:[(0,i.jsx)(l.Z,{toggle:n,children:j?"Edit User":"Create New User"}),(0,i.jsxs)(r.Z,{onSubmit:S,children:[(0,i.jsxs)(c.Z,{children:[f&&(0,i.jsx)(d.Z,{color:"danger",children:f}),(0,i.jsxs)(o.Z,{children:[(0,i.jsx)(h.Z,{for:"name",children:"Name*"}),(0,i.jsx)(x.Z,{id:"name",name:"name",value:Z.name,onChange:N,placeholder:"Enter name"})]}),(0,i.jsxs)(o.Z,{children:[(0,i.jsx)(h.Z,{for:"email",children:"Email*"}),(0,i.jsx)(x.Z,{id:"email",name:"email",type:"email",value:Z.email,onChange:N,placeholder:"Enter email"})]}),!j&&(0,i.jsxs)(o.Z,{children:[(0,i.jsx)(h.Z,{for:"password",children:"Password*"}),(0,i.jsx)(x.Z,{id:"password",name:"password",type:"password",value:Z.password,onChange:N,placeholder:"Enter password"})]}),(0,i.jsxs)(o.Z,{children:[(0,i.jsx)(h.Z,{for:"cName",children:"Username"}),(0,i.jsx)(x.Z,{id:"cName",name:"cName",value:Z.cName,onChange:N,placeholder:"Enter username"})]}),(0,i.jsxs)(o.Z,{children:[(0,i.jsx)(h.Z,{for:"cName",children:"Role"}),(0,i.jsxs)(x.Z,{type:"select",name:"role",onChange:N,children:[(0,i.jsx)("option",{value:"User",children:"User"}),(0,i.jsx)("option",{value:"Super",children:"Super Admin"}),(0,i.jsx)("option",{value:"Agent",children:"Support Agent"})]})]})]}),(0,i.jsxs)(u.Z,{children:[(0,i.jsx)(m.Z,{color:"secondary",onClick:n,children:"Cancel"}),(0,i.jsx)(m.Z,{color:"primary",type:"submit",disabled:w,children:w?"Saving...":j?"Update":"Create"})]})]})]})}function p(e){let{isOpen:s,toggle:n,userId:r,onSuccess:o}=e,[h,x]=(0,a.useState)(!1),[j,p]=(0,a.useState)(""),Z=async()=>{x(!0),p("");try{let e=await fetch("/api/users/".concat(r),{method:"DELETE"}),s=await e.json();if(!s.success)throw Error(s.message);n(),o()}catch(e){p(e.message||"Error deleting user")}finally{x(!1)}};return(0,i.jsxs)(t.Z,{isOpen:s,toggle:n,children:[(0,i.jsx)(l.Z,{toggle:n,children:"Delete User"}),(0,i.jsxs)(c.Z,{children:[j&&(0,i.jsx)(d.Z,{color:"danger",children:j}),(0,i.jsx)("p",{children:"Are you sure you want to delete this user? This action cannot be undone."})]}),(0,i.jsxs)(u.Z,{children:[(0,i.jsx)(m.Z,{color:"secondary",onClick:n,children:"Cancel"}),(0,i.jsx)(m.Z,{color:"danger",onClick:Z,disabled:h,children:h?"Deleting...":"Delete"})]})]})}var Z=n(36698),g=n(9729),f=n(21485),v=n(84677),w=n(26541),y=n(6897),N=n(94143),C=n(45083),S=n(65408),b=n(25026),k=n(31754),E=n(76592),_=n(70360),z=n(46577),T=n(8863),U=n(12166),A=n(19827),D=n(55895),O=n(52857),P=n(22170),I=n(53839),L=n(38855),M=n(86142),R=n(11163);function B(){let e=(0,R.useRouter)(),[s,n]=(0,a.useState)([]),[t,l]=(0,a.useState)(1),[r,c]=(0,a.useState)(10),[d,o]=(0,a.useState)(0),[h,x]=(0,a.useState)(""),[u,m]=(0,a.useState)(""),[B,F]=(0,a.useState)([]),[X,q]=(0,a.useState)(null),[G,J]=(0,a.useState)(!1),[W,$]=(0,a.useState)(!1),[H,K]=(0,a.useState)(null);(0,a.useEffect)(()=>{Q()},[t,r,h,u]);let Q=async()=>{try{let s=await fetch("/api/users?page=".concat(t,"&limit=").concat(r,"&search=").concat(h,"&type=").concat(u)),i=await s.json();i.success?(n(i.data),o(i.total)):"Not authenticated"===i.message&&e.push("/auth/login")}catch(e){console.error("Error fetching users:",e)}},V=(e,s)=>{q({element:e.currentTarget,id:s})},Y=()=>{q(null)},ee=e=>{K(e),J(!0),Y()},es=e=>{K(e),$(!0),Y()},en=e=>{let s=B.indexOf(e);F(-1===s?[...B,e]:B.filter(s=>s!==e))};return(0,i.jsx)(Z.Z,{children:(0,i.jsxs)(g.Z,{sx:{p:3},children:[(0,i.jsxs)(g.Z,{sx:{display:"flex",justifyContent:"space-between",mb:3},children:[(0,i.jsx)(f.Z,{variant:"h5",children:"User Management"}),(0,i.jsx)(v.Z,{variant:"contained",startIcon:(0,i.jsx)(I.Z,{}),onClick:()=>{K(null),J(!0)},children:"Create User"})]}),(0,i.jsxs)(g.Z,{sx:{display:"flex",gap:2,mb:3},children:[(0,i.jsx)(w.Z,{placeholder:"Search users...",variant:"outlined",size:"small",value:h,onChange:e=>x(e.target.value),InputProps:{startAdornment:(0,i.jsx)(L.Z,{sx:{color:"text.secondary",mr:1}})},sx:{flexGrow:1}}),(0,i.jsxs)(y.Z,{size:"small",sx:{minWidth:120},children:[(0,i.jsx)(N.Z,{children:"Filter Type"}),(0,i.jsxs)(C.Z,{value:u,label:"Filter Type",onChange:e=>m(e.target.value),children:[(0,i.jsx)(S.Z,{value:"",children:"All"}),(0,i.jsx)(S.Z,{value:"Admin",children:"Admin"}),(0,i.jsx)(S.Z,{value:"Basic",children:"Basic"})]})]})]}),(0,i.jsx)(b.Z,{component:k.Z,children:(0,i.jsxs)(E.Z,{children:[(0,i.jsx)(_.Z,{children:(0,i.jsxs)(z.Z,{children:[(0,i.jsx)(T.Z,{padding:"checkbox",children:(0,i.jsx)(U.Z,{checked:B.length===s.length,onChange:e=>{e.target.checked?F(s.map(e=>e._id)):F([])}})}),(0,i.jsx)(T.Z,{children:"S.No"}),(0,i.jsx)(T.Z,{children:"Name"}),(0,i.jsx)(T.Z,{children:"C-Name"}),(0,i.jsx)(T.Z,{children:"Date"}),(0,i.jsx)(T.Z,{children:"Type"}),(0,i.jsx)(T.Z,{children:"Action"})]})}),(0,i.jsx)(A.Z,{children:s.map((e,s)=>(0,i.jsxs)(z.Z,{children:[(0,i.jsx)(T.Z,{padding:"checkbox",children:(0,i.jsx)(U.Z,{checked:B.includes(e._id),onChange:()=>en(e._id)})}),(0,i.jsx)(T.Z,{children:(t-1)*r+s+1}),(0,i.jsx)(T.Z,{children:(0,i.jsxs)(g.Z,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,i.jsx)(D.Z,{src:e.profileImage,alt:e.name}),e.name]})}),(0,i.jsx)(T.Z,{children:e.cName}),(0,i.jsx)(T.Z,{children:new Date(e.createdAt).toLocaleDateString()}),(0,i.jsx)(T.Z,{children:e.role}),(0,i.jsx)(T.Z,{children:(0,i.jsx)(O.Z,{onClick:s=>V(s,e._id),children:(0,i.jsx)(M.Z,{})})})]},e._id))})]})}),(0,i.jsxs)(g.Z,{sx:{display:"flex",justifyContent:"space-between",mt:2},children:[(0,i.jsxs)(C.Z,{size:"small",value:r,onChange:e=>c(e.target.value),children:[(0,i.jsx)(S.Z,{value:10,children:"10 per page"}),(0,i.jsx)(S.Z,{value:20,children:"20 per page"}),(0,i.jsx)(S.Z,{value:30,children:"30 per page"})]}),(0,i.jsxs)(g.Z,{children:["Showing ",(t-1)*r+1," - ",Math.min(t*r,d)," ","of ",d]})]}),(0,i.jsxs)(P.Z,{anchorEl:null==X?void 0:X.element,open:!!X,onClose:Y,children:[(0,i.jsx)(S.Z,{onClick:()=>ee(s.find(e=>e._id===(null==X?void 0:X.id))),children:"Edit"}),(0,i.jsx)(S.Z,{onClick:()=>es(s.find(e=>e._id===(null==X?void 0:X.id))),children:"Delete"})]}),(0,i.jsx)(j,{isOpen:G,toggle:()=>J(!G),editUser:H,onSuccess:Q}),(0,i.jsx)(p,{isOpen:W,toggle:()=>$(!W),userId:null==H?void 0:H._id,onSuccess:Q})]})})}}},function(e){e.O(0,[9594,1664,5714,8662,7770,8682,7614,5719,6050,1831,5902,2888,9774,179],function(){return e(e.s=7061)}),_N_E=e.O()}]);