(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5894],{49708:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/user/dashboard",function(){return t(7457)}])},70525:function(e,s,t){"use strict";t.d(s,{Z:function(){return u}});var i=t(85893),a=t(67294),n=t(58589),r=t(98842),l=t(25062),o=t(4683),c=t(38824),d=t(77424),x=t(41664),m=t.n(x),h=t(25675),p=t.n(h);function u(e){let{role:s}=e,[t,x]=(0,a.useState)([]),[h,u]=(0,a.useState)(0);(0,a.useEffect)(()=>{j()},[]);let j=async()=>{try{let e=localStorage.getItem("token"),s=await fetch("/api/notifications",{headers:{Authorization:"Bearer ".concat(e)}}),t=await s.json();t.success&&(x(t.data),u(t.data.filter(e=>!e.isRead).length))}catch(e){console.error("Error fetching notifications:",e)}};return(0,i.jsxs)(n.Z,{children:[(0,i.jsxs)(r.Z,{nav:!0,className:"position-relative",children:[(0,i.jsx)(d.Z,{size:20}),h>0&&(0,i.jsx)(l.Z,{color:"danger",pill:!0,className:"position-absolute",style:{top:"-5px",right:"-5px"},children:h})]}),(0,i.jsxs)(o.Z,{end:!0,className:"notification-dropdown p-0",style:{width:"320px",maxHeight:"400px"},children:[(0,i.jsxs)("div",{className:"p-2 border-bottom d-flex justify-content-between align-items-center",children:[(0,i.jsx)("h6",{className:"mb-0",children:"Notifications"}),(0,i.jsx)(m(),{href:s?"/".concat(s,"/notifications"):"/user/notifications",className:"text-muted small",children:"View All"})]}),(0,i.jsx)("div",{style:{maxHeight:"300px",overflowY:"auto"},children:0===t.length?(0,i.jsx)(c.Z,{text:!0,children:"No notifications"}):t.slice(0,5).map(e=>(0,i.jsx)(c.Z,{className:"border-bottom",children:(0,i.jsxs)("div",{className:"d-flex align-items-center",children:[(0,i.jsx)(p(),{src:"/user1.png",alt:"User",width:40,height:40,className:"rounded-circle me-2"}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"fw-bold",children:e.title}),(0,i.jsx)("small",{className:"text-muted",children:new Date(e.createdAt).toLocaleString()})]})]})},e._id))})]})]})}},73796:function(e,s,t){"use strict";t.d(s,{Z:function(){return T}});var i=t(85893),a=t(67294),n=t(79862),r=t(84082),l=t(35510),o=t(16987),c=t(58589),d=t(98842),x=t(4683),m=t(38824),h=t(11163),p=t(45007),u=t(44109),j=t(25675),f=t.n(j),g=t(25471),b=t(38571),v=t(39646),N=t(17207),y=t(83220),w=t(81912),Z=t(77662),S=t(48903),z=t(27434),F=t(4868),k=t(41664),E=t.n(k),R=t(70525),D=t(33299);function T(e){var s,t,j,k,T,W;let{children:_}=e,C=(0,h.useRouter)(),A=(0,p.I0)(),[I,P]=(0,a.useState)(!0),L=(0,D.useSession)(),M=[{text:"Dashboard",path:"/user/dashboard",icon:(0,i.jsx)(g.Z,{size:18})},{text:"Tournaments",path:"/user/dashboard/tournaments",icon:(0,i.jsx)(b.Z,{size:18})},{text:"Friends",path:"/user/friends",icon:(0,i.jsx)(v.Z,{size:18})},{text:"Statistics",path:"/user/statistics",icon:(0,i.jsx)(N.Z,{size:18})},{text:"Wallet",path:"/user/wallet",icon:(0,i.jsx)(y.Z,{size:18})},{text:"Chat",path:"/chat",icon:(0,i.jsx)(w.Z,{size:18})},{text:"Settings",path:"/user/settings",icon:(0,i.jsx)(Z.Z,{size:18})}];return(0,i.jsxs)("div",{className:"d-flex",children:[(0,i.jsxs)(n.Z,{vertical:!0,className:"bg-white border-end sidebar ".concat(I?"open":""),style:{width:I?"240px":"64px",height:"100vh",position:"fixed",left:0,top:0,zIndex:1030,transition:"all 0.3s ease-in-out"},children:[(0,i.jsx)("div",{className:"p-3 d-flex align-items-center mb-2",children:(0,i.jsxs)("div",{className:"d-flex w-100 align-items-center justify-content-between",children:[I&&(0,i.jsx)(f(),{src:"/axiom-logo.png",alt:"Axiom",width:70,height:45}),(0,i.jsx)(r.Z,{className:"p-0",color:"initial",onClick:()=>P(!I),children:(0,i.jsx)(S.Z,{size:24,style:{transform:I?"rotate(0deg)":"rotate(180deg)",transition:"transform 0.3s ease-in-out"}})})]})}),M.map(e=>(0,i.jsx)(l.Z,{children:(0,i.jsxs)(E(),{href:e.path,className:"d-flex align-items-center mb-2 px-3 py-2 ".concat(C.pathname===e.path?"bg-warning text-dark":"text-muted"),style:{textDecoration:"none"},children:[e.icon,I&&(0,i.jsx)("span",{className:"ms-2",children:e.text})]})},e.text))]}),(0,i.jsxs)("div",{style:{marginLeft:I?"240px":"64px",transition:"margin-left 0.3s ease-in-out",width:"100%"},children:[(0,i.jsx)(o.Z,{className:"bg-white border-bottom px-4",container:!1,children:(0,i.jsx)(n.Z,{className:"ms-auto d-flex align-items-center",navbar:!0,children:(0,i.jsxs)("div",{className:"d-flex align-items-center me-3",children:[(0,i.jsx)(R.Z,{})," ",(0,i.jsxs)(c.Z,{inNavbar:!0,nav:!0,className:"ms-3",children:[(0,i.jsxs)(d.Z,{nav:!0,children:[(0,i.jsx)(f(),{src:null!==(W=null===(s=L.data)||void 0===s?void 0:s.user.profileImage)&&void 0!==W?W:"/profile-avatar.png",alt:null===(j=L.data)||void 0===j?void 0:null===(t=j.user)||void 0===t?void 0:t.name,width:32,height:32,className:"rounded-circle me-2"}),null===(T=L.data)||void 0===T?void 0:null===(k=T.user)||void 0===k?void 0:k.name," ",(0,i.jsx)(z.Z,{size:16})]}),(0,i.jsx)(x.Z,{end:!0,className:"position-absolute",children:(0,i.jsxs)(m.Z,{onClick:()=>{A((0,u.kS)()),(0,D.signOut)({redirect:!1}).then(()=>C.push("/auth/login"))},children:[(0,i.jsx)(F.Z,{size:14,className:"me-2"}),"Logout"]})})]})]})})}),(0,i.jsx)("main",{className:"p-4",children:_})]})]})}},7457:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return f}});var i=t(85893),a=t(67294),n=t(53637),r=t(84082),l=t(35773),o=t(95305),c=t(39886),d=t(54610),x=t(11788),m=t(11163),h=t(25675),p=t.n(h),u=t(33299),j=t(73796);function f(){let e=(0,m.useRouter)();(0,u.useSession)();let[s,t]=(0,a.useState)([]),[h,f]=(0,a.useState)(null);(0,a.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/tournaments");if(!e.ok){let s=await e.json();throw Error(s.message||"Failed to fetch tournaments")}let s=await e.json();if(s.success)t(s.data);else throw Error(s.message||"An unexpected error occurred")}catch(e){console.error("Error fetching tournaments:",e)}})()},[]),(0,a.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/tournaments/stats");if(!e.ok){let s=await e.json();throw Error(s.message||"Failed to fetch tournaments")}let s=await e.json();if(s.success)f(s.data);else throw Error(s.message||"An unexpected error occurred")}catch(e){console.error("Error fetching tournaments:",e)}})()},[]);let g=(0,a.useMemo)(()=>(null==h?void 0:h.afterTournamentScore)?[{name:"Fortnite",lastScore:h.afterTournamentScore.reduce((e,s)=>e+parseInt(s.score),0),score:80}]:[{name:"Fortnite",lastScore:0,score:0}],[h]);return(0,i.jsx)(j.Z,{children:(0,i.jsxs)(n.Z,{fluid:!0,className:"p-4",children:[(0,i.jsxs)("div",{className:"position-relative mb-5",style:{height:"400px"},children:[(0,i.jsx)(p(),{src:"/fortnite-banner.png",alt:"Warzone",fill:!0,sizes:"100vw",style:{objectFit:"cover"}}),(0,i.jsxs)("div",{className:"position-absolute text-white",style:{top:"32px",left:"32px",right:"32px"},children:[(0,i.jsx)("div",{className:"d-flex justify-content-between align-items-start mb-2",children:(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{className:"mb-0",style:{fontSize:"24px",fontWeight:600},children:"Warzone"}),(0,i.jsx)("div",{style:{fontSize:"14px"},children:"May 23, 2023 9:00PM - 10:30PM EST"})]})}),(0,i.jsx)("h3",{style:{fontSize:"40px",fontWeight:700,marginBottom:"24px"},children:"2022 world champs gaming"}),(0,i.jsx)(r.Z,{color:"warning",className:"px-4",onClick:()=>e.push("/user/dashboard/tournaments"),style:{backgroundColor:"#FFD600",border:"none",padding:"8px 16px",fontWeight:600},children:"Register Now"})]}),s&&s.length>0&&(0,i.jsx)("div",{className:"position-absolute",style:{bottom:"-151px",left:"32px",right:"32px"},children:(0,i.jsx)(l.Z,{className:"g-4",children:s.slice(0,3).map((s,t)=>{var a;return(0,i.jsx)(o.Z,{md:3,children:(0,i.jsxs)(c.Z,{className:"border-0 h-100 tournament-card bg-white",style:{borderRadius:"12px",overflow:"hidden"},children:[(0,i.jsx)("div",{style:{height:"160px",position:"relative"},children:(0,i.jsx)(p(),{src:(null==s?void 0:null===(a=s.images)||void 0===a?void 0:a[0])||"/fortnite-banner.png",alt:(null==s?void 0:s.name)||"Tournament",fill:!0,sizes:"100vw",style:{objectFit:"cover"}})}),(0,i.jsxs)(d.Z,{className:"p-3",children:[(0,i.jsx)("h5",{className:"mb-2",style:{fontSize:"16px",fontWeight:600},children:s.name}),(0,i.jsxs)("div",{style:{fontSize:"12px"},className:"text-muted mb-2",children:[s.date," ",s.time," - ",s.end]}),(0,i.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,i.jsx)("div",{}),(0,i.jsxs)("div",{className:"text-end",children:[(0,i.jsx)("div",{className:"text-muted mb-1",style:{fontSize:"12px"},children:"Entry Cost"}),(0,i.jsxs)("div",{style:{fontSize:"16px",fontWeight:600,color:"#DC3545"},children:["$",s.entryFee]})]})]}),(0,i.jsxs)(r.Z,{color:"link",className:"w-100 text-decoration-none d-flex align-items-center justify-content-center gap-2 mt-3",style:{color:"#FFD600",fontSize:"14px",fontWeight:600,padding:"4px"},onClick:()=>e.push("/user/dashboard/register-tournament/".concat(s._id)),children:["Register Now ",(0,i.jsx)("span",{children:"â†’"})]})]})]})},t)})})})]}),h&&(0,i.jsxs)(l.Z,{style:{paddingTop:"128px"},children:[(0,i.jsxs)(o.Z,{md:8,children:[(0,i.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[(0,i.jsx)("h5",{className:"mb-0",style:{fontSize:"16px",fontWeight:600},children:"Leaderboard"}),(0,i.jsx)("span",{style:{cursor:"pointer",fontSize:"14px",color:"#101828"},children:"More"})]}),(0,i.jsx)(c.Z,{className:"border-0 mb-4 leaderboard-card",style:{borderRadius:"16px",background:"#FFD600",boxShadow:"0px 20px 24px -4px rgba(16, 24, 40, 0.08), 0px 8px 8px -4px rgba(16, 24, 40, 0.03)",height:"420px",padding:"0 24px 24px 24px",overflow:"hidden"},children:(0,i.jsx)(d.Z,{className:"p-0",style:{background:"#FFD600"},children:(0,i.jsx)("div",{className:"position-relative podium-container mb-4",style:{height:"240px"},children:(0,i.jsx)("div",{className:"d-flex justify-content-center align-items-center",children:h.afterTournamentScore.slice(0,3).sort((e,s)=>s.score-e.score).map((e,s)=>{var t,a,n;return(0,i.jsxs)(i.Fragment,{children:[1===s&&(0,i.jsxs)("div",{className:"podium-player",style:{marginTop:"40px",order:1},children:[(0,i.jsx)("div",{className:"podium-avatar-container",children:(0,i.jsx)(p(),{src:null!==(t=e.user.profileImage)&&void 0!==t?t:"/profile-avatar.png",alt:"2nd Place",width:64,height:64,className:"rounded-circle",style:{border:"3px solid white"}})}),(0,i.jsx)("div",{className:"podium-name",children:e.user.name}),(0,i.jsxs)("div",{className:"podium-info",style:{minWidth:"62.142px",height:"86.998px",borderRadius:"32px !important"},children:["2nd",(0,i.jsx)("div",{style:{background:"#FFF3DA",marginTop:"12px",fontSize:"12px",color:"rgba(254, 168, 0, 1)",borderRadius:"10px"},children:e.score})]})]}),0===s&&(0,i.jsxs)("div",{className:"podium-player",style:{margin:"0 40px",order:2},children:[(0,i.jsxs)("div",{className:"podium-avatar-container",children:[(0,i.jsx)("div",{className:"crown-container",children:"\uD83D\uDC51"}),(0,i.jsx)(p(),{src:null!==(a=e.user.profileImage)&&void 0!==a?a:"/profile-avatar.png",alt:"1st Place",width:80,height:80,className:"rounded-circle",style:{border:"4px solid white"}})]}),(0,i.jsx)("div",{className:"podium-name",children:e.user.name}),(0,i.jsx)("div",{className:"podium-info",style:{minWidth:"62.142px",height:"86.998px",borderRadius:"32px !important"},children:(0,i.jsxs)("div",{children:["1st",(0,i.jsx)("p",{style:{background:"#FFF3DA",marginTop:"12px",fontSize:"12px",color:"rgba(254, 168, 0, 1)",borderRadius:"10px"},children:e.score})]})})]}),2===s&&(0,i.jsxs)("div",{className:"podium-player",style:{marginTop:"60px",order:3},children:[(0,i.jsx)("div",{className:"podium-avatar-container",children:(0,i.jsx)(p(),{src:null!==(n=e.user.profileImage)&&void 0!==n?n:"/profile-avatar.png",alt:"3rd Place",width:56,height:56,className:"rounded-circle",style:{border:"3px solid white"}})}),(0,i.jsx)("div",{className:"podium-name",children:e.user.name}),(0,i.jsxs)("div",{className:"podium-info",style:{minWidth:"62.142px",height:"86.998px",borderRadius:"32px !important"},children:["3rd",(0,i.jsx)("div",{style:{background:"#FFF3DA",marginTop:"12px",fontSize:"12px",color:"rgba(254, 168, 0, 1)",borderRadius:"10px"},children:e.score})]})]})]})})})})})})]}),(0,i.jsxs)(o.Z,{md:4,children:[(0,i.jsx)("h5",{className:"mb-4 fw-bold",style:{fontSize:"16px"},children:"Last Game Stats"}),(0,i.jsx)(c.Z,{className:"border-0 mb-4",style:{borderRadius:"16px",background:"#FFFFFF",boxShadow:"0px 20px 24px -4px rgba(16, 24, 40, 0.08), 0px 8px 8px -4px rgba(16, 24, 40, 0.03)"},children:(0,i.jsxs)(d.Z,{className:"p-4",children:[g.map((e,s)=>(0,i.jsxs)("div",{className:"mb-4",children:[(0,i.jsxs)("div",{className:"d-flex flex-column mb-1",children:[(0,i.jsx)("span",{style:{fontSize:"14px",color:"#344054",marginBottom:"4px"},children:e.name}),(0,i.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-1",children:[(0,i.jsx)("small",{className:"text-muted",style:{fontSize:"12px"},children:"Last Score"}),(0,i.jsx)("span",{style:{fontSize:"12px",color:"#344054"},children:e.lastScore})]})]}),(0,i.jsx)(x.Z,{value:e.score,style:{height:"8px",borderRadius:"16px",backgroundImage:"linear-gradient(to right, rgba(92, 92, 216, 0.7), rgba(255, 214, 0, 0.7))"}})]},s)),(0,i.jsxs)("div",{className:"mt-4 p-3 text-center",style:{background:"#FFD600",borderRadius:"8px",marginTop:"44px !important"},children:[(0,i.jsx)("div",{className:"fw-bold mb-1",style:{fontSize:"24px",color:"#101828"},children:"98%"}),(0,i.jsx)("div",{style:{fontSize:"14px",color:"#101828"},children:"Winning streak"})]})]})})]})]})]})})}}},function(e){e.O(0,[9594,1664,5714,8263,2888,9774,179],function(){return e(e.s=49708)}),_N_E=e.O()}]);