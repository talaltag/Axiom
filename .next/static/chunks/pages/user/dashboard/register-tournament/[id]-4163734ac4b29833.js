(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9290],{31911:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/user/dashboard/register-tournament/[id]",function(){return t(2842)}])},70525:function(e,s,t){"use strict";t.d(s,{Z:function(){return u}});var i=t(85893),n=t(67294),a=t(58589),l=t(98842),r=t(25062),d=t(4683),o=t(38824),c=t(77424),x=t(41664),m=t.n(x),h=t(25675),p=t.n(h);function u(e){let{role:s}=e,[t,x]=(0,n.useState)([]),[h,u]=(0,n.useState)(0);(0,n.useEffect)(()=>{f()},[]);let f=async()=>{try{let e=localStorage.getItem("token"),s=await fetch("/api/notifications",{headers:{Authorization:"Bearer ".concat(e)}}),t=await s.json();t.success&&(x(t.data),u(t.data.filter(e=>!e.isRead).length))}catch(e){console.error("Error fetching notifications:",e)}};return(0,i.jsxs)(a.Z,{children:[(0,i.jsxs)(l.Z,{nav:!0,className:"position-relative",children:[(0,i.jsx)(c.Z,{size:20}),h>0&&(0,i.jsx)(r.Z,{color:"danger",pill:!0,className:"position-absolute",style:{top:"-5px",right:"-5px"},children:h})]}),(0,i.jsxs)(d.Z,{end:!0,className:"notification-dropdown p-0",style:{width:"320px",maxHeight:"400px"},children:[(0,i.jsxs)("div",{className:"p-2 border-bottom d-flex justify-content-between align-items-center",children:[(0,i.jsx)("h6",{className:"mb-0",children:"Notifications"}),(0,i.jsx)(m(),{href:s?"/".concat(s,"/notifications"):"/user/notifications",className:"text-muted small",children:"View All"})]}),(0,i.jsx)("div",{style:{maxHeight:"300px",overflowY:"auto"},children:0===t.length?(0,i.jsx)(o.Z,{text:!0,children:"No notifications"}):t.slice(0,5).map(e=>(0,i.jsx)(o.Z,{className:"border-bottom",children:(0,i.jsxs)("div",{className:"d-flex align-items-center",children:[(0,i.jsx)(p(),{src:"/user1.png",alt:"User",width:40,height:40,className:"rounded-circle me-2"}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"fw-bold",children:e.title}),(0,i.jsx)("small",{className:"text-muted",children:new Date(e.createdAt).toLocaleString()})]})]})},e._id))})]})]})}},73796:function(e,s,t){"use strict";t.d(s,{Z:function(){return R}});var i=t(85893),n=t(67294),a=t(79862),l=t(84082),r=t(35510),d=t(16987),o=t(58589),c=t(98842),x=t(4683),m=t(38824),h=t(11163),p=t(45007),u=t(44109),f=t(25675),j=t.n(f),g=t(25471),b=t(38571),v=t(39646),y=t(17207),N=t(83220),S=t(81912),w=t(77662),z=t(48903),Z=t(27434),F=t(4868),C=t(41664),k=t.n(C),E=t(70525),D=t(33299);function R(e){var s,t,f,C,R,T;let{children:_}=e,A=(0,h.useRouter)(),B=(0,p.I0)(),[P,W]=(0,n.useState)(!0),I=(0,D.useSession)(),O=[{text:"Dashboard",path:"/user/dashboard",icon:(0,i.jsx)(g.Z,{size:18})},{text:"Tournaments",path:"/user/dashboard/tournaments",icon:(0,i.jsx)(b.Z,{size:18})},{text:"Friends",path:"/user/friends",icon:(0,i.jsx)(v.Z,{size:18})},{text:"Statistics",path:"/user/statistics",icon:(0,i.jsx)(y.Z,{size:18})},{text:"Wallet",path:"/user/wallet",icon:(0,i.jsx)(N.Z,{size:18})},{text:"Chat",path:"/chat",icon:(0,i.jsx)(S.Z,{size:18})},{text:"Settings",path:"/user/settings",icon:(0,i.jsx)(w.Z,{size:18})}];return(0,i.jsxs)("div",{className:"d-flex",children:[(0,i.jsxs)(a.Z,{vertical:!0,className:"bg-white border-end sidebar ".concat(P?"open":""),style:{width:P?"240px":"64px",height:"100vh",position:"fixed",left:0,top:0,zIndex:1030,transition:"all 0.3s ease-in-out"},children:[(0,i.jsx)("div",{className:"p-3 d-flex align-items-center mb-2",children:(0,i.jsxs)("div",{className:"d-flex w-100 align-items-center justify-content-between",children:[P&&(0,i.jsx)(j(),{src:"/axiom-logo.png",alt:"Axiom",width:70,height:45}),(0,i.jsx)(l.Z,{className:"p-0",color:"initial",onClick:()=>W(!P),children:(0,i.jsx)(z.Z,{size:24,style:{transform:P?"rotate(0deg)":"rotate(180deg)",transition:"transform 0.3s ease-in-out"}})})]})}),O.map(e=>(0,i.jsx)(r.Z,{children:(0,i.jsxs)(k(),{href:e.path,className:"d-flex align-items-center mb-2 px-3 py-2 ".concat(A.pathname===e.path?"bg-warning text-dark":"text-muted"),style:{textDecoration:"none"},children:[e.icon,P&&(0,i.jsx)("span",{className:"ms-2",children:e.text})]})},e.text))]}),(0,i.jsxs)("div",{style:{marginLeft:P?"240px":"64px",transition:"margin-left 0.3s ease-in-out",width:"100%"},children:[(0,i.jsx)(d.Z,{className:"bg-white border-bottom px-4",container:!1,children:(0,i.jsx)(a.Z,{className:"ms-auto d-flex align-items-center",navbar:!0,children:(0,i.jsxs)("div",{className:"d-flex align-items-center me-3",children:[(0,i.jsx)(E.Z,{})," ",(0,i.jsxs)(o.Z,{inNavbar:!0,nav:!0,className:"ms-3",children:[(0,i.jsxs)(c.Z,{nav:!0,children:[(0,i.jsx)(j(),{src:null!==(T=null===(s=I.data)||void 0===s?void 0:s.user.profileImage)&&void 0!==T?T:"/profile-avatar.png",alt:null===(f=I.data)||void 0===f?void 0:null===(t=f.user)||void 0===t?void 0:t.name,width:32,height:32,className:"rounded-circle me-2"}),null===(R=I.data)||void 0===R?void 0:null===(C=R.user)||void 0===C?void 0:C.name," ",(0,i.jsx)(Z.Z,{size:16})]}),(0,i.jsx)(x.Z,{end:!0,className:"position-absolute",children:(0,i.jsxs)(m.Z,{onClick:()=>{B((0,u.kS)()),(0,D.signOut)({redirect:!1}).then(()=>A.push("/auth/login"))},children:[(0,i.jsx)(F.Z,{size:14,className:"me-2"}),"Logout"]})})]})]})})}),(0,i.jsx)("main",{className:"p-4",children:_})]})]})}},2842:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return f}});var i=t(85893),n=t(67294),a=t(11163),l=t(73796),r=t(53637),d=t(35773),o=t(95305),c=t(87261),x=t(84082),m=t(23138),h=t(25675),p=t.n(h),u=t(83206);function f(){var e;let s=(0,a.useRouter)(),{id:t}=s.query,[h,f]=(0,n.useState)(null),[j,g]=(0,n.useState)(""),[b,v]=(0,n.useState)(""),[y,N]=(0,n.useState)([]),[S,w]=(0,n.useState)(!1);(0,n.useEffect)(()=>{t&&z()},[t]),(0,n.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/users/me/friends"),s=await e.json();if(s.success){let e=s.data.map(e=>({id:e._id,name:e.name,avatar:e.profileImage||"/user1.png",status:"pending"}));N(e)}}catch(e){console.error("Error fetching users:",e)}})()},[]);let z=async()=>{try{let e=await fetch("/api/tournaments/".concat(t)),s=await e.json();s.success&&f(s.data)}catch(e){console.error("Error fetching tournament:",e)}},Z=e=>{N(s=>s.map(s=>s.id===e?{...s,status:"invited"}:s))},F=async e=>{if(e.preventDefault(),!S){alert("Please agree to the terms and conditions");return}let i=y.filter(e=>"invited"===e.status).map(e=>e.id);try{let e=await fetch("/api/tournaments/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({team_name:j,tournament_id:t,user_ids:[...i],payment_method:"stripe",payment_token:null})}),n=await e.json();n.success?s.push("/user/dashboard/confirm/".concat(n.data.registration_id)):alert(n.message||"Registration failed")}catch(e){console.error("Registration error:",e),alert("Failed to register for tournament")}},C=y.filter(e=>e.name.toLowerCase().includes(b.toLowerCase()));return(0,i.jsx)(l.Z,{children:(0,i.jsx)(r.Z,{fluid:!0,children:(0,i.jsxs)(d.Z,{className:"mb-4",children:[(0,i.jsxs)(o.Z,{md:8,children:[(0,i.jsxs)("div",{className:"d-flex align-items-center gap-4 p-4 bg-white rounded-3",style:{boxShadow:"0px 20px 24px -4px rgba(16, 24, 40, 0.08), 0px 8px 8px -4px rgba(16, 24, 40, 0.03)",border:"1px solid #EAECF0"},children:[(0,i.jsx)(p(),{src:(null==h?void 0:null===(e=h.images)||void 0===e?void 0:e[0])||"/fortnite-banner.png",alt:"Tournament",width:80,height:80,className:"rounded-3",style:{objectFit:"cover"}}),(0,i.jsxs)("div",{className:"flex-grow-1",children:[(0,i.jsx)("h2",{style:{fontSize:"18px",fontWeight:500,marginBottom:"4px"},children:"Fortnite Summer Battle"}),(0,i.jsx)("p",{className:"text-muted mb-0",style:{fontSize:"14px"},children:"May 23, 2023 9:00PM - 10:30PM EST"})]}),(0,i.jsxs)("div",{className:"text-end",children:[(0,i.jsx)("div",{className:"text-muted mb-1",style:{fontSize:"12px"},children:"Entry Cost"}),(0,i.jsx)("h3",{className:"text-danger fw-bold mb-0",style:{fontSize:"16px"},children:"$200"})]})]}),(null==h?void 0:h.status)=="Registration Open"&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"mt-5",children:(0,i.jsxs)("div",{className:"mb-5 p-4 bg-white rounded-3",style:{boxShadow:"0px 20px 24px -4px rgba(16, 24, 40, 0.08), 0px 8px 8px -4px rgba(16, 24, 40, 0.03)",border:"1px solid #EAECF0"},children:[(0,i.jsx)("h5",{className:"mb-3",children:"Create Team"}),(0,i.jsxs)("div",{className:"d-flex align-items-center gap-3 mb-4",children:[(0,i.jsx)(p(),{src:"/user1.png",alt:"Team Avatar",width:48,height:48,className:"rounded-circle",style:{border:"2px solid #FFD600"}}),(0,i.jsxs)("div",{className:"flex-grow-1",children:[(0,i.jsx)("div",{className:"mb-2",style:{fontSize:"14px",color:"#344054"},children:"Team Name *"}),(0,i.jsx)(c.Z,{value:j,onChange:e=>g(e.target.value),placeholder:"Enter team name",required:!0,style:{height:"44px",border:"1px solid #D0D5DD",borderRadius:"8px",padding:"10px 14px",fontSize:"16px"}})]})]})]})}),(0,i.jsx)("div",{className:"mb-5 p-4 bg-white rounded-3",style:{boxShadow:"0px 20px 24px -4px rgba(16, 24, 40, 0.08), 0px 8px 8px -4px rgba(16, 24, 40, 0.03)",border:"1px solid #EAECF0"},children:(0,i.jsxs)("div",{className:"d-flex flex-column gap-3",children:[(0,i.jsx)("h5",{className:"mb-0",style:{fontSize:"14px",color:"#344054"},children:"Invite Friends"}),(0,i.jsxs)("div",{className:"position-relative",children:[(0,i.jsx)(u.Z,{size:20,className:"position-absolute",style:{top:"50%",transform:"translateY(-50%)",left:"12px",color:"#667085",zIndex:1}}),(0,i.jsx)(c.Z,{placeholder:"Search Friends",value:b,onChange:e=>v(e.target.value),className:"ps-5",style:{backgroundColor:"#fff",border:"1px solid #D0D5DD",borderRadius:"8px",height:"40px"}})]}),C.map(e=>(0,i.jsxs)("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[(0,i.jsxs)("div",{className:"d-flex align-items-center",children:[(0,i.jsx)(p(),{src:e.avatar,alt:e.name,width:40,height:40,className:"rounded-circle me-3"}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{style:{fontSize:"14px",fontWeight:500,color:"#101828"},children:e.name}),(0,i.jsx)("div",{style:{fontSize:"14px",color:"#667085"},children:"Member"})]})]}),(0,i.jsx)(x.Z,{size:"sm",onClick:()=>Z(e.id),disabled:"invited"===e.status,style:{backgroundColor:"invited"===e.status?"#12B76A":"#FFD600",border:"none",color:"invited"===e.status?"#FFFFFF":"#101828",borderRadius:"8px",padding:"6px 12px",fontSize:"14px",fontWeight:500,width:"100px"},children:"invited"===e.status?"Sent":"Send Invite"})]},e.id))]})}),(0,i.jsxs)("div",{className:"mb-5 p-4 bg-white rounded-3",style:{boxShadow:"0px 20px 24px -4px rgba(16, 24, 40, 0.08), 0px 8px 8px -4px rgba(16, 24, 40, 0.03)",border:"1px solid #EAECF0"},children:[(0,i.jsx)("h5",{style:{fontSize:"18px",fontWeight:500,color:"#101828",marginBottom:"24px"},children:"Terms and Conditions"}),(0,i.jsxs)("ul",{style:{listStyle:"none",padding:0,margin:0},children:[(0,i.jsx)("li",{style:{color:"#475467",fontSize:"14px",marginBottom:"16px",lineHeight:"20px"},children:"The Tournament entry fee deduction and winning payment distribution shall be made equally among the respective team members"}),(0,i.jsx)("li",{style:{color:"#475467",fontSize:"14px",marginBottom:"16px",lineHeight:"20px"},children:"Your invited team member will received an email to confirm their registration and participation for this tournament"}),(0,i.jsx)("li",{style:{color:"#475467",fontSize:"14px",marginBottom:"16px",lineHeight:"20px"},children:"Once all team members have confirmed their registration, the entry fee will be automatically deducted from their linked active wallet"}),(0,i.jsx)("li",{style:{color:"#475467",fontSize:"14px",marginBottom:"16px",lineHeight:"20px"},children:"You can find your overall team registration status in Tournaments section"})]}),(0,i.jsxs)("div",{className:"mt-3",style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,i.jsx)("input",{type:"checkbox",checked:S,onChange:e=>w(e.target.checked),id:"terms",style:{width:"16px",height:"16px",accentColor:"#FFD600"}}),(0,i.jsx)("label",{htmlFor:"terms",style:{fontSize:"14px",color:"#475467",margin:0},children:"I have read Terms and Conditions and agree"})]})]})]}),(null==h?void 0:h.status)!=="Registration Open"&&(0,i.jsx)(m.Z,{color:"danger",className:"mt-4",children:"Tournament Registration is closed."})]}),(0,i.jsx)(o.Z,{md:4,children:(0,i.jsxs)("div",{className:"bg-white p-4 rounded-3 h-100",style:{boxShadow:"0px 1px 2px rgba(16, 24, 40, 0.05)",border:"1px solid #EAECF0",background:"#FFF",height:"100%"},children:[(0,i.jsxs)("div",{className:"d-flex flex-column",children:[(0,i.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{style:{fontSize:"12px",color:"#667085"},children:"Entry Cost"}),(0,i.jsx)("div",{className:"fs-2 fw-bold text-dark",children:"$500"})]}),(0,i.jsx)("span",{className:"badge bg-success bg-opacity-10 text-success px-2 py-1",style:{fontSize:"12px"},children:"New"})]}),(0,i.jsx)("div",{style:{fontSize:"14px",color:"#667085",marginBottom:"24px"},children:"Prize"})]}),(0,i.jsx)("div",{className:"mb-3",children:(0,i.jsxs)("div",{className:"d-flex justify-content-between mb-2",children:[(0,i.jsx)("span",{className:"text-muted",style:{fontSize:"14px"},children:"Entry Fee"}),(0,i.jsx)("span",{style:{fontSize:"14px"},children:"$25"})]})}),(0,i.jsx)("div",{className:"mb-3",children:(0,i.jsxs)("div",{className:"d-flex justify-content-between mb-2",children:[(0,i.jsx)("span",{className:"text-muted",style:{fontSize:"14px"},children:"Platform"}),(0,i.jsx)("span",{style:{fontSize:"14px"},children:"XBOX"})]})}),(0,i.jsx)("div",{className:"mb-3",children:(0,i.jsxs)("div",{className:"d-flex justify-content-between mb-2",children:[(0,i.jsx)("span",{className:"text-muted",style:{fontSize:"14px"},children:"Tournament Type"}),(0,i.jsx)("span",{style:{fontSize:"14px"},children:"KILL RACE"})]})}),(0,i.jsx)("div",{className:"mb-3",children:(0,i.jsxs)("div",{className:"d-flex justify-content-between mb-2",children:[(0,i.jsx)("span",{className:"text-muted",style:{fontSize:"14px"},children:"Tournament Size"}),(0,i.jsx)("span",{style:{fontSize:"14px"},children:"0 of 64 teams"})]})}),(0,i.jsx)("div",{className:"mb-3",children:(0,i.jsxs)("div",{className:"d-flex justify-content-between mb-2",children:[(0,i.jsx)("span",{className:"text-muted",style:{fontSize:"14px"},children:"Team Size"}),(0,i.jsx)("span",{style:{fontSize:"14px"},children:"Quad"})]})}),(0,i.jsx)("div",{className:"mb-3",children:(0,i.jsxs)("div",{className:"d-flex justify-content-between mb-2",children:[(0,i.jsx)("span",{className:"text-muted",style:{fontSize:"14px"},children:"Country"}),(0,i.jsx)("span",{style:{fontSize:"14px"},children:"USA"})]})}),(0,i.jsx)("div",{className:"mb-3",children:(0,i.jsxs)("div",{className:"d-flex justify-content-between mb-2",children:[(0,i.jsx)("span",{className:"text-muted",style:{fontSize:"14px"},children:"Game"}),(0,i.jsx)("span",{style:{fontSize:"14px"},children:"Call of Duty"})]})}),(0,i.jsx)("div",{className:"mb-4",children:(0,i.jsxs)("div",{className:"d-flex justify-content-between mb-2",children:[(0,i.jsx)("span",{className:"text-muted",style:{fontSize:"14px"},children:"Game Mode"}),(0,i.jsx)("span",{style:{fontSize:"14px"},children:"Battle Royale"})]})}),(0,i.jsx)(i.Fragment,{children:(null==h?void 0:h.status)=="Registration Open"&&(0,i.jsx)(x.Z,{color:"warning",block:!0,className:"mb-4",style:{backgroundColor:"#FFD600",border:"none",padding:"12px",fontSize:"14px",fontWeight:500,borderRadius:"8px"},children:"Register"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h6",{className:"mb-3",style:{fontSize:"14px",color:"#101828"},children:"Prizes"}),(0,i.jsxs)("div",{className:"d-flex justify-content-between mb-2",children:[(0,i.jsx)("span",{style:{fontSize:"12px",color:"#667085"},children:"1st Winner Prize"}),(0,i.jsx)("span",{style:{fontSize:"12px",color:"#101828"},children:"$776"})]}),(0,i.jsxs)("div",{className:"d-flex justify-content-between mb-2",children:[(0,i.jsx)("span",{className:"text-muted",style:{fontSize:"12px"},children:"2nd Winner Prize"}),(0,i.jsx)("span",{style:{fontSize:"12px"},children:"$776"})]}),(0,i.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,i.jsx)("span",{className:"text-muted",style:{fontSize:"12px"},children:"3rd Winner Prize"}),(0,i.jsx)("span",{style:{fontSize:"12px"},children:"$776"})]})]})]})}),(0,i.jsx)(o.Z,{children:(0,i.jsxs)("div",{className:"d-flex justify-content-end gap-3 mt-4",children:[(0,i.jsx)(x.Z,{color:"light",onClick:()=>s.back(),style:{padding:"10px 24px",fontSize:"14px",fontWeight:500,color:"#344054",backgroundColor:"#FFFFFF",border:"1px solid #D0D5DD",borderRadius:"8px",boxShadow:"0px 1px 2px rgba(16, 24, 40, 0.05)"},children:"← Back"}),(null==h?void 0:h.status)=="Registration Open"&&(0,i.jsx)(x.Z,{color:"warning",onClick:F,style:{padding:"10px 24px",fontSize:"14px",fontWeight:500,backgroundColor:"#FFD600",border:"none",borderRadius:"8px",boxShadow:"0px 1px 2px rgba(16, 24, 40, 0.05)",minWidth:"120px"},children:"Register"})]})})]})})})}}},function(e){e.O(0,[9594,1664,5714,8662,8080,2888,9774,179],function(){return e(e.s=31911)}),_N_E=e.O()}]);