(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7487],{74123:function(e,t,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/user/dashboard/tournaments",function(){return o(57893)}])},57893:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return z}});var n=o(85893),s=o(67294),i=o(33299),r=o(73796),l=o(53637),a=o(35773),d=o(95305),c=o(39886),x=o(54610),p=o(84082),u=o(87261),m=o(23138),h=o(25675),g=o.n(h),f=o(83206),b=o(81912),y=o(45169),v=o(85166),j=o(11163),S=o(70833),F=o(25062),w=o(22078),N=e=>{var t;let{item:o}=e,r=(0,j.useRouter)(),{data:l}=(0,i.useSession)(),[a,d]=(0,s.useState)(o),[u,m]=(0,s.useState)(null),[h,f]=(0,s.useState)(null),b=(0,s.useMemo)(()=>{var e;return!!a&&(null===(e=a.memberPayments.find(e=>{var t;return e.userId==(null==l?void 0:null===(t=l.user)||void 0===t?void 0:t.id)}))||void 0===e?void 0:e.paymentStatus)==="completed"},[a]);return(0,s.useEffect)(()=>{let e,t;return a&&"Registration Open"===a.status&&(e=setInterval(()=>{let t=(0,w.I9)(a.date,a.time);m(t),(null==t?void 0:t.asSeconds())<=0&&(clearInterval(e),d(e=>({...e,status:"ongoing"})))},1e3)),a&&"ongoing"===a.status&&(t=setInterval(()=>{let e=(0,w.I9)(a.date,a.end);f(e),(null==e?void 0:e.asSeconds())<=0&&(clearInterval(t),d(e=>({...e,status:"completed"})))},1e3)),()=>{e&&clearInterval(e),t&&clearInterval(t)}},[a]),(0,n.jsxs)(c.Z,{className:"tournament-card h-100",style:{borderRadius:"16px",overflow:"hidden",border:"1px solid #EAECF0",backgroundColor:"#FFFFFF",boxShadow:"0px 1px 2px rgba(16, 24, 40, 0.05)"},children:[(0,n.jsxs)("div",{style:{position:"relative",height:"180px"},children:[(0,n.jsxs)("div",{className:"".concat("completed"===a.status?"bg-success":"bg-danger"),style:{position:"absolute",bottom:"12px",left:"12px",zIndex:2,padding:"4px 12px",borderRadius:"16px",fontSize:"14px",color:"#FFFFFF",fontWeight:500},children:["Registration Open"===a.status&&"Closing in: ".concat((0,w.Gm)(u)),"ongoing"===a.status&&"Ending in: ".concat((0,w.Gm)(h)),"completed"===a.status&&"Completed"]}),(0,n.jsx)(g(),{src:(null==a?void 0:null===(t=a.images)||void 0===t?void 0:t[0])||"/fortnite-banner.png",alt:(null==a?void 0:a.name)||"Tournament",layout:"fill",objectFit:"cover",sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw"})]}),(0,n.jsxs)(x.Z,{className:"p-4",children:[(0,n.jsx)("h5",{style:{fontSize:"18px",fontWeight:600,marginBottom:"4px",color:"#101828"},children:a.name}),(0,n.jsxs)("div",{style:{fontSize:"14px",color:"#667085",marginBottom:"24px"},children:[a.date," â€¢ ",a.time," - ",a.end]}),(0,n.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{style:{fontSize:"14px",color:"#344054",marginBottom:"4px",fontWeight:500},children:"Prize"}),(0,n.jsxs)("div",{style:{fontSize:"20px",fontWeight:600,color:"#F04438"},children:["$",a.totalPrizePool]})]}),(0,n.jsxs)("div",{className:"text-end",children:[(0,n.jsx)("div",{style:{fontSize:"14px",color:"#344054",marginBottom:"4px",fontWeight:500},children:"Entry Cost"}),(0,n.jsxs)("div",{style:{fontSize:"20px",fontWeight:600,color:"#F04438"},children:["$",a.entryFee," ",(0,n.jsx)(F.Z,{color:b&&"success",style:{fontSize:"12px"},children:b?"Paid":"Unpaid"})]})]})]}),(0,n.jsxs)(p.Z,{color:"link",className:"text-decoration-none p-0",style:{fontSize:"16px",fontWeight:600,color:"#101828",display:"flex",alignItems:"center"},onClick:()=>r.push("/user/dashboard/confirm/".concat(a._id)),children:["See Details ",(0,n.jsx)(y.Z,{size:20,className:"ms-2"})]})]})]})};function z(){var e;let{data:t}=(0,i.useSession)(),o=(0,j.useRouter)(),[h,F]=(0,s.useState)([]),[w,z]=(0,s.useState)([]),[D,C]=(0,s.useState)(!0),[Z,k]=(0,s.useState)(null),[E,W]=(0,s.useState)("upcoming"),[I,R]=(0,s.useState)([]),[_,M]=(0,s.useState)(null),[P,B]=(0,s.useState)(!1),[T,O]=(0,s.useState)(1),[A,L]=(0,s.useState)(8),U=T*A,G=U-A,H=(()=>{switch(E){case"upcoming":default:return h.slice(G,U);case"my":return w.slice(G,U);case"history":return I.slice(G,U);case"info":return[]}})(),$=Math.ceil(("upcoming"===E?h.length:w.length)/A);return(0,s.useEffect)(()=>{if("history"!==E){var e;let o=async()=>{try{var e;C(!0),k(null);let o="my"===E?"/api/tournaments?filter=my&userId=".concat(null==t?void 0:null===(e=t.user)||void 0===e?void 0:e.id):"/api/tournaments",n=await fetch(o);if(!n.ok){let e=await n.json();throw Error(e.message||"Failed to fetch tournaments")}let s=await n.json();if(s.success)"my"===E?z(s.data):F(s.data);else throw Error(s.message||"An unexpected error occurred")}catch(e){console.error("Error fetching tournaments:",e),k(e.message)}finally{C(!1)}};(null==t?void 0:null===(e=t.user)||void 0===e?void 0:e.id)&&o()}},[E,null==t?void 0:null===(e=t.user)||void 0===e?void 0:e.id]),(0,n.jsx)(r.Z,{children:(0,n.jsxs)(l.Z,{fluid:!0,className:"p-4",children:[D&&(0,n.jsx)(v.Z,{fullscreen:!0}),(0,n.jsx)(a.Z,{className:"mb-4",children:(0,n.jsx)(d.Z,{children:(0,n.jsx)(c.Z,{className:"border-0 shadow-sm",children:(0,n.jsxs)(x.Z,{children:[(0,n.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(p.Z,{onClick:()=>W("upcoming"),className:"me-2",style:{backgroundColor:"upcoming"===E?"#FFD600":"#FFFFFF",color:"#101828",border:"1px solid #D0D5DD",borderRadius:"8px",fontSize:"14px",fontWeight:500,padding:"8px 14px",boxShadow:"0px 1px 2px rgba(16, 24, 40, 0.05)"},children:"Upcoming Tournaments"}),(0,n.jsx)(p.Z,{onClick:()=>W("my"),className:"me-2",style:{backgroundColor:"my"===E?"#FFD600":"#FFFFFF",color:"#101828",border:"1px solid #D0D5DD",borderRadius:"8px",fontSize:"14px",fontWeight:500,padding:"8px 14px",boxShadow:"0px 1px 2px rgba(16, 24, 40, 0.05)"},children:"My / Invited Tournaments"})]}),(0,n.jsxs)("div",{className:"d-flex align-items-center gap-3",children:["my"===E&&(0,n.jsx)(p.Z,{onClick:()=>W("history"),className:"me-2",style:{backgroundColor:"history"===E?"#FFD600":"#FFFFFF",color:"#101828",border:"1px solid #D0D5DD",borderRadius:"8px",fontSize:"14px",fontWeight:500,padding:"8px 14px",boxShadow:"0px 1px 2px rgba(16, 24, 40, 0.05)"},children:"Tournament History"}),(0,n.jsx)(p.Z,{onClick:()=>W("info"),style:{backgroundColor:"info"===E?"#FFD600":"#FFFFFF",color:"#101828",border:"1px solid #D0D5DD",borderRadius:"8px",fontSize:"14px",fontWeight:500,padding:"8px 14px",boxShadow:"0px 1px 2px rgba(16, 24, 40, 0.05)"},children:"Info"}),(0,n.jsxs)("div",{className:"position-relative",children:[(0,n.jsx)(f.Z,{size:20,className:"position-absolute",style:{top:"50%",transform:"translateY(-50%)",left:"12px",color:"#667085",zIndex:1}}),(0,n.jsx)(u.Z,{type:"search",className:"form-control me-2 ps-5",placeholder:"Search",style:{width:"360px",height:"40px",backgroundColor:"#F9FAFB",border:"1px solid #EAECF0",borderRadius:"8px",fontSize:"14px",color:"#667085",boxShadow:"none"}})]})]})]}),"history"===E&&(0,n.jsxs)("div",{className:"bg-white rounded",style:{boxShadow:"0px 1px 3px rgba(16, 24, 40, 0.1), 0px 1px 2px rgba(16, 24, 40, 0.06)"},children:[(0,n.jsxs)("div",{className:"d-flex justify-content-between align-items-center p-4 border-bottom",children:[(0,n.jsx)("div",{children:(0,n.jsx)("h4",{className:"mb-0",style:{fontSize:"18px",fontWeight:600,color:"#101828",lineHeight:"28px"},children:"Last Played Tournaments History"})}),(0,n.jsx)(p.Z,{color:"light",className:"d-flex align-items-center",style:{padding:"8px 14px",backgroundColor:"#fff",border:"1px solid #D0D5DD",borderRadius:"8px",color:"#344054",fontSize:"14px",fontWeight:500,boxShadow:"0px 1px 2px rgba(16, 24, 40, 0.05)"},children:"Back"})]}),(0,n.jsx)("div",{className:"table-responsive",children:(0,n.jsx)(S.Z,{})})]}),"info"===E&&(0,n.jsxs)("div",{className:"bg-white p-4 rounded",children:[(0,n.jsx)("h4",{className:"mb-4",style:{fontSize:"24px",fontWeight:600,color:"#101828"},children:"Support"}),(0,n.jsx)("p",{className:"text-muted mb-4",style:{fontSize:"16px",color:"#667085"},children:"If you have questions or issues in relation to online tournaments, please contact us via following support emails and we'll be with you shortly."}),(0,n.jsx)("div",{className:"d-flex flex-column gap-4",children:[{name:"John Smith",role:"Operations Manager"},{name:"Sam Winchester",role:"OLT Support Specialist"},{name:"Daniel Craig",role:"OLT Support Specialist"},{name:"Gilbert Blythe",role:"OLT Support Specialist"}].map((e,t)=>(0,n.jsxs)("div",{className:"d-flex justify-content-between align-items-center p-3",style:{background:"#F9FAFB",borderRadius:"8px"},children:[(0,n.jsxs)("div",{className:"d-flex gap-3",children:[(0,n.jsx)("div",{className:"position-relative",style:{width:"40px",height:"40px"},children:(0,n.jsx)(g(),{src:"/user1.png",alt:e.name,layout:"fill",className:"rounded-circle"})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h6",{className:"mb-1",style:{fontSize:"14px",fontWeight:500,color:"#101828"},children:e.name}),(0,n.jsx)("p",{className:"mb-0",style:{fontSize:"14px",color:"#667085"},children:e.role})]})]}),(0,n.jsx)(p.Z,{color:"light",className:"rounded-circle p-2",style:{backgroundColor:"white",border:"1px solid #E4E7EC"},children:(0,n.jsx)(b.Z,{size:20,color:"#667085"})})]},t))})]}),(0,n.jsx)(a.Z,{children:Z?(0,n.jsx)(d.Z,{xs:12,children:(0,n.jsx)(m.Z,{color:"danger",children:Z})}):"my"===E?w.map(e=>(0,n.jsx)(d.Z,{xs:12,sm:6,md:4,lg:3,className:"mb-4",children:(0,n.jsx)(N,{item:{...{...e.tournament,_id:e._id},memberPayments:e.memberPayments}})},e._id)):0===h.length&&"history"!==E?(0,n.jsx)(d.Z,{xs:12,children:(0,n.jsx)(m.Z,{color:"danger",children:"No tournaments found."})}):H.map(e=>{var t;return(0,n.jsx)(d.Z,{xs:12,sm:6,md:4,lg:3,className:"mb-4",children:(0,n.jsxs)(c.Z,{className:"tournament-card h-100",style:{borderRadius:"16px",overflow:"hidden",border:"1px solid #EAECF0",backgroundColor:"#FFFFFF",boxShadow:"0px 1px 2px rgba(16, 24, 40, 0.05)"},children:[(0,n.jsxs)("div",{style:{position:"relative",height:"180px"},children:[(0,n.jsx)("div",{style:{position:"absolute",bottom:"12px",left:"12px",zIndex:2,background:"rgba(237, 20, 91, 0.9)",padding:"4px 12px",borderRadius:"16px",fontSize:"14px",color:"#FFFFFF",fontWeight:500},children:"Closing in: 10:88:00"}),(0,n.jsx)(g(),{src:(null===(t=e.images)||void 0===t?void 0:t[0])||"/fortnite-banner.png",alt:e.name||"Tournament",layout:"fill",objectFit:"cover",sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw"})]}),(0,n.jsxs)(x.Z,{className:"p-4",children:[(0,n.jsx)("h5",{style:{fontSize:"18px",fontWeight:600,marginBottom:"4px",color:"#101828"},children:e.name}),(0,n.jsxs)("div",{style:{fontSize:"14px",color:"#667085",marginBottom:"24px"},children:[e.date," â€¢ ",e.time," -"," ",e.end,"EST"]}),(0,n.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{style:{fontSize:"14px",color:"#344054",marginBottom:"4px",fontWeight:500},children:"Prize"}),(0,n.jsxs)("div",{style:{fontSize:"20px",fontWeight:600,color:"#F04438"},children:["$",e.totalPrizePool]})]}),(0,n.jsxs)("div",{className:"text-end",children:[(0,n.jsx)("div",{style:{fontSize:"14px",color:"#344054",marginBottom:"4px",fontWeight:500},children:"Entry Cost"}),(0,n.jsxs)("div",{style:{fontSize:"20px",fontWeight:600,color:"#F04438"},children:["$",e.entryFee]})]})]}),(0,n.jsxs)(p.Z,{color:"link",className:"text-decoration-none p-0",style:{fontSize:"16px",fontWeight:600,color:"#101828",display:"flex",alignItems:"center"},onClick:()=>o.push("/user/dashboard/register-tournament/".concat(e._id)),children:["Register Now"," ",(0,n.jsx)(y.Z,{size:20,className:"ms-2"})]})]})]})},e._id)})}),(0,n.jsxs)("div",{className:"d-flex justify-content-between align-items-center p-4 border-top",children:[(0,n.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,n.jsx)(p.Z,{color:"light",disabled:1===T,onClick:()=>O(e=>Math.max(1,e-1)),style:{padding:"8px 14px",border:"1px solid #D0D5DD",borderRadius:"8px",minWidth:"40px"},children:"\xab"}),[...Array(Math.min(6,$))].map((e,t)=>{let o=t+1;return(0,n.jsx)(p.Z,{color:o===T?"warning":"light",onClick:()=>O(o),style:{backgroundColor:o===T?"#FFD600":void 0,padding:"8px 14px",border:o===T?"none":"1px solid #D0D5DD",borderRadius:"8px",minWidth:"40px",fontWeight:500},children:o},o)}),(0,n.jsx)(p.Z,{color:"light",disabled:T===$,onClick:()=>O(e=>Math.min($,e+1)),style:{padding:"8px 14px",border:"1px solid #D0D5DD",borderRadius:"8px",minWidth:"40px"},children:"\xbb"}),(0,n.jsxs)("select",{className:"form-select ms-2",style:{width:"70px"},value:A,onChange:e=>L(Number(e.target.value)),children:[(0,n.jsx)("option",{value:12,children:"12"}),(0,n.jsx)("option",{value:24,children:"24"}),(0,n.jsx)("option",{value:36,children:"36"})]})]}),(0,n.jsxs)("div",{style:{color:"#667085",fontSize:"14px"},children:[G+1," -"," ",Math.min(U,h.length)," of"," ",h.length," items"]})]})]})})})})]})})}},22078:function(e,t,o){"use strict";o.d(t,{Gm:function(){return a},I9:function(){return d},Sk:function(){return r},W2:function(){return i},bJ:function(){return l},iO:function(){return c}});var n=o(30381),s=o.n(n);let i=async()=>{try{let e=await navigator.permissions.query({name:"microphone"});if("denied"===e.state){alert("Please allow microphone access in your browser settings to use this feature.");return}let t=(await navigator.mediaDevices.enumerateDevices()).filter(e=>"audioinput"===e.kind),o=document.createElement("dialog");o.style.padding="20px",o.style.borderRadius="8px",o.style.boxShadow="0 2px 10px rgba(0,0,0,0.1)";let n=document.createElement("button");n.innerHTML="âœ•",n.style.position="absolute",n.style.right="10px",n.style.top="10px",n.style.border="none",n.style.background="none",n.style.fontSize="20px",n.style.cursor="pointer",n.onclick=()=>o.close(),o.appendChild(n);let s=document.createElement("h3");s.textContent="Select Audio Device",o.appendChild(s);let i=document.createElement("select");i.style.width="100%",i.style.padding="8px",i.style.marginBottom="10px",t.forEach(e=>{let t=document.createElement("option");t.value=e.deviceId,t.text=e.label||"Microphone ".concat(e.deviceId.slice(0,5)),i.appendChild(t)});let r=document.createElement("button");r.textContent="Save Selection",r.style.padding="8px 16px",r.onclick=()=>{localStorage.setItem("preferredMicrophoneId",i.value),o.close()},o.appendChild(i),o.appendChild(r),document.body.appendChild(o),o.showModal()}catch(e){console.error("Error accessing media devices:",e),alert("Unable to access microphone. Please check your browser settings.")}},r=e=>{let t=new Blob([e],{type:e.type});return URL.createObjectURL(t)},l=(e,t)=>e.reduce((e,o)=>e+parseInt(o[t]),0),a=e=>{let t="00",o="00",n="00";if(e){let s=Math.floor(e.asSeconds());t=Math.floor(s/3600).toString().padStart(2,"0"),o=Math.floor(s%3600/60).toString().padStart(2,"0"),n=Math.floor(s%60).toString().padStart(2,"0")}return"".concat(t,":").concat(o,":").concat(n)},d=(e,t)=>{let[o,n]=t.split(":"),i=s()(e).add(Number(o),"hours").add(Number(n),"minutes"),r=s()(),l=s().duration(i.diff(r));return 0>l.asSeconds()&&(l=s().duration(0)),console.log("Current time:",i.format()),l},c=e=>1===e?"1st":2===e?"2nd":3===e?"3rd":"".concat(e,"th")}},function(e){e.O(0,[4885,9594,1664,5714,8662,693,761,5462,2888,9774,179],function(){return e(e.s=74123)}),_N_E=e.O()}]);