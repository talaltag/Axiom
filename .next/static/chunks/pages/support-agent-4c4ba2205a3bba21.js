(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2589],{23437:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/support-agent",function(){return n(18635)}])},70525:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}});var r=n(85893),o=n(67294),i=n(58589),a=n(98842),s=n(25062),l=n(4683),c=n(38824),d=n(77424),p=n(41664),u=n.n(p),x=n(25675),h=n.n(x);function f(e){let{role:t}=e,[n,p]=(0,o.useState)([]),[x,f]=(0,o.useState)(0);(0,o.useEffect)(()=>{m()},[]);let m=async()=>{try{let e=localStorage.getItem("token"),t=await fetch("/api/notifications",{headers:{Authorization:"Bearer ".concat(e)}}),n=await t.json();n.success&&(p(n.data),f(n.data.filter(e=>!e.isRead).length))}catch(e){console.error("Error fetching notifications:",e)}};return(0,r.jsxs)(i.Z,{children:[(0,r.jsxs)(a.Z,{nav:!0,className:"position-relative",children:[(0,r.jsx)(d.Z,{size:20}),x>0&&(0,r.jsx)(s.Z,{color:"danger",pill:!0,className:"position-absolute",style:{top:"-5px",right:"-5px"},children:x})]}),(0,r.jsxs)(l.Z,{end:!0,className:"notification-dropdown p-0",style:{width:"320px",maxHeight:"400px"},children:[(0,r.jsxs)("div",{className:"p-2 border-bottom d-flex justify-content-between align-items-center",children:[(0,r.jsx)("h6",{className:"mb-0",children:"Notifications"}),(0,r.jsx)(u(),{href:t?"/".concat(t,"/notifications"):"/user/notifications",className:"text-muted small",children:"View All"})]}),(0,r.jsx)("div",{style:{maxHeight:"300px",overflowY:"auto"},children:0===n.length?(0,r.jsx)(c.Z,{text:!0,children:"No notifications"}):n.slice(0,5).map(e=>(0,r.jsx)(c.Z,{className:"border-bottom",children:(0,r.jsxs)("div",{className:"d-flex align-items-center",children:[(0,r.jsx)(h(),{src:"/user1.png",alt:"User",width:40,height:40,className:"rounded-circle me-2"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"fw-bold",children:e.title}),(0,r.jsx)("small",{className:"text-muted",children:new Date(e.createdAt).toLocaleString()})]})]})},e._id))})]})]})}},36931:function(e,t,n){"use strict";n.d(t,{Z:function(){return k}});var r=n(85893),o=n(67294),i=n(79862),a=n(84082),s=n(35510),l=n(16987),c=n(58589),d=n(98842),p=n(4683),u=n(38824),x=n(11163),h=n(45007),f=n(44109),m=n(25675),g=n.n(m),v=n(81912),b=n(77662),y=n(48903),j=n(4868),w=n(70525),Z=n(33299),C=n(41664),S=n.n(C);function k(e){var t,n;let{children:m}=e,C=(0,x.useRouter)(),k=(0,h.I0)(),[N,E]=(0,o.useState)(!0),I=(0,Z.useSession)(),O=[{text:"Chat",path:"/support-agent",icon:(0,r.jsx)(v.Z,{size:18})},{text:"Settings",path:"/support-agent/settings",icon:(0,r.jsx)(b.Z,{size:18})}];return(0,r.jsxs)("div",{className:"d-flex",children:[(0,r.jsxs)(i.Z,{vertical:!0,className:"bg-white border-end sidebar ".concat(N?"open":""),style:{width:N?"240px":"64px",height:"100vh",position:"fixed",left:0,top:0,zIndex:1030,transition:"all 0.3s ease-in-out"},children:[(0,r.jsx)("div",{className:"p-3 d-flex align-items-center mb-2",children:(0,r.jsxs)("div",{className:"d-flex w-100 align-items-center justify-content-between",children:[N&&(0,r.jsx)(g(),{src:"/axiom-logo.png",alt:"Axiom",width:70,height:45}),(0,r.jsx)(a.Z,{className:"p-0",color:"initial",onClick:()=>E(!N),children:(0,r.jsx)(y.Z,{size:24,style:{transform:N?"rotate(0deg)":"rotate(180deg)",transition:"transform 0.3s ease-in-out"}})})]})}),O.map(e=>(0,r.jsx)(s.Z,{children:(0,r.jsxs)(S(),{href:e.path,className:"d-flex align-items-center mb-2 px-3 py-2 ".concat(C.pathname===e.path?"bg-warning text-dark":"text-muted"),style:{textDecoration:"none"},children:[e.icon,N&&(0,r.jsx)("span",{className:"ms-2",children:e.text})]})},e.text))]}),(0,r.jsxs)("div",{style:{marginLeft:N?"240px":"64px",transition:"margin-left 0.3s ease-in-out",width:"100%"},children:[(0,r.jsx)(l.Z,{className:"bg-white border-bottom px-4",container:!1,children:(0,r.jsx)(i.Z,{className:"ms-auto d-flex align-items-center",navbar:!0,children:(0,r.jsxs)("div",{className:"d-flex align-items-center me-3",children:[(0,r.jsx)(w.Z,{role:"support-agent"})," ",(0,r.jsxs)(c.Z,{dropup:!0,inNavbar:!0,nav:!0,className:"ms-3",children:[(0,r.jsx)(d.Z,{nav:!0,children:(0,r.jsx)(g(),{src:(null==I?void 0:null===(n=I.data)||void 0===n?void 0:null===(t=n.user)||void 0===t?void 0:t.profileImage)||"/profile-avatar.png",alt:"User",width:32,height:32,className:"rounded-circle"})}),(0,r.jsx)(p.Z,{end:!0,className:"position-absolute",children:(0,r.jsxs)(u.Z,{onClick:()=>{k((0,f.kS)()),(0,Z.signOut)({redirect:!1}).then(()=>C.push("/auth/login"))},children:[(0,r.jsx)(j.Z,{size:14,className:"me-2"}),"Logout"]})})]})]})})}),(0,r.jsx)("main",{className:"p-4",children:m})]})]})}},18635:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Q}});var r=n(85893),o=n(67294),i=n(4853),a=n(9729),s=n(85770),l=n(21485),c=n(84677),d=n(55895),p=n(47407),u=n(87590),x=n(52857),h=n(26541),f=n(49555),m=n(11370),g=n(83218),v=n(97254),b=n(36931),y=n(33299),j=n(67642),w=n(90512),Z=n(94780),C=n(35927),S=n(66643),k=n(2807),N=n(50375),E=n(1588),I=n(34867);function O(e){return(0,I.ZP)("MuiTab",e)}let P=(0,E.Z)("MuiTab",["root","labelIcon","textColorInherit","textColorPrimary","textColorSecondary","selected","disabled","fullWidth","wrapped","iconWrapper","icon"]),T=e=>{let{classes:t,textColor:n,fullWidth:r,wrapped:o,icon:i,label:a,selected:s,disabled:l}=e,c={root:["root",i&&a&&"labelIcon","textColor".concat((0,S.Z)(n)),r&&"fullWidth",o&&"wrapped",s&&"selected",l&&"disabled"],icon:["iconWrapper","icon"]};return(0,Z.Z)(c,O,t)},W=(0,i.ZP)(C.Z,{name:"MuiTab",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:n}=e;return[t.root,n.label&&n.icon&&t.labelIcon,t["textColor".concat((0,S.Z)(n.textColor))],n.fullWidth&&t.fullWidth,n.wrapped&&t.wrapped,{["& .".concat(P.iconWrapper)]:t.iconWrapper},{["& .".concat(P.icon)]:t.icon}]}})((0,k.Z)(e=>{let{theme:t}=e;return{...t.typography.button,maxWidth:360,minWidth:90,position:"relative",minHeight:48,flexShrink:0,padding:"12px 16px",overflow:"hidden",whiteSpace:"normal",textAlign:"center",lineHeight:1.25,variants:[{props:e=>{let{ownerState:t}=e;return t.label&&("top"===t.iconPosition||"bottom"===t.iconPosition)},style:{flexDirection:"column"}},{props:e=>{let{ownerState:t}=e;return t.label&&"top"!==t.iconPosition&&"bottom"!==t.iconPosition},style:{flexDirection:"row"}},{props:e=>{let{ownerState:t}=e;return t.icon&&t.label},style:{minHeight:72,paddingTop:9,paddingBottom:9}},{props:e=>{let{ownerState:t,iconPosition:n}=e;return t.icon&&t.label&&"top"===n},style:{["& > .".concat(P.icon)]:{marginBottom:6}}},{props:e=>{let{ownerState:t,iconPosition:n}=e;return t.icon&&t.label&&"bottom"===n},style:{["& > .".concat(P.icon)]:{marginTop:6}}},{props:e=>{let{ownerState:t,iconPosition:n}=e;return t.icon&&t.label&&"start"===n},style:{["& > .".concat(P.icon)]:{marginRight:t.spacing(1)}}},{props:e=>{let{ownerState:t,iconPosition:n}=e;return t.icon&&t.label&&"end"===n},style:{["& > .".concat(P.icon)]:{marginLeft:t.spacing(1)}}},{props:{textColor:"inherit"},style:{color:"inherit",opacity:.6,["&.".concat(P.selected)]:{opacity:1},["&.".concat(P.disabled)]:{opacity:(t.vars||t).palette.action.disabledOpacity}}},{props:{textColor:"primary"},style:{color:(t.vars||t).palette.text.secondary,["&.".concat(P.selected)]:{color:(t.vars||t).palette.primary.main},["&.".concat(P.disabled)]:{color:(t.vars||t).palette.text.disabled}}},{props:{textColor:"secondary"},style:{color:(t.vars||t).palette.text.secondary,["&.".concat(P.selected)]:{color:(t.vars||t).palette.secondary.main},["&.".concat(P.disabled)]:{color:(t.vars||t).palette.text.disabled}}},{props:e=>{let{ownerState:t}=e;return t.fullWidth},style:{flexShrink:1,flexGrow:1,flexBasis:0,maxWidth:"none"}},{props:e=>{let{ownerState:t}=e;return t.wrapped},style:{fontSize:t.typography.pxToRem(12)}}]}})),R=o.forwardRef(function(e,t){let n=(0,N.i)({props:e,name:"MuiTab"}),{className:i,disabled:a=!1,disableFocusRipple:s=!1,fullWidth:l,icon:c,iconPosition:d="top",indicator:p,label:u,onChange:x,onClick:h,onFocus:f,selected:m,selectionFollowsFocus:g,textColor:v="inherit",value:b,wrapped:y=!1,...j}=n,Z={...n,disabled:a,disableFocusRipple:s,selected:m,icon:!!c,iconPosition:d,label:!!u,fullWidth:l,textColor:v,wrapped:y},C=T(Z),S=c&&u&&o.isValidElement(c)?o.cloneElement(c,{className:(0,w.Z)(C.icon,c.props.className)}):c;return(0,r.jsxs)(W,{focusRipple:!s,className:(0,w.Z)(C.root,i),ref:t,role:"tab","aria-selected":m,disabled:a,onClick:e=>{!m&&x&&x(e,b),h&&h(e)},onFocus:e=>{g&&!m&&x&&x(e,b),f&&f(e)},ownerState:Z,tabIndex:m?0:-1,...j,children:["top"===d||"start"===d?(0,r.jsxs)(o.Fragment,{children:[S,u]}):(0,r.jsxs)(o.Fragment,{children:[u,S]}),p]})});var z=n(87168),F=n(25675),M=n.n(F),_=n(22078),D=n(75854);(0,i.ZP)(R)({textTransform:"none",minWidth:80,fontWeight:500,color:"#666","&.Mui-selected":{color:"#000"}});let U=(0,i.ZP)(a.Z)({display:"flex",height:"calc(100vh - 120px)",backgroundColor:"transparent",gap:"16px"}),A=(0,i.ZP)(a.Z)({width:"280px",display:"flex",flexDirection:"column",backgroundColor:"#fff",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)",overflow:"hidden"}),L=(0,i.ZP)(a.Z)({flex:1,display:"flex",flexDirection:"column",backgroundColor:"#fff",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)",overflow:"hidden"}),B=(0,i.ZP)(a.Z)({padding:"16px",borderTop:"1px solid #eee",display:"flex",alignItems:"center",gap:"12px",backgroundColor:"#fff"}),H=(0,i.ZP)(a.Z)(e=>{let{isUser:t}=e;return{display:"flex",alignItems:"flex-start",padding:"8px 16px",gap:"12px",justifyContent:t?"flex-end":"flex-start"}}),V=(0,i.ZP)(a.Z)(e=>{let{isUser:t}=e;return{backgroundColor:t?"#e5ebff":"#f5f5f5",padding:"12px 16px",borderRadius:"12px",maxWidth:"70%",wordBreak:"break-word"}}),q=(0,i.ZP)(s.ZP)({padding:"8px 16px",cursor:"pointer","&:hover":{backgroundColor:"#f8f9fa"},"&.selected":{backgroundColor:"#f0f0f0"}}),G=(0,i.ZP)(a.Z)({display:"flex",flexDirection:"column",flex:1}),X=(0,i.ZP)(l.Z)({fontWeight:500,fontSize:"14px"}),Y=(0,i.ZP)(l.Z)({color:"#6c757d",fontSize:"12px"}),J=(0,i.ZP)(l.Z)({color:"#6c757d",fontSize:"11px",marginLeft:"auto"}),K=(0,i.ZP)("span")({width:"8px",height:"8px",borderRadius:"50%",backgroundColor:"#4CAF50",display:"inline-block",marginLeft:"8px"});function Q(){var e,t,n,i,s,w,Z,C;let[S,k]=(0,o.useState)(0),[N,E]=(0,o.useState)(null),[I,O]=(0,o.useState)(""),[P,T]=(0,o.useState)([]),[W,R]=(0,o.useState)([]),[F,Q]=(0,o.useState)(!0),[$,ee]=(0,o.useState)(!1),et=(0,y.useSession)(),[en,er]=(0,o.useState)(null),eo=(0,o.useRef)(null),[ei,ea]=(0,o.useState)([]),[es,el]=(0,o.useState)(0),ec=(0,o.useRef)(null),[ed,ep]=(0,o.useState)(null);(0,o.useEffect)(()=>{let e=(0,j.io)("http://localhost:3000");return er(e),()=>{e&&e.disconnect()}},[]),(0,o.useEffect)(()=>{if(en&&N){var e,t;let n=[null===(t=et.data)||void 0===t?void 0:null===(e=t.user)||void 0===e?void 0:e.id,N._id].sort().join("-");return en.emit("join",n),en.on("message",e=>{T(t=>[...t,e])}),()=>{en.emit("leave",n),en.off("message")}}},[en,N,null===(t=et.data)||void 0===t?void 0:null===(e=t.user)||void 0===e?void 0:e.id]);let eu=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"User";Q(!0);try{let t=await fetch("/api/agent/users?role=".concat(e));if(t.ok){let e=await t.json();R(e.data)}}catch(e){console.error("Error fetching users:",e)}finally{Q(!1)}};(0,o.useEffect)(()=>{et.data&&eu(0===S?"User":"Admin")},[S,et.data]),(0,o.useEffect)(()=>{(async()=>{var e,t;if(N&&(null===(t=et.data)||void 0===t?void 0:null===(e=t.user)||void 0===e?void 0:e.id))try{let e=await fetch("/api/chat?sender=".concat(et.data.user.id,"&receiver=").concat(N._id));if(e.ok){let t=await e.json();T(t.data)}}catch(e){console.error("Error fetching messages:",e)}})()},[N,null===(i=et.data)||void 0===i?void 0:null===(n=i.user)||void 0===n?void 0:n.id]);let ex=async()=>{var e,t;if(N&&(null===(t=et.data)||void 0===t?void 0:null===(e=t.user)||void 0===e?void 0:e.id))try{let e=new FormData;e.append("sender",et.data.user.id),e.append("receiver",N._id),e.append("roomId",[et.data.user.id,N._id].sort().join("-")),I.trim()&&e.append("content",I),ei&&ei.forEach(t=>{e.append("files",t)});let t=await fetch("/api/chat",{method:"POST",body:e});if(t.ok){let e=await t.json();en&&en.emit("message",e.data),ea([]),O("")}}catch(e){console.error("Error sending message:",e)}};(0,o.useEffect)(()=>{E(null)},[S]);let eh=async()=>{let e=null;try{if(navigator.mediaDevices){let t=await navigator.permissions.query({name:"microphone"});if("denied"===t.state){alert("Please allow microphone access in your browser settings to use this feature.");return}await navigator.mediaDevices.enumerateDevices();let n=localStorage.getItem("preferredMicrophoneId");e=await navigator.mediaDevices.getUserMedia({audio:{deviceId:n?{exact:n}:void 0,echoCancellation:!0,noiseSuppression:!0,sampleRate:44100}});let r=new MediaRecorder(e,{mimeType:"audio/webm"}),o=[];r.ondataavailable=e=>{o.push(e.data)},r.onstop=()=>{let e=new Blob(o,{type:"audio/webm"}),t=new File([e],"voice-message.webm",{type:"audio/webm"});ea([t])},r.start(),ep(r),ee(!0),el(0),ec.current=setInterval(()=>{el(e=>e+1)},1e3)}}catch(t){console.error("Error starting recording:",t),e&&e.getTracks().forEach(e=>e.stop()),ee(!1),ec.current&&clearInterval(ec.current),alert("Unable to access microphone. Please check your browser settings.")}},ef=()=>{ed&&(ed.stop(),ee(!1),ec.current&&clearInterval(ec.current))};return(0,r.jsx)(b.Z,{children:(0,r.jsxs)(a.Z,{sx:{p:2,pt:1},children:[(0,r.jsxs)(a.Z,{sx:{display:"flex",justifyContent:"space-between",mb:2,alignItems:"center"},children:[(0,r.jsx)(a.Z,{sx:{mb:2,display:"flex",justifyContent:"space-between",alignItems:"center"},children:(0,r.jsx)(l.Z,{variant:"h6",children:"Chat"})}),(0,r.jsxs)(a.Z,{sx:{display:"flex",gap:1},children:[(0,r.jsx)(c.Z,{onClick:()=>{k(0)},sx:{textTransform:"none",minWidth:"80px",backgroundColor:0===S?"#FFD700":"transparent",color:0===S?"#000":"#666","&:hover":{backgroundColor:0===S?"#FFC700":"rgba(0,0,0,0.05)"}},children:"Users"}),(0,r.jsx)(c.Z,{onClick:()=>{k(1)},sx:{textTransform:"none",minWidth:"80px",backgroundColor:1===S?"#FFD700":"transparent",color:1===S?"#000":"#666","&:hover":{backgroundColor:1===S?"#FFC700":"rgba(0,0,0,0.05)"}},children:"Admin"})]})]}),(0,r.jsxs)(U,{children:[(0,r.jsxs)(A,{children:[(0,r.jsxs)(a.Z,{sx:{p:2,borderBottom:"1px solid #eee"},children:[(0,r.jsxs)(a.Z,{sx:{display:"flex",alignItems:"center",mb:3,gap:1.5},children:[(0,r.jsx)(d.Z,{src:(null==et?void 0:null===(w=et.data)||void 0===w?void 0:null===(s=w.user)||void 0===s?void 0:s.profileImage)||"/profile-avatar.png",sx:{width:40,height:40}}),(0,r.jsxs)(a.Z,{children:[(0,r.jsx)(l.Z,{variant:"subtitle1",sx:{fontWeight:500},children:null==et?void 0:null===(C=et.data)||void 0===C?void 0:null===(Z=C.user)||void 0===Z?void 0:Z.name}),(0,r.jsxs)(a.Z,{sx:{display:"flex",alignItems:"center",gap:.5},children:[(0,r.jsx)(a.Z,{sx:{width:6,height:6,borderRadius:"50%",backgroundColor:"#4CAF50"}}),(0,r.jsx)(l.Z,{variant:"caption",sx:{color:"#666"},children:"Online"})]})]})]}),(0,r.jsx)(l.Z,{variant:"subtitle2",sx:{color:"#666",fontSize:"13px",mb:1,ml:.5},children:"Chat"}),(0,r.jsxs)(a.Z,{sx:{display:"flex",mb:2,bgcolor:"#f5f5f5",borderRadius:"4px",padding:"2px"},children:[(0,r.jsx)(c.Z,{sx:{flex:1,height:"30px",minWidth:"80px",textTransform:"none",color:"#000",bgcolor:0===S?"#fff":"transparent",borderRadius:"4px",boxShadow:0===S?"0 1px 3px rgba(0,0,0,0.1)":"none","&:hover":{bgcolor:0===S?"#fff":"rgba(0,0,0,0.05)"}},children:"All"}),(0,r.jsx)(c.Z,{sx:{flex:1,height:"30px",minWidth:"80px",textTransform:"none",color:"#000",bgcolor:1===S?"#fff":"transparent",borderRadius:"4px",boxShadow:1===S?"0 1px 3px rgba(0,0,0,0.1)":"none","&:hover":{bgcolor:1===S?"#fff":"rgba(0,0,0,0.05)"}},children:"Unread"})]})]}),(0,r.jsx)(p.Z,{sx:{flex:1,overflow:"auto",p:0},children:F?(0,r.jsx)("div",{className:"text-center my-3",children:(0,r.jsx)(z.Z,{color:"warning"})}):W.map(e=>(0,r.jsxs)(q,{className:(null==N?void 0:N._id)===e._id?"selected":"",onClick:()=>E(e),children:[(0,r.jsx)(u.Z,{children:(0,r.jsx)(d.Z,{src:"profile-avatar.png",sx:{width:40,height:40}})}),(0,r.jsxs)(G,{children:[(0,r.jsxs)(a.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:.5},children:[(0,r.jsx)(X,{children:e.name}),(0,r.jsx)(J,{children:"9:15 AM"})]}),(0,r.jsxs)(a.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,r.jsx)(Y,{children:"Typing Something..."}),(0,r.jsx)(K,{sx:{width:6,height:6,ml:1}})]})]})]},e._id))})]}),(0,r.jsx)(L,{children:N?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a.Z,{sx:{p:2,borderBottom:"1px solid #eee"},children:(0,r.jsxs)(a.Z,{sx:{display:"flex",alignItems:"center",gap:2},children:[(0,r.jsx)(d.Z,{src:"profile-avatar.png",sx:{width:48,height:48}}),(0,r.jsxs)(a.Z,{children:[(0,r.jsx)(l.Z,{variant:"subtitle1",fontWeight:500,children:N.name}),(0,r.jsx)(l.Z,{variant:"body2",color:"text.secondary",children:"Online"})]})]})}),(0,r.jsx)(a.Z,{sx:{flex:1,overflowY:"auto",p:2},children:P.map(e=>{var t,n,o,i,a,s,l,c,p,u,x,h;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(H,{isUser:e.sender===(null===(n=et.data)||void 0===n?void 0:null===(t=n.user)||void 0===t?void 0:t.id),children:[(0,r.jsx)(d.Z,{src:e.sender===(null===(i=et.data)||void 0===i?void 0:null===(o=i.user)||void 0===o?void 0:o.id)?null===(s=et.data)||void 0===s?void 0:null===(a=s.user)||void 0===a?void 0:a.profileImage:"/profile-avatar.png",sx:{order:e.sender===(null===(c=et.data)||void 0===c?void 0:null===(l=c.user)||void 0===l?void 0:l.id)?1:0}}),e.content&&(0,r.jsx)(V,{isUser:e.sender===(null===(u=et.data)||void 0===u?void 0:null===(p=u.user)||void 0===p?void 0:p.id),children:e.content})]},e._id),(null==e?void 0:e.media)&&e.media.length>0?(0,r.jsx)("div",{className:"d-flex flex-wrap mt-1 ps-5 ".concat(e.sender===(null===(h=et.data)||void 0===h?void 0:null===(x=h.user)||void 0===x?void 0:x.id)&&"justify-content-end"),children:e.media.map(e=>e.fileType.includes("audio")?(0,r.jsx)("audio",{src:e.fileUrl,controls:!0}):e.fileType.includes("image")?(0,r.jsx)(M(),{alt:e.fileName,src:e.fileUrl,width:200,height:100,className:"me-2 mb-2"}):e.fileType.includes("video")?(0,r.jsx)("video",{src:e.fileUrl,controls:!0,style:{width:"300px",height:"200px"}}):null)}):null]})})}),(0,r.jsxs)(B,{children:[(0,r.jsx)("input",{type:"file",ref:eo,onChange:e=>{e.target.files&&e.target.files.length>0&&ea(Array.from(e.target.files))},multiple:!0,style:{display:"none"}}),(0,r.jsx)(x.Z,{size:"small",onClick:_.W2,children:(0,r.jsx)(D.Z,{})}),(0,r.jsx)(h.Z,{fullWidth:!0,placeholder:"Type a message...",value:I,onChange:e=>O(e.target.value),variant:"outlined",size:"small",className:"ps-1",InputProps:{startAdornment:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(x.Z,{disabled:$,size:"small",className:"pe-1 ps-0",onClick:()=>{var e;return null===(e=eo.current)||void 0===e?void 0:e.click()},children:(0,r.jsx)(v.Z,{})}),(0,r.jsx)(x.Z,{className:"ps-0",size:"small",color:$?"error":"default",onClick:()=>$?ef():eh(),children:$?(0,r.jsx)(g.Z,{}):(0,r.jsx)(m.Z,{})})]})},onKeyPress:e=>{"Enter"===e.key&&ex()}}),(0,r.jsx)(c.Z,{variant:"contained",onClick:ex,disabled:!I&&0===ei.length,sx:{minWidth:"auto",backgroundColor:"#FFD700",color:"#000",borderRadius:"50%",padding:"10px","&:hover":{backgroundColor:"#FFC700"}},children:(0,r.jsx)(f.Z,{})})]}),ei&&ei.length>0&&(0,r.jsxs)(l.Z,{className:"pb-3 ps-5 ms-3",variant:"caption",sx:{mt:0},children:["Selected file: ",ei.map(e=>e.name+" ")]})]}):(0,r.jsx)(a.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:"text.secondary"},children:"Select a user to start chatting"})})]})]})})}},22078:function(e,t,n){"use strict";n.d(t,{Gm:function(){return l},I9:function(){return c},Sk:function(){return a},W2:function(){return i},bJ:function(){return s},iO:function(){return d}});var r=n(30381),o=n.n(r);let i=async()=>{try{let e=await navigator.permissions.query({name:"microphone"});if("denied"===e.state){alert("Please allow microphone access in your browser settings to use this feature.");return}let t=(await navigator.mediaDevices.enumerateDevices()).filter(e=>"audioinput"===e.kind),n=document.createElement("dialog");n.style.padding="20px",n.style.borderRadius="8px",n.style.boxShadow="0 2px 10px rgba(0,0,0,0.1)";let r=document.createElement("button");r.innerHTML="âœ•",r.style.position="absolute",r.style.right="10px",r.style.top="10px",r.style.border="none",r.style.background="none",r.style.fontSize="20px",r.style.cursor="pointer",r.onclick=()=>n.close(),n.appendChild(r);let o=document.createElement("h3");o.textContent="Select Audio Device",n.appendChild(o);let i=document.createElement("select");i.style.width="100%",i.style.padding="8px",i.style.marginBottom="10px",t.forEach(e=>{let t=document.createElement("option");t.value=e.deviceId,t.text=e.label||"Microphone ".concat(e.deviceId.slice(0,5)),i.appendChild(t)});let a=document.createElement("button");a.textContent="Save Selection",a.style.padding="8px 16px",a.onclick=()=>{localStorage.setItem("preferredMicrophoneId",i.value),n.close()},n.appendChild(i),n.appendChild(a),document.body.appendChild(n),n.showModal()}catch(e){console.error("Error accessing media devices:",e),alert("Unable to access microphone. Please check your browser settings.")}},a=e=>{let t=new Blob([e],{type:e.type});return URL.createObjectURL(t)},s=(e,t)=>e.reduce((e,n)=>e+parseInt(n[t]),0),l=e=>{let t="00",n="00",r="00";if(e){let o=Math.floor(e.asSeconds());t=Math.floor(o/3600).toString().padStart(2,"0"),n=Math.floor(o%3600/60).toString().padStart(2,"0"),r=Math.floor(o%60).toString().padStart(2,"0")}return"".concat(t,":").concat(n,":").concat(r)},c=(e,t)=>{let[n,r]=t.split(":"),i=o()(e).add(Number(n),"hours").add(Number(r),"minutes"),a=o()(),s=o().duration(i.diff(a));return 0>s.asSeconds()&&(s=o().duration(0)),console.log("Current time:",i.format()),s},d=e=>1===e?"1st":2===e?"2nd":3===e?"3rd":"".concat(e,"th")},4868:function(e,t,n){"use strict";var r=n(67294),o=n(45697),i=n.n(o);function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var s=(0,r.forwardRef)(function(e,t){var n=e.color,o=e.size,i=void 0===o?24:o,s=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,["color","size"]);return r.createElement("svg",a({ref:t,xmlns:"http://www.w3.org/2000/svg",width:i,height:i,viewBox:"0 0 24 24",fill:"none",stroke:void 0===n?"currentColor":n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},s),r.createElement("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),r.createElement("polyline",{points:"16 17 21 12 16 7"}),r.createElement("line",{x1:"21",y1:"12",x2:"9",y2:"12"}))});s.propTypes={color:i().string,size:i().oneOfType([i().string,i().number])},s.displayName="LogOut",t.Z=s},87168:function(e,t,n){"use strict";var r=n(67294),o=n(45697),i=n.n(o),a=n(93967),s=n.n(a),l=n(22040),c=["className","cssModule","type","size","color","children","tag"];function d(){return(d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var p={tag:l.iC,type:i().oneOf(["border","grow"]),size:i().oneOf(["sm"]),color:i().oneOf(["primary","secondary","success","danger","warning","info","light","dark"]),className:i().string,cssModule:i().object,children:i().string};function u(e){var t=e.className,n=e.cssModule,o=e.type,i=void 0===o?"border":o,a=e.size,p=e.color,u=e.children,x=void 0===u?"Loading...":u,h=e.tag,f=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,c),m=(0,l.mx)(s()(t,!!a&&"spinner-".concat(i,"-").concat(a),"spinner-".concat(i),!!p&&"text-".concat(p)),n);return r.createElement(void 0===h?"div":h,d({role:"status"},f,{className:m}),x&&r.createElement("span",{className:(0,l.mx)("visually-hidden",n)},x))}u.propTypes=p,t.Z=u}},function(e){e.O(0,[4885,9594,1664,5714,8662,7770,6050,2191,2888,9774,179],function(){return e(e.s=23437)}),_N_E=e.O()}]);