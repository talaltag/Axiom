"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/chat";
exports.ids = ["pages/api/chat"];
exports.modules = {

/***/ "aws-sdk":
/*!**************************!*\
  !*** external "aws-sdk" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("aws-sdk");

/***/ }),

/***/ "moment":
/*!*************************!*\
  !*** external "moment" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("moment");

/***/ }),

/***/ "mongoose":
/*!***************************!*\
  !*** external "mongoose" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("mongoose");

/***/ }),

/***/ "next-auth/jwt":
/*!********************************!*\
  !*** external "next-auth/jwt" ***!
  \********************************/
/***/ ((module) => {

module.exports = require("next-auth/jwt");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "formidable":
/*!*****************************!*\
  !*** external "formidable" ***!
  \*****************************/
/***/ ((module) => {

module.exports = import("formidable");;

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fchat&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cchat%5Cindex.ts&middlewareConfigBase64=e30%3D!":
/*!**********************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fchat&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cchat%5Cindex.ts&middlewareConfigBase64=e30%3D! ***!
  \**********************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_chat_index_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages\\api\\chat\\index.ts */ \"(api)/./pages/api/chat/index.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_pages_api_chat_index_ts__WEBPACK_IMPORTED_MODULE_3__]);\n_pages_api_chat_index_ts__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_chat_index_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_chat_index_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/chat\",\n        pathname: \"/api/chat\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_chat_index_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmNoYXQmcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZwYWdlcyU1Q2FwaSU1Q2NoYXQlNUNpbmRleC50cyZtaWRkbGV3YXJlQ29uZmlnQmFzZTY0PWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDTDtBQUMxRDtBQUN5RDtBQUN6RDtBQUNBLGlFQUFlLHdFQUFLLENBQUMscURBQVEsWUFBWSxFQUFDO0FBQzFDO0FBQ08sZUFBZSx3RUFBSyxDQUFDLHFEQUFRO0FBQ3BDO0FBQ08sd0JBQXdCLGdIQUFtQjtBQUNsRDtBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxZQUFZO0FBQ1osQ0FBQzs7QUFFRCxxQyIsInNvdXJjZXMiOlsid2VicGFjazovL215LWFwcC8/MWRlMCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYWdlc0FQSVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvcGFnZXMtYXBpL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IGhvaXN0IH0gZnJvbSBcIm5leHQvZGlzdC9idWlsZC90ZW1wbGF0ZXMvaGVscGVyc1wiO1xuLy8gSW1wb3J0IHRoZSB1c2VybGFuZCBjb2RlLlxuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi4vcGFnZXNcXFxcYXBpXFxcXGNoYXRcXFxcaW5kZXgudHNcIjtcbi8vIFJlLWV4cG9ydCB0aGUgaGFuZGxlciAoc2hvdWxkIGJlIHRoZSBkZWZhdWx0IGV4cG9ydCkuXG5leHBvcnQgZGVmYXVsdCBob2lzdCh1c2VybGFuZCwgXCJkZWZhdWx0XCIpO1xuLy8gUmUtZXhwb3J0IGNvbmZpZy5cbmV4cG9ydCBjb25zdCBjb25maWcgPSBob2lzdCh1c2VybGFuZCwgXCJjb25maWdcIik7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9jaGF0XCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvY2hhdFwiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcIlwiXG4gICAgfSxcbiAgICB1c2VybGFuZFxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2VzLWFwaS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fchat&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cchat%5Cindex.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./lib/dbConnect.ts":
/*!**************************!*\
  !*** ./lib/dbConnect.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nconst MONGODB_URI = \"mongodb+srv://nolantapps:oCOt2NNcEQKUZcuj@impacto-cluster.s20zbjj.mongodb.net/axiom?retryWrites=true&w=majority\";\nif (!MONGODB_URI) {\n    throw new Error(\"Please define the MONGODB_URI environment variable inside .env.local\");\n}\nlet cached = global.mongoose;\nif (!cached) {\n    cached = global.mongoose = {\n        conn: null,\n        promise: null\n    };\n}\nasync function dbConnect() {\n    if (cached.conn) {\n        return cached.conn;\n    }\n    if (!cached.promise) {\n        const opts = {\n            bufferCommands: true,\n            serverSelectionTimeoutMS: 30000\n        };\n        cached.promise = mongoose__WEBPACK_IMPORTED_MODULE_0___default().connect(MONGODB_URI, opts);\n    }\n    try {\n        cached.conn = await cached.promise;\n        console.log(\"MongoDB Connected Successfully\");\n        return cached.conn;\n    } catch (error) {\n        cached.promise = null;\n        console.error(\"MongoDB Connection Error:\", error);\n        throw error;\n    }\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (dbConnect);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvZGJDb25uZWN0LnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFnQztBQUVoQyxNQUFNQyxjQUNKO0FBRUYsSUFBSSxDQUFDQSxhQUFhO0lBQ2hCLE1BQU0sSUFBSUMsTUFDUjtBQUVKO0FBRUEsSUFBSUMsU0FBU0MsT0FBT0osUUFBUTtBQUU1QixJQUFJLENBQUNHLFFBQVE7SUFDWEEsU0FBU0MsT0FBT0osUUFBUSxHQUFHO1FBQUVLLE1BQU07UUFBTUMsU0FBUztJQUFLO0FBQ3pEO0FBRUEsZUFBZUM7SUFDYixJQUFJSixPQUFPRSxJQUFJLEVBQUU7UUFDZixPQUFPRixPQUFPRSxJQUFJO0lBQ3BCO0lBRUEsSUFBSSxDQUFDRixPQUFPRyxPQUFPLEVBQUU7UUFDbkIsTUFBTUUsT0FBTztZQUNYQyxnQkFBZ0I7WUFDaEJDLDBCQUEwQjtRQUM1QjtRQUVBUCxPQUFPRyxPQUFPLEdBQUdOLHVEQUFnQixDQUFDQyxhQUFhTztJQUNqRDtJQUVBLElBQUk7UUFDRkwsT0FBT0UsSUFBSSxHQUFHLE1BQU1GLE9BQU9HLE9BQU87UUFDbENNLFFBQVFDLEdBQUcsQ0FBQztRQUNaLE9BQU9WLE9BQU9FLElBQUk7SUFDcEIsRUFBRSxPQUFPUyxPQUFPO1FBQ2RYLE9BQU9HLE9BQU8sR0FBRztRQUNqQk0sUUFBUUUsS0FBSyxDQUFDLDZCQUE2QkE7UUFDM0MsTUFBTUE7SUFDUjtBQUNGO0FBRUEsaUVBQWVQLFNBQVNBLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9teS1hcHAvLi9saWIvZGJDb25uZWN0LnRzP2M4ODMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gXCJtb25nb29zZVwiO1xyXG5cclxuY29uc3QgTU9OR09EQl9VUkkgPVxyXG4gIFwibW9uZ29kYitzcnY6Ly9ub2xhbnRhcHBzOm9DT3QyTk5jRVFLVVpjdWpAaW1wYWN0by1jbHVzdGVyLnMyMHpiamoubW9uZ29kYi5uZXQvYXhpb20/cmV0cnlXcml0ZXM9dHJ1ZSZ3PW1ham9yaXR5XCI7XHJcblxyXG5pZiAoIU1PTkdPREJfVVJJKSB7XHJcbiAgdGhyb3cgbmV3IEVycm9yKFxyXG4gICAgXCJQbGVhc2UgZGVmaW5lIHRoZSBNT05HT0RCX1VSSSBlbnZpcm9ubWVudCB2YXJpYWJsZSBpbnNpZGUgLmVudi5sb2NhbFwiXHJcbiAgKTtcclxufVxyXG5cclxubGV0IGNhY2hlZCA9IGdsb2JhbC5tb25nb29zZTtcclxuXHJcbmlmICghY2FjaGVkKSB7XHJcbiAgY2FjaGVkID0gZ2xvYmFsLm1vbmdvb3NlID0geyBjb25uOiBudWxsLCBwcm9taXNlOiBudWxsIH07XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGRiQ29ubmVjdCgpIHtcclxuICBpZiAoY2FjaGVkLmNvbm4pIHtcclxuICAgIHJldHVybiBjYWNoZWQuY29ubjtcclxuICB9XHJcblxyXG4gIGlmICghY2FjaGVkLnByb21pc2UpIHtcclxuICAgIGNvbnN0IG9wdHMgPSB7XHJcbiAgICAgIGJ1ZmZlckNvbW1hbmRzOiB0cnVlLCAvLyBDaGFuZ2VkIHRvIHRydWUgdG8gYWxsb3cgYnVmZmVyaW5nXHJcbiAgICAgIHNlcnZlclNlbGVjdGlvblRpbWVvdXRNUzogMzAwMDAsXHJcbiAgICB9O1xyXG5cclxuICAgIGNhY2hlZC5wcm9taXNlID0gbW9uZ29vc2UuY29ubmVjdChNT05HT0RCX1VSSSwgb3B0cyk7XHJcbiAgfVxyXG5cclxuICB0cnkge1xyXG4gICAgY2FjaGVkLmNvbm4gPSBhd2FpdCBjYWNoZWQucHJvbWlzZTtcclxuICAgIGNvbnNvbGUubG9nKFwiTW9uZ29EQiBDb25uZWN0ZWQgU3VjY2Vzc2Z1bGx5XCIpO1xyXG4gICAgcmV0dXJuIGNhY2hlZC5jb25uO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjYWNoZWQucHJvbWlzZSA9IG51bGw7XHJcbiAgICBjb25zb2xlLmVycm9yKFwiTW9uZ29EQiBDb25uZWN0aW9uIEVycm9yOlwiLCBlcnJvcik7XHJcbiAgICB0aHJvdyBlcnJvcjtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGRiQ29ubmVjdDtcclxuIl0sIm5hbWVzIjpbIm1vbmdvb3NlIiwiTU9OR09EQl9VUkkiLCJFcnJvciIsImNhY2hlZCIsImdsb2JhbCIsImNvbm4iLCJwcm9taXNlIiwiZGJDb25uZWN0Iiwib3B0cyIsImJ1ZmZlckNvbW1hbmRzIiwic2VydmVyU2VsZWN0aW9uVGltZW91dE1TIiwiY29ubmVjdCIsImNvbnNvbGUiLCJsb2ciLCJlcnJvciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./lib/dbConnect.ts\n");

/***/ }),

/***/ "(api)/./middleware/withAuth.ts":
/*!********************************!*\
  !*** ./middleware/withAuth.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   withAuth: () => (/* binding */ withAuth)\n/* harmony export */ });\n/* harmony import */ var next_auth_jwt__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next-auth/jwt */ \"next-auth/jwt\");\n/* harmony import */ var next_auth_jwt__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_auth_jwt__WEBPACK_IMPORTED_MODULE_0__);\n\nfunction withAuth(handler) {\n    return async (req, res)=>{\n        const token = await (0,next_auth_jwt__WEBPACK_IMPORTED_MODULE_0__.getToken)({\n            req,\n            secret: process.env.JWT_SECRET\n        });\n        if (!token) {\n            return res.status(401).json({\n                success: false,\n                message: \"Not authenticated\"\n            });\n        }\n        req.user = token;\n        return handler(req, res);\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9taWRkbGV3YXJlL3dpdGhBdXRoLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUF5QztBQVNsQyxTQUFTQyxTQUFTQyxPQUFZO0lBQ25DLE9BQU8sT0FBT0MsS0FBcUJDO1FBQ2pDLE1BQU1DLFFBQVEsTUFBTUwsdURBQVFBLENBQUM7WUFBRUc7WUFBS0csUUFBUUMsUUFBUUMsR0FBRyxDQUFDQyxVQUFVO1FBQUM7UUFFbkUsSUFBSSxDQUFDSixPQUFPO1lBQ1YsT0FBT0QsSUFDSk0sTUFBTSxDQUFDLEtBQ1BDLElBQUksQ0FBQztnQkFBRUMsU0FBUztnQkFBT0MsU0FBUztZQUFvQjtRQUN6RDtRQUVBVixJQUFJVyxJQUFJLEdBQUdUO1FBQ1gsT0FBT0gsUUFBUUMsS0FBS0M7SUFDdEI7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL215LWFwcC8uL21pZGRsZXdhcmUvd2l0aEF1dGgudHM/ZjVhMSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZXRUb2tlbiB9IGZyb20gXCJuZXh0LWF1dGgvand0XCI7XHJcbmltcG9ydCB7IE5leHRBcGlSZXF1ZXN0LCBOZXh0QXBpUmVzcG9uc2UgfSBmcm9tIFwibmV4dFwiO1xyXG5cclxuZGVjbGFyZSBtb2R1bGUgXCJuZXh0XCIge1xyXG4gIGludGVyZmFjZSBOZXh0QXBpUmVxdWVzdCB7XHJcbiAgICB1c2VyPzogYW55O1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHdpdGhBdXRoKGhhbmRsZXI6IGFueSkge1xyXG4gIHJldHVybiBhc3luYyAocmVxOiBOZXh0QXBpUmVxdWVzdCwgcmVzOiBOZXh0QXBpUmVzcG9uc2UpID0+IHtcclxuICAgIGNvbnN0IHRva2VuID0gYXdhaXQgZ2V0VG9rZW4oeyByZXEsIHNlY3JldDogcHJvY2Vzcy5lbnYuSldUX1NFQ1JFVCB9KTtcclxuXHJcbiAgICBpZiAoIXRva2VuKSB7XHJcbiAgICAgIHJldHVybiByZXNcclxuICAgICAgICAuc3RhdHVzKDQwMSlcclxuICAgICAgICAuanNvbih7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiBcIk5vdCBhdXRoZW50aWNhdGVkXCIgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVxLnVzZXIgPSB0b2tlbjtcclxuICAgIHJldHVybiBoYW5kbGVyKHJlcSwgcmVzKTtcclxuICB9O1xyXG59XHJcbiJdLCJuYW1lcyI6WyJnZXRUb2tlbiIsIndpdGhBdXRoIiwiaGFuZGxlciIsInJlcSIsInJlcyIsInRva2VuIiwic2VjcmV0IiwicHJvY2VzcyIsImVudiIsIkpXVF9TRUNSRVQiLCJzdGF0dXMiLCJqc29uIiwic3VjY2VzcyIsIm1lc3NhZ2UiLCJ1c2VyIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./middleware/withAuth.ts\n");

/***/ }),

/***/ "(api)/./models/Chat.ts":
/*!************************!*\
  !*** ./models/Chat.ts ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nconst chatSchema = new (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema)({\n    sender: {\n        type: (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema).Types.ObjectId,\n        ref: \"User\",\n        required: true\n    },\n    receiver: {\n        type: (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema).Types.ObjectId,\n        ref: \"User\",\n        required: true\n    },\n    content: {\n        type: String,\n        required: false\n    },\n    roomId: {\n        type: String,\n        required: true\n    },\n    read: {\n        type: Boolean,\n        default: false\n    },\n    media: [\n        {\n            fileUrl: {\n                type: String\n            },\n            fileName: {\n                type: String\n            },\n            fileType: {\n                type: String\n            }\n        }\n    ]\n}, {\n    timestamps: true\n});\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((mongoose__WEBPACK_IMPORTED_MODULE_0___default().models).Chat || mongoose__WEBPACK_IMPORTED_MODULE_0___default().model(\"Chat\", chatSchema));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9tb2RlbHMvQ2hhdC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBZ0M7QUFFaEMsTUFBTUMsYUFBYSxJQUFJRCx3REFBZSxDQUNwQztJQUNFRyxRQUFRO1FBQ05DLE1BQU1KLHdEQUFlLENBQUNLLEtBQUssQ0FBQ0MsUUFBUTtRQUNwQ0MsS0FBSztRQUNMQyxVQUFVO0lBQ1o7SUFDQUMsVUFBVTtRQUNSTCxNQUFNSix3REFBZSxDQUFDSyxLQUFLLENBQUNDLFFBQVE7UUFDcENDLEtBQUs7UUFDTEMsVUFBVTtJQUNaO0lBQ0FFLFNBQVM7UUFBRU4sTUFBTU87UUFBUUgsVUFBVTtJQUFNO0lBQ3pDSSxRQUFRO1FBQUVSLE1BQU1PO1FBQVFILFVBQVU7SUFBSztJQUN2Q0ssTUFBTTtRQUFFVCxNQUFNVTtRQUFTQyxTQUFTO0lBQU07SUFDdENDLE9BQU87UUFDTDtZQUNFQyxTQUFTO2dCQUFFYixNQUFNTztZQUFPO1lBQ3hCTyxVQUFVO2dCQUFFZCxNQUFNTztZQUFPO1lBQ3pCUSxVQUFVO2dCQUFFZixNQUFNTztZQUFPO1FBQzNCO0tBQ0Q7QUFDSCxHQUNBO0lBQ0VTLFlBQVk7QUFDZDtBQUdGLGlFQUFlcEIsd0RBQWUsQ0FBQ3NCLElBQUksSUFBSXRCLHFEQUFjLENBQUMsUUFBUUMsV0FBV0EsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL215LWFwcC8uL21vZGVscy9DaGF0LnRzP2RmMWYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gXCJtb25nb29zZVwiO1xyXG5cclxuY29uc3QgY2hhdFNjaGVtYSA9IG5ldyBtb25nb29zZS5TY2hlbWEoXHJcbiAge1xyXG4gICAgc2VuZGVyOiB7XHJcbiAgICAgIHR5cGU6IG1vbmdvb3NlLlNjaGVtYS5UeXBlcy5PYmplY3RJZCxcclxuICAgICAgcmVmOiBcIlVzZXJcIixcclxuICAgICAgcmVxdWlyZWQ6IHRydWUsXHJcbiAgICB9LFxyXG4gICAgcmVjZWl2ZXI6IHtcclxuICAgICAgdHlwZTogbW9uZ29vc2UuU2NoZW1hLlR5cGVzLk9iamVjdElkLFxyXG4gICAgICByZWY6IFwiVXNlclwiLFxyXG4gICAgICByZXF1aXJlZDogdHJ1ZSxcclxuICAgIH0sXHJcbiAgICBjb250ZW50OiB7IHR5cGU6IFN0cmluZywgcmVxdWlyZWQ6IGZhbHNlIH0sXHJcbiAgICByb29tSWQ6IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZSB9LFxyXG4gICAgcmVhZDogeyB0eXBlOiBCb29sZWFuLCBkZWZhdWx0OiBmYWxzZSB9LFxyXG4gICAgbWVkaWE6IFtcclxuICAgICAge1xyXG4gICAgICAgIGZpbGVVcmw6IHsgdHlwZTogU3RyaW5nIH0sXHJcbiAgICAgICAgZmlsZU5hbWU6IHsgdHlwZTogU3RyaW5nIH0sXHJcbiAgICAgICAgZmlsZVR5cGU6IHsgdHlwZTogU3RyaW5nIH0sXHJcbiAgICAgIH0sXHJcbiAgICBdLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgdGltZXN0YW1wczogdHJ1ZSxcclxuICB9XHJcbik7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBtb25nb29zZS5tb2RlbHMuQ2hhdCB8fCBtb25nb29zZS5tb2RlbChcIkNoYXRcIiwgY2hhdFNjaGVtYSk7XHJcbiJdLCJuYW1lcyI6WyJtb25nb29zZSIsImNoYXRTY2hlbWEiLCJTY2hlbWEiLCJzZW5kZXIiLCJ0eXBlIiwiVHlwZXMiLCJPYmplY3RJZCIsInJlZiIsInJlcXVpcmVkIiwicmVjZWl2ZXIiLCJjb250ZW50IiwiU3RyaW5nIiwicm9vbUlkIiwicmVhZCIsIkJvb2xlYW4iLCJkZWZhdWx0IiwibWVkaWEiLCJmaWxlVXJsIiwiZmlsZU5hbWUiLCJmaWxlVHlwZSIsInRpbWVzdGFtcHMiLCJtb2RlbHMiLCJDaGF0IiwibW9kZWwiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./models/Chat.ts\n");

/***/ }),

/***/ "(api)/./models/Notification.ts":
/*!********************************!*\
  !*** ./models/Notification.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nconst NotificationSchema = new (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema)({\n    recipient: {\n        type: (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema).Types.ObjectId,\n        ref: \"User\",\n        required: true\n    },\n    type: {\n        type: String,\n        enum: [\n            \"friend_request\",\n            \"tournament\",\n            \"announcement\",\n            \"reminder\",\n            \"message\"\n        ],\n        required: true\n    },\n    title: {\n        type: String,\n        required: true\n    },\n    description: String,\n    isRead: {\n        type: Boolean,\n        default: false\n    },\n    status: {\n        type: String,\n        enum: [\n            \"pending\",\n            \"accepted\",\n            \"rejected\"\n        ],\n        default: \"pending\"\n    },\n    relatedId: {\n        type: (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema).Types.ObjectId,\n        required: true\n    },\n    createdAt: {\n        type: Date,\n        default: Date.now\n    }\n});\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((mongoose__WEBPACK_IMPORTED_MODULE_0___default().models).Notification || mongoose__WEBPACK_IMPORTED_MODULE_0___default().model(\"Notification\", NotificationSchema));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9tb2RlbHMvTm90aWZpY2F0aW9uLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFnQztBQUVoQyxNQUFNQyxxQkFBcUIsSUFBSUQsd0RBQWUsQ0FBQztJQUM3Q0csV0FBVztRQUNUQyxNQUFNSix3REFBZSxDQUFDSyxLQUFLLENBQUNDLFFBQVE7UUFDcENDLEtBQUs7UUFDTEMsVUFBVTtJQUNaO0lBQ0FKLE1BQU07UUFDSkEsTUFBTUs7UUFDTkMsTUFBTTtZQUNKO1lBQ0E7WUFDQTtZQUNBO1lBQ0E7U0FDRDtRQUNERixVQUFVO0lBQ1o7SUFDQUcsT0FBTztRQUNMUCxNQUFNSztRQUNORCxVQUFVO0lBQ1o7SUFDQUksYUFBYUg7SUFDYkksUUFBUTtRQUNOVCxNQUFNVTtRQUNOQyxTQUFTO0lBQ1g7SUFDQUMsUUFBUTtRQUNOWixNQUFNSztRQUNOQyxNQUFNO1lBQUM7WUFBVztZQUFZO1NBQVc7UUFDekNLLFNBQVM7SUFDWDtJQUNBRSxXQUFXO1FBQ1RiLE1BQU1KLHdEQUFlLENBQUNLLEtBQUssQ0FBQ0MsUUFBUTtRQUNwQ0UsVUFBVTtJQUNaO0lBQ0FVLFdBQVc7UUFDVGQsTUFBTWU7UUFDTkosU0FBU0ksS0FBS0MsR0FBRztJQUNuQjtBQUNGO0FBRUEsaUVBQWVwQix3REFBZSxDQUFDc0IsWUFBWSxJQUN6Q3RCLHFEQUFjLENBQUMsZ0JBQWdCQyxtQkFBbUJBLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9teS1hcHAvLi9tb2RlbHMvTm90aWZpY2F0aW9uLnRzPzQxMmEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gXCJtb25nb29zZVwiO1xyXG5cclxuY29uc3QgTm90aWZpY2F0aW9uU2NoZW1hID0gbmV3IG1vbmdvb3NlLlNjaGVtYSh7XHJcbiAgcmVjaXBpZW50OiB7XHJcbiAgICB0eXBlOiBtb25nb29zZS5TY2hlbWEuVHlwZXMuT2JqZWN0SWQsXHJcbiAgICByZWY6IFwiVXNlclwiLFxyXG4gICAgcmVxdWlyZWQ6IHRydWUsXHJcbiAgfSxcclxuICB0eXBlOiB7XHJcbiAgICB0eXBlOiBTdHJpbmcsXHJcbiAgICBlbnVtOiBbXHJcbiAgICAgIFwiZnJpZW5kX3JlcXVlc3RcIixcclxuICAgICAgXCJ0b3VybmFtZW50XCIsXHJcbiAgICAgIFwiYW5ub3VuY2VtZW50XCIsXHJcbiAgICAgIFwicmVtaW5kZXJcIixcclxuICAgICAgXCJtZXNzYWdlXCIsXHJcbiAgICBdLFxyXG4gICAgcmVxdWlyZWQ6IHRydWUsXHJcbiAgfSxcclxuICB0aXRsZToge1xyXG4gICAgdHlwZTogU3RyaW5nLFxyXG4gICAgcmVxdWlyZWQ6IHRydWUsXHJcbiAgfSxcclxuICBkZXNjcmlwdGlvbjogU3RyaW5nLFxyXG4gIGlzUmVhZDoge1xyXG4gICAgdHlwZTogQm9vbGVhbixcclxuICAgIGRlZmF1bHQ6IGZhbHNlLFxyXG4gIH0sXHJcbiAgc3RhdHVzOiB7XHJcbiAgICB0eXBlOiBTdHJpbmcsXHJcbiAgICBlbnVtOiBbXCJwZW5kaW5nXCIsIFwiYWNjZXB0ZWRcIiwgXCJyZWplY3RlZFwiXSxcclxuICAgIGRlZmF1bHQ6IFwicGVuZGluZ1wiLFxyXG4gIH0sXHJcbiAgcmVsYXRlZElkOiB7XHJcbiAgICB0eXBlOiBtb25nb29zZS5TY2hlbWEuVHlwZXMuT2JqZWN0SWQsXHJcbiAgICByZXF1aXJlZDogdHJ1ZSxcclxuICB9LFxyXG4gIGNyZWF0ZWRBdDoge1xyXG4gICAgdHlwZTogRGF0ZSxcclxuICAgIGRlZmF1bHQ6IERhdGUubm93LFxyXG4gIH0sXHJcbn0pO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgbW9uZ29vc2UubW9kZWxzLk5vdGlmaWNhdGlvbiB8fFxyXG4gIG1vbmdvb3NlLm1vZGVsKFwiTm90aWZpY2F0aW9uXCIsIE5vdGlmaWNhdGlvblNjaGVtYSk7XHJcbiJdLCJuYW1lcyI6WyJtb25nb29zZSIsIk5vdGlmaWNhdGlvblNjaGVtYSIsIlNjaGVtYSIsInJlY2lwaWVudCIsInR5cGUiLCJUeXBlcyIsIk9iamVjdElkIiwicmVmIiwicmVxdWlyZWQiLCJTdHJpbmciLCJlbnVtIiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsImlzUmVhZCIsIkJvb2xlYW4iLCJkZWZhdWx0Iiwic3RhdHVzIiwicmVsYXRlZElkIiwiY3JlYXRlZEF0IiwiRGF0ZSIsIm5vdyIsIm1vZGVscyIsIk5vdGlmaWNhdGlvbiIsIm1vZGVsIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./models/Notification.ts\n");

/***/ }),

/***/ "(api)/./models/Settings.ts":
/*!****************************!*\
  !*** ./models/Settings.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nconst SettingsSchema = new (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema)({\n    userId: {\n        type: (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema).Types.ObjectId,\n        ref: \"User\",\n        required: true\n    },\n    module: {\n        type: String,\n        required: true\n    },\n    type: {\n        type: String,\n        required: true\n    },\n    enabled: {\n        type: Boolean,\n        default: true\n    },\n    createdAt: {\n        type: Date,\n        default: Date.now\n    },\n    updatedAt: {\n        type: Date,\n        default: Date.now\n    }\n});\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((mongoose__WEBPACK_IMPORTED_MODULE_0___default().models).Settings || mongoose__WEBPACK_IMPORTED_MODULE_0___default().model(\"Settings\", SettingsSchema));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9tb2RlbHMvU2V0dGluZ3MudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQ2dDO0FBRWhDLE1BQU1DLGlCQUFpQixJQUFJRCx3REFBZSxDQUFDO0lBQ3pDRyxRQUFRO1FBQ05DLE1BQU1KLHdEQUFlLENBQUNLLEtBQUssQ0FBQ0MsUUFBUTtRQUNwQ0MsS0FBSztRQUNMQyxVQUFVO0lBQ1o7SUFDQUMsUUFBUTtRQUNOTCxNQUFNTTtRQUNORixVQUFVO0lBQ1o7SUFDQUosTUFBTTtRQUNKQSxNQUFNTTtRQUNORixVQUFVO0lBQ1o7SUFDQUcsU0FBUztRQUNQUCxNQUFNUTtRQUNOQyxTQUFTO0lBQ1g7SUFDQUMsV0FBVztRQUNUVixNQUFNVztRQUNORixTQUFTRSxLQUFLQyxHQUFHO0lBQ25CO0lBQ0FDLFdBQVc7UUFDVGIsTUFBTVc7UUFDTkYsU0FBU0UsS0FBS0MsR0FBRztJQUNuQjtBQUNGO0FBRUEsaUVBQWVoQix3REFBZSxDQUFDbUIsUUFBUSxJQUFJbkIscURBQWMsQ0FBQyxZQUFZQyxlQUFlQSxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbXktYXBwLy4vbW9kZWxzL1NldHRpbmdzLnRzP2Y4YmEiXSwic291cmNlc0NvbnRlbnQiOlsiXHJcbmltcG9ydCBtb25nb29zZSBmcm9tIFwibW9uZ29vc2VcIjtcclxuXHJcbmNvbnN0IFNldHRpbmdzU2NoZW1hID0gbmV3IG1vbmdvb3NlLlNjaGVtYSh7XHJcbiAgdXNlcklkOiB7XHJcbiAgICB0eXBlOiBtb25nb29zZS5TY2hlbWEuVHlwZXMuT2JqZWN0SWQsXHJcbiAgICByZWY6ICdVc2VyJyxcclxuICAgIHJlcXVpcmVkOiB0cnVlXHJcbiAgfSxcclxuICBtb2R1bGU6IHtcclxuICAgIHR5cGU6IFN0cmluZyxcclxuICAgIHJlcXVpcmVkOiB0cnVlXHJcbiAgfSxcclxuICB0eXBlOiB7XHJcbiAgICB0eXBlOiBTdHJpbmcsXHJcbiAgICByZXF1aXJlZDogdHJ1ZVxyXG4gIH0sXHJcbiAgZW5hYmxlZDoge1xyXG4gICAgdHlwZTogQm9vbGVhbixcclxuICAgIGRlZmF1bHQ6IHRydWVcclxuICB9LFxyXG4gIGNyZWF0ZWRBdDoge1xyXG4gICAgdHlwZTogRGF0ZSxcclxuICAgIGRlZmF1bHQ6IERhdGUubm93XHJcbiAgfSxcclxuICB1cGRhdGVkQXQ6IHtcclxuICAgIHR5cGU6IERhdGUsXHJcbiAgICBkZWZhdWx0OiBEYXRlLm5vd1xyXG4gIH1cclxufSk7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBtb25nb29zZS5tb2RlbHMuU2V0dGluZ3MgfHwgbW9uZ29vc2UubW9kZWwoXCJTZXR0aW5nc1wiLCBTZXR0aW5nc1NjaGVtYSk7XHJcbiJdLCJuYW1lcyI6WyJtb25nb29zZSIsIlNldHRpbmdzU2NoZW1hIiwiU2NoZW1hIiwidXNlcklkIiwidHlwZSIsIlR5cGVzIiwiT2JqZWN0SWQiLCJyZWYiLCJyZXF1aXJlZCIsIm1vZHVsZSIsIlN0cmluZyIsImVuYWJsZWQiLCJCb29sZWFuIiwiZGVmYXVsdCIsImNyZWF0ZWRBdCIsIkRhdGUiLCJub3ciLCJ1cGRhdGVkQXQiLCJtb2RlbHMiLCJTZXR0aW5ncyIsIm1vZGVsIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./models/Settings.ts\n");

/***/ }),

/***/ "(api)/./models/User.ts":
/*!************************!*\
  !*** ./models/User.ts ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nconst UserSchema = new (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema)({\n    name: {\n        type: String,\n        required: true\n    },\n    walletBalance: {\n        type: Number,\n        default: 0\n    },\n    stripeConnectId: {\n        type: String,\n        default: null\n    },\n    stripeAccountStatus: {\n        type: String,\n        enum: [\n            \"pending\",\n            \"active\",\n            \"rejected\",\n            \"restricted\"\n        ],\n        default: \"pending\"\n    },\n    email: {\n        type: String,\n        required: true,\n        unique: true\n    },\n    password: {\n        type: String,\n        required: true\n    },\n    role: {\n        type: String,\n        enum: [\n            \"Admin\",\n            \"User\",\n            \"Agent\",\n            \"Super\"\n        ],\n        default: \"User\"\n    },\n    cName: String,\n    profileImage: {\n        type: String,\n        required: false\n    },\n    friends: [\n        {\n            type: (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema).Types.ObjectId,\n            ref: \"User\"\n        }\n    ],\n    createdAt: {\n        type: Date,\n        default: Date.now\n    }\n});\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((mongoose__WEBPACK_IMPORTED_MODULE_0___default().models).User || mongoose__WEBPACK_IMPORTED_MODULE_0___default().model(\"User\", UserSchema));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9tb2RlbHMvVXNlci50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBZ0M7QUFFaEMsTUFBTUMsYUFBYSxJQUFJRCx3REFBZSxDQUFDO0lBQ3JDRyxNQUFNO1FBQ0pDLE1BQU1DO1FBQ05DLFVBQVU7SUFDWjtJQUNBQyxlQUFlO1FBQ2JILE1BQU1JO1FBQ05DLFNBQVM7SUFDWDtJQUNBQyxpQkFBaUI7UUFDZk4sTUFBTUM7UUFDTkksU0FBUztJQUNYO0lBQ0FFLHFCQUFxQjtRQUNuQlAsTUFBTUM7UUFDTk8sTUFBTTtZQUFDO1lBQVc7WUFBVTtZQUFZO1NBQWE7UUFDckRILFNBQVM7SUFDWDtJQUNBSSxPQUFPO1FBQ0xULE1BQU1DO1FBQ05DLFVBQVU7UUFDVlEsUUFBUTtJQUNWO0lBQ0FDLFVBQVU7UUFDUlgsTUFBTUM7UUFDTkMsVUFBVTtJQUNaO0lBQ0FVLE1BQU07UUFDSlosTUFBTUM7UUFDTk8sTUFBTTtZQUFDO1lBQVM7WUFBUTtZQUFTO1NBQVE7UUFDekNILFNBQVM7SUFDWDtJQUNBUSxPQUFPWjtJQUNQYSxjQUFjO1FBQ1pkLE1BQU1DO1FBQ05DLFVBQVU7SUFDWjtJQUNBYSxTQUFTO1FBQ1A7WUFDRWYsTUFBTUosd0RBQWUsQ0FBQ29CLEtBQUssQ0FBQ0MsUUFBUTtZQUNwQ0MsS0FBSztRQUNQO0tBQ0Q7SUFDREMsV0FBVztRQUNUbkIsTUFBTW9CO1FBQ05mLFNBQVNlLEtBQUtDLEdBQUc7SUFDbkI7QUFDRjtBQUVBLGlFQUFlekIsd0RBQWUsQ0FBQzJCLElBQUksSUFBSTNCLHFEQUFjLENBQUMsUUFBUUMsV0FBV0EsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL215LWFwcC8uL21vZGVscy9Vc2VyLnRzPzZkYzYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gXCJtb25nb29zZVwiO1xyXG5cclxuY29uc3QgVXNlclNjaGVtYSA9IG5ldyBtb25nb29zZS5TY2hlbWEoe1xyXG4gIG5hbWU6IHtcclxuICAgIHR5cGU6IFN0cmluZyxcclxuICAgIHJlcXVpcmVkOiB0cnVlLFxyXG4gIH0sXHJcbiAgd2FsbGV0QmFsYW5jZToge1xyXG4gICAgdHlwZTogTnVtYmVyLFxyXG4gICAgZGVmYXVsdDogMCxcclxuICB9LFxyXG4gIHN0cmlwZUNvbm5lY3RJZDoge1xyXG4gICAgdHlwZTogU3RyaW5nLFxyXG4gICAgZGVmYXVsdDogbnVsbCxcclxuICB9LFxyXG4gIHN0cmlwZUFjY291bnRTdGF0dXM6IHtcclxuICAgIHR5cGU6IFN0cmluZyxcclxuICAgIGVudW06IFtcInBlbmRpbmdcIiwgXCJhY3RpdmVcIiwgXCJyZWplY3RlZFwiLCBcInJlc3RyaWN0ZWRcIl0sXHJcbiAgICBkZWZhdWx0OiBcInBlbmRpbmdcIixcclxuICB9LFxyXG4gIGVtYWlsOiB7XHJcbiAgICB0eXBlOiBTdHJpbmcsXHJcbiAgICByZXF1aXJlZDogdHJ1ZSxcclxuICAgIHVuaXF1ZTogdHJ1ZSxcclxuICB9LFxyXG4gIHBhc3N3b3JkOiB7XHJcbiAgICB0eXBlOiBTdHJpbmcsXHJcbiAgICByZXF1aXJlZDogdHJ1ZSxcclxuICB9LFxyXG4gIHJvbGU6IHtcclxuICAgIHR5cGU6IFN0cmluZyxcclxuICAgIGVudW06IFtcIkFkbWluXCIsIFwiVXNlclwiLCBcIkFnZW50XCIsIFwiU3VwZXJcIl0sXHJcbiAgICBkZWZhdWx0OiBcIlVzZXJcIixcclxuICB9LFxyXG4gIGNOYW1lOiBTdHJpbmcsXHJcbiAgcHJvZmlsZUltYWdlOiB7XHJcbiAgICB0eXBlOiBTdHJpbmcsXHJcbiAgICByZXF1aXJlZDogZmFsc2UsXHJcbiAgfSxcclxuICBmcmllbmRzOiBbXHJcbiAgICB7XHJcbiAgICAgIHR5cGU6IG1vbmdvb3NlLlNjaGVtYS5UeXBlcy5PYmplY3RJZCxcclxuICAgICAgcmVmOiBcIlVzZXJcIixcclxuICAgIH0sXHJcbiAgXSxcclxuICBjcmVhdGVkQXQ6IHtcclxuICAgIHR5cGU6IERhdGUsXHJcbiAgICBkZWZhdWx0OiBEYXRlLm5vdyxcclxuICB9LFxyXG59KTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IG1vbmdvb3NlLm1vZGVscy5Vc2VyIHx8IG1vbmdvb3NlLm1vZGVsKFwiVXNlclwiLCBVc2VyU2NoZW1hKTtcclxuIl0sIm5hbWVzIjpbIm1vbmdvb3NlIiwiVXNlclNjaGVtYSIsIlNjaGVtYSIsIm5hbWUiLCJ0eXBlIiwiU3RyaW5nIiwicmVxdWlyZWQiLCJ3YWxsZXRCYWxhbmNlIiwiTnVtYmVyIiwiZGVmYXVsdCIsInN0cmlwZUNvbm5lY3RJZCIsInN0cmlwZUFjY291bnRTdGF0dXMiLCJlbnVtIiwiZW1haWwiLCJ1bmlxdWUiLCJwYXNzd29yZCIsInJvbGUiLCJjTmFtZSIsInByb2ZpbGVJbWFnZSIsImZyaWVuZHMiLCJUeXBlcyIsIk9iamVjdElkIiwicmVmIiwiY3JlYXRlZEF0IiwiRGF0ZSIsIm5vdyIsIm1vZGVscyIsIlVzZXIiLCJtb2RlbCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./models/User.ts\n");

/***/ }),

/***/ "(api)/./pages/api/chat/index.ts":
/*!*********************************!*\
  !*** ./pages/api/chat/index.ts ***!
  \*********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _lib_dbConnect__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../lib/dbConnect */ \"(api)/./lib/dbConnect.ts\");\n/* harmony import */ var _models_Chat__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../models/Chat */ \"(api)/./models/Chat.ts\");\n/* harmony import */ var formidable__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! formidable */ \"formidable\");\n/* harmony import */ var _models_Settings__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../models/Settings */ \"(api)/./models/Settings.ts\");\n/* harmony import */ var _models_Notification__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../models/Notification */ \"(api)/./models/Notification.ts\");\n/* harmony import */ var _models_User__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../models/User */ \"(api)/./models/User.ts\");\n/* harmony import */ var _middleware_withAuth__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../middleware/withAuth */ \"(api)/./middleware/withAuth.ts\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var _utils_helper__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../utils/helper */ \"(api)/./utils/helper.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([formidable__WEBPACK_IMPORTED_MODULE_2__]);\nformidable__WEBPACK_IMPORTED_MODULE_2__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\n\n\n\n\n\nconst config = {\n    api: {\n        bodyParser: false\n    }\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,_middleware_withAuth__WEBPACK_IMPORTED_MODULE_6__.withAuth)(async function handler(req, res) {\n    await (0,_lib_dbConnect__WEBPACK_IMPORTED_MODULE_0__[\"default\"])();\n    if (req.method === \"GET\") {\n        try {\n            const { sender, receiver } = req.query;\n            const messages = await _models_Chat__WEBPACK_IMPORTED_MODULE_1__[\"default\"].find({\n                $or: [\n                    {\n                        sender,\n                        receiver\n                    },\n                    {\n                        sender: receiver,\n                        receiver: sender\n                    }\n                ]\n            }).sort({\n                createdAt: 1\n            });\n            res.status(200).json({\n                success: true,\n                data: messages\n            });\n        } catch (error) {\n            res.status(500).json({\n                success: false,\n                message: error.message\n            });\n        }\n    } else if (req.method === \"POST\") {\n        try {\n            const form = (0,formidable__WEBPACK_IMPORTED_MODULE_2__[\"default\"])({\n                multiples: true,\n                keepExtensions: true\n            });\n            const [fields, files] = await new Promise((resolve, reject)=>{\n                form.parse(req, (err, fields, files)=>{\n                    if (err) reject(err);\n                    resolve([\n                        fields,\n                        files\n                    ]);\n                });\n            });\n            const messageData = {\n                sender: Array.isArray(fields.sender) ? fields.sender[0] : fields.sender,\n                receiver: Array.isArray(fields.receiver) ? fields.receiver[0] : fields.receiver,\n                roomId: Array.isArray(fields.roomId) ? fields.roomId[0] : fields.roomId,\n                content: Array.isArray(fields.content) ? fields.content[0] : fields.content || \"\",\n                media: []\n            };\n            if (files.files && files.files.length > 0) {\n                await Promise.all(Object.values(files).map(async (fileArray)=>{\n                    const s3Urls = await Promise.all(fileArray.map(async (uploadedFile)=>{\n                        const fileStream = fs__WEBPACK_IMPORTED_MODULE_7___default().createReadStream(uploadedFile.filepath);\n                        const s3Url = await (0,_utils_helper__WEBPACK_IMPORTED_MODULE_8__.uploadToS3)(uploadedFile, fileStream, \"tournaments\");\n                        messageData.media.push({\n                            fileName: uploadedFile.originalFilename,\n                            fileUrl: s3Url,\n                            fileType: uploadedFile.mimetype\n                        });\n                        return s3Url;\n                    }));\n                    return s3Urls;\n                }));\n            }\n            const message = await _models_Chat__WEBPACK_IMPORTED_MODULE_1__[\"default\"].create(messageData);\n            const setting = await _models_Settings__WEBPACK_IMPORTED_MODULE_3__[\"default\"].findOne({\n                type: \"message\",\n                enabled: true,\n                userId: messageData.receiver\n            });\n            const user = await _models_User__WEBPACK_IMPORTED_MODULE_5__[\"default\"].findById(messageData.receiver);\n            if (setting && user.role === \"User\") {\n                await _models_Notification__WEBPACK_IMPORTED_MODULE_4__[\"default\"].create({\n                    recipient: setting.userId,\n                    type: \"message\",\n                    title: `${req.user.name} sent you a message`,\n                    relatedId: message._id,\n                    status: \"accepted\"\n                });\n            } else if (user && user.role !== \"User\") {\n                await _models_Notification__WEBPACK_IMPORTED_MODULE_4__[\"default\"].create({\n                    recipient: user._id,\n                    type: \"message\",\n                    title: `${req.user.name} sent you a message`,\n                    relatedId: message._id,\n                    status: \"accepted\"\n                });\n            }\n            const populatedMessage = await message;\n            res.status(201).json({\n                success: true,\n                data: populatedMessage\n            });\n        } catch (error) {\n            res.status(500).json({\n                success: false,\n                message: error.message\n            });\n        }\n    } else {\n        res.status(405).json({\n            success: false,\n            message: \"Method not allowed\"\n        });\n    }\n}));\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LElBQUksQ0FBQztZQUFFQyxTQUFTO1lBQU9HLFNBQVM7UUFBcUI7SUFDdkU7QUFDRixFQUFFLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9teS1hcHAvLi9wYWdlcy9hcGkvY2hhdC9pbmRleC50cz9lOTI0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgTmV4dEFwaVJlcXVlc3QsIE5leHRBcGlSZXNwb25zZSB9IGZyb20gXCJuZXh0XCI7XHJcbmltcG9ydCBkYkNvbm5lY3QgZnJvbSBcIi4uLy4uLy4uL2xpYi9kYkNvbm5lY3RcIjtcclxuaW1wb3J0IENoYXQgZnJvbSBcIi4uLy4uLy4uL21vZGVscy9DaGF0XCI7XHJcbmltcG9ydCBmb3JtaWRhYmxlIGZyb20gXCJmb3JtaWRhYmxlXCI7XHJcbmltcG9ydCBTZXR0aW5ncyBmcm9tIFwiLi4vLi4vLi4vbW9kZWxzL1NldHRpbmdzXCI7XHJcbmltcG9ydCBOb3RpZmljYXRpb24gZnJvbSBcIi4uLy4uLy4uL21vZGVscy9Ob3RpZmljYXRpb25cIjtcclxuaW1wb3J0IFVzZXIgZnJvbSBcIi4uLy4uLy4uL21vZGVscy9Vc2VyXCI7XHJcbmltcG9ydCB7IHdpdGhBdXRoIH0gZnJvbSBcIi4uLy4uLy4uL21pZGRsZXdhcmUvd2l0aEF1dGhcIjtcclxuaW1wb3J0IGZzIGZyb20gXCJmc1wiO1xyXG5pbXBvcnQgeyB1cGxvYWRUb1MzIH0gZnJvbSBcIi4uLy4uLy4uL3V0aWxzL2hlbHBlclwiO1xyXG5cclxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IHtcclxuICBhcGk6IHtcclxuICAgIGJvZHlQYXJzZXI6IGZhbHNlLFxyXG4gIH0sXHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCB3aXRoQXV0aChhc3luYyBmdW5jdGlvbiBoYW5kbGVyKFxyXG4gIHJlcTogTmV4dEFwaVJlcXVlc3QsXHJcbiAgcmVzOiBOZXh0QXBpUmVzcG9uc2VcclxuKSB7XHJcbiAgYXdhaXQgZGJDb25uZWN0KCk7XHJcblxyXG4gIGlmIChyZXEubWV0aG9kID09PSBcIkdFVFwiKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCB7IHNlbmRlciwgcmVjZWl2ZXIgfSA9IHJlcS5xdWVyeTtcclxuICAgICAgY29uc3QgbWVzc2FnZXMgPSBhd2FpdCBDaGF0LmZpbmQoe1xyXG4gICAgICAgICRvcjogW1xyXG4gICAgICAgICAgeyBzZW5kZXIsIHJlY2VpdmVyIH0sXHJcbiAgICAgICAgICB7IHNlbmRlcjogcmVjZWl2ZXIsIHJlY2VpdmVyOiBzZW5kZXIgfSxcclxuICAgICAgICBdLFxyXG4gICAgICB9KS5zb3J0KHsgY3JlYXRlZEF0OiAxIH0pO1xyXG5cclxuICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyBzdWNjZXNzOiB0cnVlLCBkYXRhOiBtZXNzYWdlcyB9KTtcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogZXJyb3IubWVzc2FnZSB9KTtcclxuICAgIH1cclxuICB9IGVsc2UgaWYgKHJlcS5tZXRob2QgPT09IFwiUE9TVFwiKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBmb3JtID0gZm9ybWlkYWJsZSh7XHJcbiAgICAgICAgbXVsdGlwbGVzOiB0cnVlLFxyXG4gICAgICAgIGtlZXBFeHRlbnNpb25zOiB0cnVlLFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNvbnN0IFtmaWVsZHMsIGZpbGVzXSA9IGF3YWl0IG5ldyBQcm9taXNlPFxyXG4gICAgICAgIFtmb3JtaWRhYmxlLkZpZWxkcywgZm9ybWlkYWJsZS5GaWxlc11cclxuICAgICAgPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgZm9ybS5wYXJzZShyZXEsIChlcnIsIGZpZWxkcywgZmlsZXMpID0+IHtcclxuICAgICAgICAgIGlmIChlcnIpIHJlamVjdChlcnIpO1xyXG4gICAgICAgICAgcmVzb2x2ZShbZmllbGRzLCBmaWxlc10pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNvbnN0IG1lc3NhZ2VEYXRhOiBhbnkgPSB7XHJcbiAgICAgICAgc2VuZGVyOiBBcnJheS5pc0FycmF5KGZpZWxkcy5zZW5kZXIpID8gZmllbGRzLnNlbmRlclswXSA6IGZpZWxkcy5zZW5kZXIsXHJcbiAgICAgICAgcmVjZWl2ZXI6IEFycmF5LmlzQXJyYXkoZmllbGRzLnJlY2VpdmVyKVxyXG4gICAgICAgICAgPyBmaWVsZHMucmVjZWl2ZXJbMF1cclxuICAgICAgICAgIDogZmllbGRzLnJlY2VpdmVyLFxyXG4gICAgICAgIHJvb21JZDogQXJyYXkuaXNBcnJheShmaWVsZHMucm9vbUlkKSA/IGZpZWxkcy5yb29tSWRbMF0gOiBmaWVsZHMucm9vbUlkLFxyXG4gICAgICAgIGNvbnRlbnQ6IEFycmF5LmlzQXJyYXkoZmllbGRzLmNvbnRlbnQpXHJcbiAgICAgICAgICA/IGZpZWxkcy5jb250ZW50WzBdXHJcbiAgICAgICAgICA6IGZpZWxkcy5jb250ZW50IHx8IFwiXCIsXHJcbiAgICAgICAgbWVkaWE6IFtdLFxyXG4gICAgICB9O1xyXG5cclxuICAgICAgaWYgKGZpbGVzLmZpbGVzICYmIGZpbGVzLmZpbGVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChcclxuICAgICAgICAgIE9iamVjdC52YWx1ZXMoZmlsZXMpLm1hcChhc3luYyAoZmlsZUFycmF5OiBmb3JtaWRhYmxlLkZpbGVbXSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBzM1VybHMgPSBhd2FpdCBQcm9taXNlLmFsbChcclxuICAgICAgICAgICAgICBmaWxlQXJyYXkubWFwKGFzeW5jICh1cGxvYWRlZEZpbGUpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGZpbGVTdHJlYW0gPSBmcy5jcmVhdGVSZWFkU3RyZWFtKHVwbG9hZGVkRmlsZS5maWxlcGF0aCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzM1VybCA9IGF3YWl0IHVwbG9hZFRvUzMoXHJcbiAgICAgICAgICAgICAgICAgIHVwbG9hZGVkRmlsZSxcclxuICAgICAgICAgICAgICAgICAgZmlsZVN0cmVhbSxcclxuICAgICAgICAgICAgICAgICAgXCJ0b3VybmFtZW50c1wiXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgbWVzc2FnZURhdGEubWVkaWEucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgIGZpbGVOYW1lOiB1cGxvYWRlZEZpbGUub3JpZ2luYWxGaWxlbmFtZSxcclxuICAgICAgICAgICAgICAgICAgZmlsZVVybDogczNVcmwsXHJcbiAgICAgICAgICAgICAgICAgIGZpbGVUeXBlOiB1cGxvYWRlZEZpbGUubWltZXR5cGUsXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBzM1VybDtcclxuICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHMzVXJscztcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgbWVzc2FnZSA9IGF3YWl0IENoYXQuY3JlYXRlKG1lc3NhZ2VEYXRhKTtcclxuXHJcbiAgICAgIGNvbnN0IHNldHRpbmcgPSBhd2FpdCBTZXR0aW5ncy5maW5kT25lKHtcclxuICAgICAgICB0eXBlOiBcIm1lc3NhZ2VcIixcclxuICAgICAgICBlbmFibGVkOiB0cnVlLFxyXG4gICAgICAgIHVzZXJJZDogbWVzc2FnZURhdGEucmVjZWl2ZXIsXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZEJ5SWQobWVzc2FnZURhdGEucmVjZWl2ZXIpO1xyXG5cclxuICAgICAgaWYgKHNldHRpbmcgJiYgdXNlci5yb2xlID09PSBcIlVzZXJcIikge1xyXG4gICAgICAgIGF3YWl0IE5vdGlmaWNhdGlvbi5jcmVhdGUoe1xyXG4gICAgICAgICAgcmVjaXBpZW50OiBzZXR0aW5nLnVzZXJJZCxcclxuICAgICAgICAgIHR5cGU6IFwibWVzc2FnZVwiLFxyXG4gICAgICAgICAgdGl0bGU6IGAke3JlcS51c2VyLm5hbWV9IHNlbnQgeW91IGEgbWVzc2FnZWAsXHJcbiAgICAgICAgICByZWxhdGVkSWQ6IG1lc3NhZ2UuX2lkLFxyXG4gICAgICAgICAgc3RhdHVzOiBcImFjY2VwdGVkXCIsXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0gZWxzZSBpZiAodXNlciAmJiB1c2VyLnJvbGUgIT09IFwiVXNlclwiKSB7XHJcbiAgICAgICAgYXdhaXQgTm90aWZpY2F0aW9uLmNyZWF0ZSh7XHJcbiAgICAgICAgICByZWNpcGllbnQ6IHVzZXIuX2lkLFxyXG4gICAgICAgICAgdHlwZTogXCJtZXNzYWdlXCIsXHJcbiAgICAgICAgICB0aXRsZTogYCR7cmVxLnVzZXIubmFtZX0gc2VudCB5b3UgYSBtZXNzYWdlYCxcclxuICAgICAgICAgIHJlbGF0ZWRJZDogbWVzc2FnZS5faWQsXHJcbiAgICAgICAgICBzdGF0dXM6IFwiYWNjZXB0ZWRcIixcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgcG9wdWxhdGVkTWVzc2FnZSA9IGF3YWl0IG1lc3NhZ2U7XHJcblxyXG4gICAgICByZXMuc3RhdHVzKDIwMSkuanNvbih7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IHBvcHVsYXRlZE1lc3NhZ2UgfSk7XHJcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UgfSk7XHJcbiAgICB9XHJcbiAgfSBlbHNlIHtcclxuICAgIHJlcy5zdGF0dXMoNDA1KS5qc29uKHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6IFwiTWV0aG9kIG5vdCBhbGxvd2VkXCIgfSk7XHJcbiAgfVxyXG59KTtcclxuIl0sIm5hbWVzIjpbImRiQ29ubmVjdCIsIkNoYXQiLCJmb3JtaWRhYmxlIiwiU2V0dGluZ3MiLCJOb3RpZmljYXRpb24iLCJVc2VyIiwid2l0aEF1dGgiLCJmcyIsInVwbG9hZFRvUzMiLCJjb25maWciLCJhcGkiLCJib2R5UGFyc2VyIiwiaGFuZGxlciIsInJlcSIsInJlcyIsIm1ldGhvZCIsInNlbmRlciIsInJlY2VpdmVyIiwicXVlcnkiLCJtZXNzYWdlcyIsImZpbmQiLCIkb3IiLCJzb3J0IiwiY3JlYXRlZEF0Iiwic3RhdHVzIiwianNvbiIsInN1Y2Nlc3MiLCJkYXRhIiwiZXJyb3IiLCJtZXNzYWdlIiwiZm9ybSIsIm11bHRpcGxlcyIsImtlZXBFeHRlbnNpb25zIiwiZmllbGRzIiwiZmlsZXMiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsInBhcnNlIiwiZXJyIiwibWVzc2FnZURhdGEiLCJBcnJheSIsImlzQXJyYXkiLCJyb29tSWQiLCJjb250ZW50IiwibWVkaWEiLCJsZW5ndGgiLCJhbGwiLCJPYmplY3QiLCJ2YWx1ZXMiLCJtYXAiLCJmaWxlQXJyYXkiLCJzM1VybHMiLCJ1cGxvYWRlZEZpbGUiLCJmaWxlU3RyZWFtIiwiY3JlYXRlUmVhZFN0cmVhbSIsImZpbGVwYXRoIiwiczNVcmwiLCJwdXNoIiwiZmlsZU5hbWUiLCJvcmlnaW5hbEZpbGVuYW1lIiwiZmlsZVVybCIsImZpbGVUeXBlIiwibWltZXR5cGUiLCJjcmVhdGUiLCJzZXR0aW5nIiwiZmluZE9uZSIsInR5cGUiLCJlbmFibGVkIiwidXNlcklkIiwidXNlciIsImZpbmRCeUlkIiwicm9sZSIsInJlY2lwaWVudCIsInRpdGxlIiwibmFtZSIsInJlbGF0ZWRJZCIsIl9pZCIsInBvcHVsYXRlZE1lc3NhZ2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./pages/api/chat/index.ts\n");

/***/ }),

/***/ "(api)/./utils/helper.ts":
/*!*************************!*\
  !*** ./utils/helper.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ShowNavigatorDeviceModal: () => (/* binding */ ShowNavigatorDeviceModal),\n/* harmony export */   countDownTimer: () => (/* binding */ countDownTimer),\n/* harmony export */   fileToUrl: () => (/* binding */ fileToUrl),\n/* harmony export */   formatCountDown: () => (/* binding */ formatCountDown),\n/* harmony export */   formatDateCron: () => (/* binding */ formatDateCron),\n/* harmony export */   formatHoursMins: () => (/* binding */ formatHoursMins),\n/* harmony export */   monthsCount: () => (/* binding */ monthsCount),\n/* harmony export */   positionToRank: () => (/* binding */ positionToRank),\n/* harmony export */   totalCountInArray: () => (/* binding */ totalCountInArray),\n/* harmony export */   uploadToS3: () => (/* binding */ uploadToS3)\n/* harmony export */ });\n/* harmony import */ var aws_sdk__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! aws-sdk */ \"aws-sdk\");\n/* harmony import */ var aws_sdk__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(aws_sdk__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! moment */ \"moment\");\n/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_1__);\n\n\nconst ShowNavigatorDeviceModal = async ()=>{\n    try {\n        // First check microphone permission\n        const permissionResult = await navigator.permissions.query({\n            name: \"microphone\"\n        });\n        if (permissionResult.state === \"denied\") {\n            alert(\"Please allow microphone access in your browser settings to use this feature.\");\n            return;\n        }\n        const devices = await navigator.mediaDevices.enumerateDevices();\n        const audioDevices = devices.filter((device)=>device.kind === \"audioinput\");\n        const dialog = document.createElement(\"dialog\");\n        dialog.style.padding = \"20px\";\n        dialog.style.borderRadius = \"8px\";\n        dialog.style.boxShadow = \"0 2px 10px rgba(0,0,0,0.1)\";\n        // Add close button in top right\n        const closeButton = document.createElement(\"button\");\n        closeButton.innerHTML = \"✕\";\n        closeButton.style.position = \"absolute\";\n        closeButton.style.right = \"10px\";\n        closeButton.style.top = \"10px\";\n        closeButton.style.border = \"none\";\n        closeButton.style.background = \"none\";\n        closeButton.style.fontSize = \"20px\";\n        closeButton.style.cursor = \"pointer\";\n        closeButton.onclick = ()=>dialog.close();\n        dialog.appendChild(closeButton);\n        const title = document.createElement(\"h3\");\n        title.textContent = \"Select Audio Device\";\n        dialog.appendChild(title);\n        const select = document.createElement(\"select\");\n        select.style.width = \"100%\";\n        select.style.padding = \"8px\";\n        select.style.marginBottom = \"10px\";\n        audioDevices.forEach((device)=>{\n            const option = document.createElement(\"option\");\n            option.value = device.deviceId;\n            option.text = device.label || `Microphone ${device.deviceId.slice(0, 5)}`;\n            select.appendChild(option);\n        });\n        const button = document.createElement(\"button\");\n        button.textContent = \"Save Selection\";\n        button.style.padding = \"8px 16px\";\n        button.onclick = ()=>{\n            localStorage.setItem(\"preferredMicrophoneId\", select.value);\n            dialog.close();\n        };\n        dialog.appendChild(select);\n        dialog.appendChild(button);\n        document.body.appendChild(dialog);\n        dialog.showModal();\n    } catch (error) {\n        console.error(\"Error accessing media devices:\", error);\n        alert(\"Unable to access microphone. Please check your browser settings.\");\n    }\n};\nconst fileToUrl = (file)=>{\n    const blob = new Blob([\n        file\n    ], {\n        type: file.type\n    });\n    return URL.createObjectURL(blob);\n};\nconst formatDateCron = (currentDate)=>{\n    const date = new Date(currentDate);\n    return `${date.getSeconds()} ${date.getMinutes()} ${date.getHours()} ${date.getDate()} ${date.getMonth() + 1} ${date.getDay()}`;\n};\nconst totalCountInArray = (data, key)=>{\n    return data.reduce((acc, curr)=>acc + parseInt(curr[key]), 0);\n};\nconst formatCountDown = (duration)=>{\n    let hours = \"00\";\n    let minutes = \"00\";\n    let seconds = \"00\";\n    if (duration) {\n        const totalSeconds = Math.floor(duration.asSeconds());\n        hours = Math.floor(totalSeconds / 3600).toString().padStart(2, \"0\");\n        minutes = Math.floor(totalSeconds % 3600 / 60).toString().padStart(2, \"0\");\n        seconds = Math.floor(totalSeconds % 60).toString().padStart(2, \"0\");\n    }\n    return `${hours}:${minutes}:${seconds}`;\n};\nconst countDownTimer = (date, start, end)=>{\n    const [hours, mins] = start.split(\":\");\n    const dateTime = moment__WEBPACK_IMPORTED_MODULE_1___default()(date).add(Number(hours), \"hours\").add(Number(mins), \"minutes\");\n    if (!end) {\n        // Check if the target time has already passed\n        const currentTime = moment__WEBPACK_IMPORTED_MODULE_1___default()();\n        let diff = moment__WEBPACK_IMPORTED_MODULE_1___default().duration(dateTime.diff(currentTime));\n        // If the target time is in the past, set the countdown to zero\n        if (diff.asSeconds() < 0) {\n            diff = moment__WEBPACK_IMPORTED_MODULE_1___default().duration(0); // Set duration to zero if time is up\n        }\n        return diff;\n    } else {\n        const [endHours, endMins] = end.split(\":\");\n        const endTime = moment__WEBPACK_IMPORTED_MODULE_1___default()(date).add(Number(endHours), \"hours\").add(Number(endMins), \"minutes\");\n        let diff = moment__WEBPACK_IMPORTED_MODULE_1___default().duration(endTime.diff(dateTime));\n        // If the target time is in the past, set the countdown to zero\n        if (diff.asSeconds() < 0) {\n            diff = moment__WEBPACK_IMPORTED_MODULE_1___default().duration(0); // Set duration to zero if time is up\n        }\n        return diff.asMinutes();\n    }\n};\nconst positionToRank = (position)=>{\n    if (position === 1) {\n        return \"1st\";\n    } else if (position === 2) {\n        return \"2nd\";\n    } else if (position === 3) {\n        return \"3rd\";\n    } else {\n        return `${position}th`;\n    }\n};\nconst monthsCount = {\n    jan: 0,\n    feb: 0,\n    mar: 0,\n    apr: 0,\n    may: 0,\n    jun: 0,\n    jul: 0,\n    aug: 0,\n    sep: 0,\n    oct: 0,\n    nov: 0,\n    dec: 0\n};\nfunction formatHoursMins(minutes) {\n    const hours = Math.floor(minutes / 60);\n    const remainingMinutes = minutes % 60;\n    return `${hours} Hrs ${remainingMinutes} min`;\n}\nconst s3 = new (aws_sdk__WEBPACK_IMPORTED_MODULE_0___default().S3)({\n    accessKeyId: \"AKIA2SSTC2PGH7VMSRIL\",\n    secretAccessKey: \"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\"\n});\nconst uploadToS3 = async (file, buffer, folder)=>{\n    // Create a stream from the file buffer\n    const params = {\n        Bucket: \"axiom-bucket-media\",\n        Key: folder ? `uploads/${folder}/${file.newFilename}` : `uploads/${file.newFilename}`,\n        Body: buffer,\n        ContentType: file.mimetype,\n        ACL: \"public-read\"\n    };\n    try {\n        const data = await s3.upload(params).promise();\n        return data.Location;\n    } catch (error) {\n        throw new Error(\"Error uploading file to S3: \" + error.message);\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi91dGlscy9oZWxwZXIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBMEI7QUFDRTtBQUdyQixNQUFNRSwyQkFBMkI7SUFDdEMsSUFBSTtRQUNGLG9DQUFvQztRQUNwQyxNQUFNQyxtQkFBbUIsTUFBTUMsVUFBVUMsV0FBVyxDQUFDQyxLQUFLLENBQUM7WUFDekRDLE1BQU07UUFDUjtRQUNBLElBQUlKLGlCQUFpQkssS0FBSyxLQUFLLFVBQVU7WUFDdkNDLE1BQ0U7WUFFRjtRQUNGO1FBRUEsTUFBTUMsVUFBVSxNQUFNTixVQUFVTyxZQUFZLENBQUNDLGdCQUFnQjtRQUM3RCxNQUFNQyxlQUFlSCxRQUFRSSxNQUFNLENBQ2pDLENBQUNDLFNBQVdBLE9BQU9DLElBQUksS0FBSztRQUU5QixNQUFNQyxTQUFTQyxTQUFTQyxhQUFhLENBQUM7UUFDdENGLE9BQU9HLEtBQUssQ0FBQ0MsT0FBTyxHQUFHO1FBQ3ZCSixPQUFPRyxLQUFLLENBQUNFLFlBQVksR0FBRztRQUM1QkwsT0FBT0csS0FBSyxDQUFDRyxTQUFTLEdBQUc7UUFFekIsZ0NBQWdDO1FBQ2hDLE1BQU1DLGNBQWNOLFNBQVNDLGFBQWEsQ0FBQztRQUMzQ0ssWUFBWUMsU0FBUyxHQUFHO1FBQ3hCRCxZQUFZSixLQUFLLENBQUNNLFFBQVEsR0FBRztRQUM3QkYsWUFBWUosS0FBSyxDQUFDTyxLQUFLLEdBQUc7UUFDMUJILFlBQVlKLEtBQUssQ0FBQ1EsR0FBRyxHQUFHO1FBQ3hCSixZQUFZSixLQUFLLENBQUNTLE1BQU0sR0FBRztRQUMzQkwsWUFBWUosS0FBSyxDQUFDVSxVQUFVLEdBQUc7UUFDL0JOLFlBQVlKLEtBQUssQ0FBQ1csUUFBUSxHQUFHO1FBQzdCUCxZQUFZSixLQUFLLENBQUNZLE1BQU0sR0FBRztRQUMzQlIsWUFBWVMsT0FBTyxHQUFHLElBQU1oQixPQUFPaUIsS0FBSztRQUN4Q2pCLE9BQU9rQixXQUFXLENBQUNYO1FBRW5CLE1BQU1ZLFFBQVFsQixTQUFTQyxhQUFhLENBQUM7UUFDckNpQixNQUFNQyxXQUFXLEdBQUc7UUFDcEJwQixPQUFPa0IsV0FBVyxDQUFDQztRQUVuQixNQUFNRSxTQUFTcEIsU0FBU0MsYUFBYSxDQUFDO1FBQ3RDbUIsT0FBT2xCLEtBQUssQ0FBQ21CLEtBQUssR0FBRztRQUNyQkQsT0FBT2xCLEtBQUssQ0FBQ0MsT0FBTyxHQUFHO1FBQ3ZCaUIsT0FBT2xCLEtBQUssQ0FBQ29CLFlBQVksR0FBRztRQUU1QjNCLGFBQWE0QixPQUFPLENBQUMsQ0FBQzFCO1lBQ3BCLE1BQU0yQixTQUFTeEIsU0FBU0MsYUFBYSxDQUFDO1lBQ3RDdUIsT0FBT0MsS0FBSyxHQUFHNUIsT0FBTzZCLFFBQVE7WUFDOUJGLE9BQU9HLElBQUksR0FBRzlCLE9BQU8rQixLQUFLLElBQUksQ0FBQyxXQUFXLEVBQUUvQixPQUFPNkIsUUFBUSxDQUFDRyxLQUFLLENBQUMsR0FBRyxHQUFHLENBQUM7WUFDekVULE9BQU9ILFdBQVcsQ0FBQ087UUFDckI7UUFFQSxNQUFNTSxTQUFTOUIsU0FBU0MsYUFBYSxDQUFDO1FBQ3RDNkIsT0FBT1gsV0FBVyxHQUFHO1FBQ3JCVyxPQUFPNUIsS0FBSyxDQUFDQyxPQUFPLEdBQUc7UUFFdkIyQixPQUFPZixPQUFPLEdBQUc7WUFDZmdCLGFBQWFDLE9BQU8sQ0FBQyx5QkFBeUJaLE9BQU9LLEtBQUs7WUFDMUQxQixPQUFPaUIsS0FBSztRQUNkO1FBRUFqQixPQUFPa0IsV0FBVyxDQUFDRztRQUNuQnJCLE9BQU9rQixXQUFXLENBQUNhO1FBQ25COUIsU0FBU2lDLElBQUksQ0FBQ2hCLFdBQVcsQ0FBQ2xCO1FBQzFCQSxPQUFPbUMsU0FBUztJQUNsQixFQUFFLE9BQU9DLE9BQU87UUFDZEMsUUFBUUQsS0FBSyxDQUFDLGtDQUFrQ0E7UUFDaEQ1QyxNQUFNO0lBQ1I7QUFDRixFQUFFO0FBRUssTUFBTThDLFlBQVksQ0FBQ0M7SUFDeEIsTUFBTUMsT0FBTyxJQUFJQyxLQUFLO1FBQUNGO0tBQUssRUFBRTtRQUFFRyxNQUFNSCxLQUFLRyxJQUFJO0lBQUM7SUFDaEQsT0FBT0MsSUFBSUMsZUFBZSxDQUFDSjtBQUM3QixFQUFFO0FBRUssTUFBTUssaUJBQWlCLENBQUNDO0lBQzdCLE1BQU1DLE9BQU8sSUFBSUMsS0FBS0Y7SUFDdEIsT0FBTyxDQUFDLEVBQUVDLEtBQUtFLFVBQVUsR0FBRyxDQUFDLEVBQUVGLEtBQUtHLFVBQVUsR0FBRyxDQUFDLEVBQUVILEtBQUtJLFFBQVEsR0FBRyxDQUFDLEVBQUVKLEtBQUtLLE9BQU8sR0FBRyxDQUFDLEVBQ3JGTCxLQUFLTSxRQUFRLEtBQUssRUFDbkIsQ0FBQyxFQUFFTixLQUFLTyxNQUFNLEdBQUcsQ0FBQztBQUNyQixFQUFFO0FBRUssTUFBTUMsb0JBQW9CLENBQUNDLE1BQU1DO0lBQ3RDLE9BQU9ELEtBQUtFLE1BQU0sQ0FBQyxDQUFDQyxLQUFLQyxPQUFTRCxNQUFNRSxTQUFTRCxJQUFJLENBQUNILElBQUksR0FBRztBQUMvRCxFQUFFO0FBRUssTUFBTUssa0JBQWtCLENBQUNDO0lBQzlCLElBQUlDLFFBQVE7SUFDWixJQUFJQyxVQUFVO0lBQ2QsSUFBSUMsVUFBVTtJQUNkLElBQUlILFVBQVU7UUFDWixNQUFNSSxlQUFlQyxLQUFLQyxLQUFLLENBQUNOLFNBQVNPLFNBQVM7UUFDbEROLFFBQVFJLEtBQUtDLEtBQUssQ0FBQ0YsZUFBZSxNQUMvQkksUUFBUSxHQUNSQyxRQUFRLENBQUMsR0FBRztRQUNmUCxVQUFVRyxLQUFLQyxLQUFLLENBQUMsZUFBZ0IsT0FBUSxJQUMxQ0UsUUFBUSxHQUNSQyxRQUFRLENBQUMsR0FBRztRQUNmTixVQUFVRSxLQUFLQyxLQUFLLENBQUNGLGVBQWUsSUFDakNJLFFBQVEsR0FDUkMsUUFBUSxDQUFDLEdBQUc7SUFDakI7SUFFQSxPQUFPLENBQUMsRUFBRVIsTUFBTSxDQUFDLEVBQUVDLFFBQVEsQ0FBQyxFQUFFQyxRQUFRLENBQUM7QUFDekMsRUFBRTtBQUVLLE1BQU1PLGlCQUFpQixDQUFDMUIsTUFBWTJCLE9BQWVDO0lBQ3hELE1BQU0sQ0FBQ1gsT0FBT1ksS0FBSyxHQUFHRixNQUFNRyxLQUFLLENBQUM7SUFDbEMsTUFBTUMsV0FBVzlGLDZDQUFNQSxDQUFDK0QsTUFDckJnQyxHQUFHLENBQUNDLE9BQU9oQixRQUFRLFNBQ25CZSxHQUFHLENBQUNDLE9BQU9KLE9BQU87SUFFckIsSUFBSSxDQUFDRCxLQUFLO1FBQ1IsOENBQThDO1FBQzlDLE1BQU1NLGNBQWNqRyw2Q0FBTUE7UUFFMUIsSUFBSWtHLE9BQU9sRyxzREFBZSxDQUFDOEYsU0FBU0ksSUFBSSxDQUFDRDtRQUV6QywrREFBK0Q7UUFDL0QsSUFBSUMsS0FBS1osU0FBUyxLQUFLLEdBQUc7WUFDeEJZLE9BQU9sRyxzREFBZSxDQUFDLElBQUkscUNBQXFDO1FBQ2xFO1FBRUEsT0FBT2tHO0lBQ1QsT0FBTztRQUNMLE1BQU0sQ0FBQ0MsVUFBVUMsUUFBUSxHQUFHVCxJQUFJRSxLQUFLLENBQUM7UUFFdEMsTUFBTVEsVUFBVXJHLDZDQUFNQSxDQUFDK0QsTUFDcEJnQyxHQUFHLENBQUNDLE9BQU9HLFdBQVcsU0FDdEJKLEdBQUcsQ0FBQ0MsT0FBT0ksVUFBVTtRQUV4QixJQUFJRixPQUFPbEcsc0RBQWUsQ0FBQ3FHLFFBQVFILElBQUksQ0FBQ0o7UUFFeEMsK0RBQStEO1FBQy9ELElBQUlJLEtBQUtaLFNBQVMsS0FBSyxHQUFHO1lBQ3hCWSxPQUFPbEcsc0RBQWUsQ0FBQyxJQUFJLHFDQUFxQztRQUNsRTtRQUVBLE9BQU9rRyxLQUFLSSxTQUFTO0lBQ3ZCO0FBQ0YsRUFBRTtBQUVLLE1BQU1DLGlCQUFpQixDQUFDOUU7SUFDN0IsSUFBSUEsYUFBYSxHQUFHO1FBQ2xCLE9BQU87SUFDVCxPQUFPLElBQUlBLGFBQWEsR0FBRztRQUN6QixPQUFPO0lBQ1QsT0FBTyxJQUFJQSxhQUFhLEdBQUc7UUFDekIsT0FBTztJQUNULE9BQU87UUFDTCxPQUFPLENBQUMsRUFBRUEsU0FBUyxFQUFFLENBQUM7SUFDeEI7QUFDRixFQUFFO0FBRUssTUFBTStFLGNBQWM7SUFDekJDLEtBQUs7SUFDTEMsS0FBSztJQUNMQyxLQUFLO0lBQ0xDLEtBQUs7SUFDTEMsS0FBSztJQUNMQyxLQUFLO0lBQ0xDLEtBQUs7SUFDTEMsS0FBSztJQUNMQyxLQUFLO0lBQ0xDLEtBQUs7SUFDTEMsS0FBSztJQUNMQyxLQUFLO0FBQ1AsRUFBRTtBQUVLLFNBQVNDLGdCQUFnQnBDLE9BQWU7SUFDN0MsTUFBTUQsUUFBUUksS0FBS0MsS0FBSyxDQUFDSixVQUFVO0lBQ25DLE1BQU1xQyxtQkFBbUJyQyxVQUFVO0lBRW5DLE9BQU8sQ0FBQyxFQUFFRCxNQUFNLEtBQUssRUFBRXNDLGlCQUFpQixJQUFJLENBQUM7QUFDL0M7QUFFQSxNQUFNQyxLQUFLLElBQUl4SCxtREFBTSxDQUFDO0lBQ3BCMEgsYUFBYTtJQUNiQyxpQkFBaUI7QUFDbkI7QUFFTyxNQUFNQyxhQUFhLE9BQ3hCcEUsTUFDQXFFLFFBQ0FDO0lBRUEsdUNBQXVDO0lBRXZDLE1BQU1DLFNBQVM7UUFDYkMsUUFBUTtRQUNSQyxLQUFLSCxTQUNELENBQUMsUUFBUSxFQUFFQSxPQUFPLENBQUMsRUFBRXRFLEtBQUswRSxXQUFXLENBQUMsQ0FBQyxHQUN2QyxDQUFDLFFBQVEsRUFBRTFFLEtBQUswRSxXQUFXLENBQUMsQ0FBQztRQUNqQ0MsTUFBTU47UUFDTk8sYUFBYTVFLEtBQUs2RSxRQUFRO1FBQzFCQyxLQUFLO0lBQ1A7SUFFQSxJQUFJO1FBQ0YsTUFBTTdELE9BQU8sTUFBTStDLEdBQUdlLE1BQU0sQ0FBQ1IsUUFBUVMsT0FBTztRQUM1QyxPQUFPL0QsS0FBS2dFLFFBQVE7SUFDdEIsRUFBRSxPQUFPcEYsT0FBTztRQUNkLE1BQU0sSUFBSXFGLE1BQU0saUNBQWlDckYsTUFBTXNGLE9BQU87SUFDaEU7QUFDRixFQUFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbXktYXBwLy4vdXRpbHMvaGVscGVyLnRzP2ZjZjciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEFXUyBmcm9tIFwiYXdzLXNka1wiO1xyXG5pbXBvcnQgbW9tZW50IGZyb20gXCJtb21lbnRcIjtcclxuaW1wb3J0IHsgRmlsZSB9IGZyb20gXCJmb3JtaWRhYmxlXCI7XHJcblxyXG5leHBvcnQgY29uc3QgU2hvd05hdmlnYXRvckRldmljZU1vZGFsID0gYXN5bmMgKCkgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICAvLyBGaXJzdCBjaGVjayBtaWNyb3Bob25lIHBlcm1pc3Npb25cclxuICAgIGNvbnN0IHBlcm1pc3Npb25SZXN1bHQgPSBhd2FpdCBuYXZpZ2F0b3IucGVybWlzc2lvbnMucXVlcnkoe1xyXG4gICAgICBuYW1lOiBcIm1pY3JvcGhvbmVcIiBhcyBQZXJtaXNzaW9uTmFtZSxcclxuICAgIH0pO1xyXG4gICAgaWYgKHBlcm1pc3Npb25SZXN1bHQuc3RhdGUgPT09IFwiZGVuaWVkXCIpIHtcclxuICAgICAgYWxlcnQoXHJcbiAgICAgICAgXCJQbGVhc2UgYWxsb3cgbWljcm9waG9uZSBhY2Nlc3MgaW4geW91ciBicm93c2VyIHNldHRpbmdzIHRvIHVzZSB0aGlzIGZlYXR1cmUuXCJcclxuICAgICAgKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGRldmljZXMgPSBhd2FpdCBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmVudW1lcmF0ZURldmljZXMoKTtcclxuICAgIGNvbnN0IGF1ZGlvRGV2aWNlcyA9IGRldmljZXMuZmlsdGVyKFxyXG4gICAgICAoZGV2aWNlKSA9PiBkZXZpY2Uua2luZCA9PT0gXCJhdWRpb2lucHV0XCJcclxuICAgICk7XHJcbiAgICBjb25zdCBkaWFsb2cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGlhbG9nXCIpO1xyXG4gICAgZGlhbG9nLnN0eWxlLnBhZGRpbmcgPSBcIjIwcHhcIjtcclxuICAgIGRpYWxvZy5zdHlsZS5ib3JkZXJSYWRpdXMgPSBcIjhweFwiO1xyXG4gICAgZGlhbG9nLnN0eWxlLmJveFNoYWRvdyA9IFwiMCAycHggMTBweCByZ2JhKDAsMCwwLDAuMSlcIjtcclxuXHJcbiAgICAvLyBBZGQgY2xvc2UgYnV0dG9uIGluIHRvcCByaWdodFxyXG4gICAgY29uc3QgY2xvc2VCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xyXG4gICAgY2xvc2VCdXR0b24uaW5uZXJIVE1MID0gXCLinJVcIjtcclxuICAgIGNsb3NlQnV0dG9uLnN0eWxlLnBvc2l0aW9uID0gXCJhYnNvbHV0ZVwiO1xyXG4gICAgY2xvc2VCdXR0b24uc3R5bGUucmlnaHQgPSBcIjEwcHhcIjtcclxuICAgIGNsb3NlQnV0dG9uLnN0eWxlLnRvcCA9IFwiMTBweFwiO1xyXG4gICAgY2xvc2VCdXR0b24uc3R5bGUuYm9yZGVyID0gXCJub25lXCI7XHJcbiAgICBjbG9zZUJ1dHRvbi5zdHlsZS5iYWNrZ3JvdW5kID0gXCJub25lXCI7XHJcbiAgICBjbG9zZUJ1dHRvbi5zdHlsZS5mb250U2l6ZSA9IFwiMjBweFwiO1xyXG4gICAgY2xvc2VCdXR0b24uc3R5bGUuY3Vyc29yID0gXCJwb2ludGVyXCI7XHJcbiAgICBjbG9zZUJ1dHRvbi5vbmNsaWNrID0gKCkgPT4gZGlhbG9nLmNsb3NlKCk7XHJcbiAgICBkaWFsb2cuYXBwZW5kQ2hpbGQoY2xvc2VCdXR0b24pO1xyXG5cclxuICAgIGNvbnN0IHRpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImgzXCIpO1xyXG4gICAgdGl0bGUudGV4dENvbnRlbnQgPSBcIlNlbGVjdCBBdWRpbyBEZXZpY2VcIjtcclxuICAgIGRpYWxvZy5hcHBlbmRDaGlsZCh0aXRsZSk7XHJcblxyXG4gICAgY29uc3Qgc2VsZWN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNlbGVjdFwiKTtcclxuICAgIHNlbGVjdC5zdHlsZS53aWR0aCA9IFwiMTAwJVwiO1xyXG4gICAgc2VsZWN0LnN0eWxlLnBhZGRpbmcgPSBcIjhweFwiO1xyXG4gICAgc2VsZWN0LnN0eWxlLm1hcmdpbkJvdHRvbSA9IFwiMTBweFwiO1xyXG5cclxuICAgIGF1ZGlvRGV2aWNlcy5mb3JFYWNoKChkZXZpY2UpID0+IHtcclxuICAgICAgY29uc3Qgb3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKTtcclxuICAgICAgb3B0aW9uLnZhbHVlID0gZGV2aWNlLmRldmljZUlkO1xyXG4gICAgICBvcHRpb24udGV4dCA9IGRldmljZS5sYWJlbCB8fCBgTWljcm9waG9uZSAke2RldmljZS5kZXZpY2VJZC5zbGljZSgwLCA1KX1gO1xyXG4gICAgICBzZWxlY3QuYXBwZW5kQ2hpbGQob3B0aW9uKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGNvbnN0IGJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XHJcbiAgICBidXR0b24udGV4dENvbnRlbnQgPSBcIlNhdmUgU2VsZWN0aW9uXCI7XHJcbiAgICBidXR0b24uc3R5bGUucGFkZGluZyA9IFwiOHB4IDE2cHhcIjtcclxuXHJcbiAgICBidXR0b24ub25jbGljayA9ICgpID0+IHtcclxuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJwcmVmZXJyZWRNaWNyb3Bob25lSWRcIiwgc2VsZWN0LnZhbHVlKTtcclxuICAgICAgZGlhbG9nLmNsb3NlKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIGRpYWxvZy5hcHBlbmRDaGlsZChzZWxlY3QpO1xyXG4gICAgZGlhbG9nLmFwcGVuZENoaWxkKGJ1dHRvbik7XHJcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGRpYWxvZyk7XHJcbiAgICBkaWFsb2cuc2hvd01vZGFsKCk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBhY2Nlc3NpbmcgbWVkaWEgZGV2aWNlczpcIiwgZXJyb3IpO1xyXG4gICAgYWxlcnQoXCJVbmFibGUgdG8gYWNjZXNzIG1pY3JvcGhvbmUuIFBsZWFzZSBjaGVjayB5b3VyIGJyb3dzZXIgc2V0dGluZ3MuXCIpO1xyXG4gIH1cclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBmaWxlVG9VcmwgPSAoZmlsZTogRmlsZSkgPT4ge1xyXG4gIGNvbnN0IGJsb2IgPSBuZXcgQmxvYihbZmlsZV0sIHsgdHlwZTogZmlsZS50eXBlIH0pO1xyXG4gIHJldHVybiBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpO1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGZvcm1hdERhdGVDcm9uID0gKGN1cnJlbnREYXRlKSA9PiB7XHJcbiAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKGN1cnJlbnREYXRlKTtcclxuICByZXR1cm4gYCR7ZGF0ZS5nZXRTZWNvbmRzKCl9ICR7ZGF0ZS5nZXRNaW51dGVzKCl9ICR7ZGF0ZS5nZXRIb3VycygpfSAke2RhdGUuZ2V0RGF0ZSgpfSAke1xyXG4gICAgZGF0ZS5nZXRNb250aCgpICsgMVxyXG4gIH0gJHtkYXRlLmdldERheSgpfWA7XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgdG90YWxDb3VudEluQXJyYXkgPSAoZGF0YSwga2V5KSA9PiB7XHJcbiAgcmV0dXJuIGRhdGEucmVkdWNlKChhY2MsIGN1cnIpID0+IGFjYyArIHBhcnNlSW50KGN1cnJba2V5XSksIDApO1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGZvcm1hdENvdW50RG93biA9IChkdXJhdGlvbikgPT4ge1xyXG4gIGxldCBob3VycyA9IFwiMDBcIjtcclxuICBsZXQgbWludXRlcyA9IFwiMDBcIjtcclxuICBsZXQgc2Vjb25kcyA9IFwiMDBcIjtcclxuICBpZiAoZHVyYXRpb24pIHtcclxuICAgIGNvbnN0IHRvdGFsU2Vjb25kcyA9IE1hdGguZmxvb3IoZHVyYXRpb24uYXNTZWNvbmRzKCkpO1xyXG4gICAgaG91cnMgPSBNYXRoLmZsb29yKHRvdGFsU2Vjb25kcyAvIDM2MDApXHJcbiAgICAgIC50b1N0cmluZygpXHJcbiAgICAgIC5wYWRTdGFydCgyLCBcIjBcIik7XHJcbiAgICBtaW51dGVzID0gTWF0aC5mbG9vcigodG90YWxTZWNvbmRzICUgMzYwMCkgLyA2MClcclxuICAgICAgLnRvU3RyaW5nKClcclxuICAgICAgLnBhZFN0YXJ0KDIsIFwiMFwiKTtcclxuICAgIHNlY29uZHMgPSBNYXRoLmZsb29yKHRvdGFsU2Vjb25kcyAlIDYwKVxyXG4gICAgICAudG9TdHJpbmcoKVxyXG4gICAgICAucGFkU3RhcnQoMiwgXCIwXCIpO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIGAke2hvdXJzfToke21pbnV0ZXN9OiR7c2Vjb25kc31gO1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGNvdW50RG93blRpbWVyID0gKGRhdGU6IERhdGUsIHN0YXJ0OiBzdHJpbmcsIGVuZD86IHN0cmluZykgPT4ge1xyXG4gIGNvbnN0IFtob3VycywgbWluc10gPSBzdGFydC5zcGxpdChcIjpcIik7XHJcbiAgY29uc3QgZGF0ZVRpbWUgPSBtb21lbnQoZGF0ZSlcclxuICAgIC5hZGQoTnVtYmVyKGhvdXJzKSwgXCJob3Vyc1wiKVxyXG4gICAgLmFkZChOdW1iZXIobWlucyksIFwibWludXRlc1wiKTtcclxuXHJcbiAgaWYgKCFlbmQpIHtcclxuICAgIC8vIENoZWNrIGlmIHRoZSB0YXJnZXQgdGltZSBoYXMgYWxyZWFkeSBwYXNzZWRcclxuICAgIGNvbnN0IGN1cnJlbnRUaW1lID0gbW9tZW50KCk7XHJcblxyXG4gICAgbGV0IGRpZmYgPSBtb21lbnQuZHVyYXRpb24oZGF0ZVRpbWUuZGlmZihjdXJyZW50VGltZSkpO1xyXG5cclxuICAgIC8vIElmIHRoZSB0YXJnZXQgdGltZSBpcyBpbiB0aGUgcGFzdCwgc2V0IHRoZSBjb3VudGRvd24gdG8gemVyb1xyXG4gICAgaWYgKGRpZmYuYXNTZWNvbmRzKCkgPCAwKSB7XHJcbiAgICAgIGRpZmYgPSBtb21lbnQuZHVyYXRpb24oMCk7IC8vIFNldCBkdXJhdGlvbiB0byB6ZXJvIGlmIHRpbWUgaXMgdXBcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gZGlmZjtcclxuICB9IGVsc2Uge1xyXG4gICAgY29uc3QgW2VuZEhvdXJzLCBlbmRNaW5zXSA9IGVuZC5zcGxpdChcIjpcIik7XHJcblxyXG4gICAgY29uc3QgZW5kVGltZSA9IG1vbWVudChkYXRlKVxyXG4gICAgICAuYWRkKE51bWJlcihlbmRIb3VycyksIFwiaG91cnNcIilcclxuICAgICAgLmFkZChOdW1iZXIoZW5kTWlucyksIFwibWludXRlc1wiKTtcclxuXHJcbiAgICBsZXQgZGlmZiA9IG1vbWVudC5kdXJhdGlvbihlbmRUaW1lLmRpZmYoZGF0ZVRpbWUpKTtcclxuXHJcbiAgICAvLyBJZiB0aGUgdGFyZ2V0IHRpbWUgaXMgaW4gdGhlIHBhc3QsIHNldCB0aGUgY291bnRkb3duIHRvIHplcm9cclxuICAgIGlmIChkaWZmLmFzU2Vjb25kcygpIDwgMCkge1xyXG4gICAgICBkaWZmID0gbW9tZW50LmR1cmF0aW9uKDApOyAvLyBTZXQgZHVyYXRpb24gdG8gemVybyBpZiB0aW1lIGlzIHVwXHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGRpZmYuYXNNaW51dGVzKCk7XHJcbiAgfVxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IHBvc2l0aW9uVG9SYW5rID0gKHBvc2l0aW9uOiBudW1iZXIpID0+IHtcclxuICBpZiAocG9zaXRpb24gPT09IDEpIHtcclxuICAgIHJldHVybiBcIjFzdFwiO1xyXG4gIH0gZWxzZSBpZiAocG9zaXRpb24gPT09IDIpIHtcclxuICAgIHJldHVybiBcIjJuZFwiO1xyXG4gIH0gZWxzZSBpZiAocG9zaXRpb24gPT09IDMpIHtcclxuICAgIHJldHVybiBcIjNyZFwiO1xyXG4gIH0gZWxzZSB7XHJcbiAgICByZXR1cm4gYCR7cG9zaXRpb259dGhgO1xyXG4gIH1cclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBtb250aHNDb3VudCA9IHtcclxuICBqYW46IDAsXHJcbiAgZmViOiAwLFxyXG4gIG1hcjogMCxcclxuICBhcHI6IDAsXHJcbiAgbWF5OiAwLFxyXG4gIGp1bjogMCxcclxuICBqdWw6IDAsXHJcbiAgYXVnOiAwLFxyXG4gIHNlcDogMCxcclxuICBvY3Q6IDAsXHJcbiAgbm92OiAwLFxyXG4gIGRlYzogMCxcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXRIb3Vyc01pbnMobWludXRlczogbnVtYmVyKSB7XHJcbiAgY29uc3QgaG91cnMgPSBNYXRoLmZsb29yKG1pbnV0ZXMgLyA2MCk7XHJcbiAgY29uc3QgcmVtYWluaW5nTWludXRlcyA9IG1pbnV0ZXMgJSA2MDtcclxuXHJcbiAgcmV0dXJuIGAke2hvdXJzfSBIcnMgJHtyZW1haW5pbmdNaW51dGVzfSBtaW5gO1xyXG59XHJcblxyXG5jb25zdCBzMyA9IG5ldyBBV1MuUzMoe1xyXG4gIGFjY2Vzc0tleUlkOiBcIkFLSUEyU1NUQzJQR0g3Vk1TUklMXCIsIC8vIFJlcGxhY2Ugd2l0aCB5b3VyIGFjY2VzcyBrZXlcclxuICBzZWNyZXRBY2Nlc3NLZXk6IFwiN1FrUjgwSnV5TVRaUkMvdmdFRWxwMFJFRHBkTUxYcTEyaUtYK3JGWFwiLCAvLyBSZXBsYWNlIHdpdGggeW91ciBzZWNyZXQga2V5XHJcbn0pO1xyXG5cclxuZXhwb3J0IGNvbnN0IHVwbG9hZFRvUzMgPSBhc3luYyAoXHJcbiAgZmlsZTogRmlsZSxcclxuICBidWZmZXI6IGFueSxcclxuICBmb2xkZXI/OiBzdHJpbmdcclxuKTogUHJvbWlzZTxzdHJpbmc+ID0+IHtcclxuICAvLyBDcmVhdGUgYSBzdHJlYW0gZnJvbSB0aGUgZmlsZSBidWZmZXJcclxuXHJcbiAgY29uc3QgcGFyYW1zID0ge1xyXG4gICAgQnVja2V0OiBcImF4aW9tLWJ1Y2tldC1tZWRpYVwiLCAvLyBSZXBsYWNlIHdpdGggeW91ciBidWNrZXQgbmFtZVxyXG4gICAgS2V5OiBmb2xkZXJcclxuICAgICAgPyBgdXBsb2Fkcy8ke2ZvbGRlcn0vJHtmaWxlLm5ld0ZpbGVuYW1lfWBcclxuICAgICAgOiBgdXBsb2Fkcy8ke2ZpbGUubmV3RmlsZW5hbWV9YCwgLy8gQWRqdXN0IHBhdGggYW5kIGZpbGVuYW1lIGFzIG5lY2Vzc2FyeVxyXG4gICAgQm9keTogYnVmZmVyLFxyXG4gICAgQ29udGVudFR5cGU6IGZpbGUubWltZXR5cGUsIC8vIEVuc3VyZSBjb3JyZWN0IGNvbnRlbnQgdHlwZVxyXG4gICAgQUNMOiBcInB1YmxpYy1yZWFkXCIsIC8vIEFkanVzdCBwZXJtaXNzaW9ucyBhcyBuZWVkZWRcclxuICB9O1xyXG5cclxuICB0cnkge1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHMzLnVwbG9hZChwYXJhbXMpLnByb21pc2UoKTtcclxuICAgIHJldHVybiBkYXRhLkxvY2F0aW9uO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJFcnJvciB1cGxvYWRpbmcgZmlsZSB0byBTMzogXCIgKyBlcnJvci5tZXNzYWdlKTtcclxuICB9XHJcbn07XHJcbiJdLCJuYW1lcyI6WyJBV1MiLCJtb21lbnQiLCJTaG93TmF2aWdhdG9yRGV2aWNlTW9kYWwiLCJwZXJtaXNzaW9uUmVzdWx0IiwibmF2aWdhdG9yIiwicGVybWlzc2lvbnMiLCJxdWVyeSIsIm5hbWUiLCJzdGF0ZSIsImFsZXJ0IiwiZGV2aWNlcyIsIm1lZGlhRGV2aWNlcyIsImVudW1lcmF0ZURldmljZXMiLCJhdWRpb0RldmljZXMiLCJmaWx0ZXIiLCJkZXZpY2UiLCJraW5kIiwiZGlhbG9nIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50Iiwic3R5bGUiLCJwYWRkaW5nIiwiYm9yZGVyUmFkaXVzIiwiYm94U2hhZG93IiwiY2xvc2VCdXR0b24iLCJpbm5lckhUTUwiLCJwb3NpdGlvbiIsInJpZ2h0IiwidG9wIiwiYm9yZGVyIiwiYmFja2dyb3VuZCIsImZvbnRTaXplIiwiY3Vyc29yIiwib25jbGljayIsImNsb3NlIiwiYXBwZW5kQ2hpbGQiLCJ0aXRsZSIsInRleHRDb250ZW50Iiwic2VsZWN0Iiwid2lkdGgiLCJtYXJnaW5Cb3R0b20iLCJmb3JFYWNoIiwib3B0aW9uIiwidmFsdWUiLCJkZXZpY2VJZCIsInRleHQiLCJsYWJlbCIsInNsaWNlIiwiYnV0dG9uIiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsImJvZHkiLCJzaG93TW9kYWwiLCJlcnJvciIsImNvbnNvbGUiLCJmaWxlVG9VcmwiLCJmaWxlIiwiYmxvYiIsIkJsb2IiLCJ0eXBlIiwiVVJMIiwiY3JlYXRlT2JqZWN0VVJMIiwiZm9ybWF0RGF0ZUNyb24iLCJjdXJyZW50RGF0ZSIsImRhdGUiLCJEYXRlIiwiZ2V0U2Vjb25kcyIsImdldE1pbnV0ZXMiLCJnZXRIb3VycyIsImdldERhdGUiLCJnZXRNb250aCIsImdldERheSIsInRvdGFsQ291bnRJbkFycmF5IiwiZGF0YSIsImtleSIsInJlZHVjZSIsImFjYyIsImN1cnIiLCJwYXJzZUludCIsImZvcm1hdENvdW50RG93biIsImR1cmF0aW9uIiwiaG91cnMiLCJtaW51dGVzIiwic2Vjb25kcyIsInRvdGFsU2Vjb25kcyIsIk1hdGgiLCJmbG9vciIsImFzU2Vjb25kcyIsInRvU3RyaW5nIiwicGFkU3RhcnQiLCJjb3VudERvd25UaW1lciIsInN0YXJ0IiwiZW5kIiwibWlucyIsInNwbGl0IiwiZGF0ZVRpbWUiLCJhZGQiLCJOdW1iZXIiLCJjdXJyZW50VGltZSIsImRpZmYiLCJlbmRIb3VycyIsImVuZE1pbnMiLCJlbmRUaW1lIiwiYXNNaW51dGVzIiwicG9zaXRpb25Ub1JhbmsiLCJtb250aHNDb3VudCIsImphbiIsImZlYiIsIm1hciIsImFwciIsIm1heSIsImp1biIsImp1bCIsImF1ZyIsInNlcCIsIm9jdCIsIm5vdiIsImRlYyIsImZvcm1hdEhvdXJzTWlucyIsInJlbWFpbmluZ01pbnV0ZXMiLCJzMyIsIlMzIiwiYWNjZXNzS2V5SWQiLCJzZWNyZXRBY2Nlc3NLZXkiLCJ1cGxvYWRUb1MzIiwiYnVmZmVyIiwiZm9sZGVyIiwicGFyYW1zIiwiQnVja2V0IiwiS2V5IiwibmV3RmlsZW5hbWUiLCJCb2R5IiwiQ29udGVudFR5cGUiLCJtaW1ldHlwZSIsIkFDTCIsInVwbG9hZCIsInByb21pc2UiLCJMb2NhdGlvbiIsIkVycm9yIiwibWVzc2FnZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./utils/helper.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fchat&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cchat%5Cindex.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();